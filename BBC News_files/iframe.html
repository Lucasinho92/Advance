<!DOCTYPE html>
<!-- saved from url=(0048)https://emp.bbc.com/emp/SMPj/2.23.21/iframe.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script type="text/javascript" src="./require.js.download"></script>
<script type="text/javascript">

window.validDomains = "bbc\\.co\\.uk,bbc\\.com,bbcconnectedstudio\\.co\\.uk,metabroadcast\\.com,bbcnewshq\\.com,twofourstaging\\.net,codeandtheory\\.net,thespace\\.org,plateau\\.com,bbcstore\\.com,microbit\\.co\\.uk,bbcarchdev\\.net,acropolis\\.org\\.uk,audiencesportal\\.co\\.uk,thirteenlostyears\\.co\\.uk,bbcdigitalguerrillas\\.co\\.uk,bbc-massive\\.com,britbox\\.com,bbcomtraining\\.co\\.uk,bbcrewind\\.co\\.uk,gomolearning\\.com,newslabs\\.co,bbcnewslabs\\.co\\.uk,bbccreative\\.co\\.uk,api\\.bbci\\.co\\.uk,csod\\.com,bbcmediaactionilearn\\.com,bbcnitechops\\.co\\.uk,bbcnireland\\.co\\.uk,bbcverticals\\.com,gomocentral\\.com,riddle\\.com".split(",");
window.validWholeDomains = "bbcmediaaction1.sharepoint.com,ne-scorm.365.systems".split(",");

// Browser capability tests e.g. for Windows Phone 8 Internet Explorer
if (typeof window.JSON !== 'object') {
    document.write('<script type="text/javascript" src="json.js"></scr'+'ipt>');
}
try {
    Object.defineProperty(this, "test", {} );
} catch(e) {
    // Redirect
    window.location.href="UnsupportedError.html";
}
</script>
<style type="text/css">
.p_audioui_intervalButton{width:48px;height:48px;fill:#FFFFFF;color:#FFFFFF;overflow:visible;}.p_audioui_intervalNumber{position:absolute;top:20px;text-align:center;left:0;right:0;font-size:14px;line-height:14px;}.p_audioui_intervalNumber_sign{display:none;}.p_audioui_intervalButton:not([disabled]).pressed .p_audioui_intervalNumber{top:-20px;}@media (prefers-reduced-motion){.p_audioui_intervalButton:not([disabled]).pressed .p_audioui_intervalNumber{top:20px;}}.p_audioui_intervalButton:not([disabled]).pressed .p_audioui_intervalNumber_sign{display:inline;}@media (prefers-reduced-motion){.p_audioui_intervalButton:not([disabled]).pressed .p_audioui_intervalNumber_sign{display:none;}}.p_audioui_intervalButton .p_audioui_intervalArrow{-webkit-transition:200ms -webkit-transform ease-out;transition:200ms -webkit-transform ease-out;transition:200ms transform ease-out;transition:200ms transform ease-out,200ms -webkit-transform ease-out;-webkit-transform-origin:24px 26px;transform-origin:24px 26px;}.p_audioui_intervalButton:not([disabled]).pressed #p_audioui_backInterval_backArrow{-webkit-transform:rotate(-70deg);transform:rotate(-70deg);}.p_audioui_intervalButton:not([disabled]).pressed #p_audioui_forwardInterval_forwardArrow{-webkit-transform:rotate(70deg);transform:rotate(70deg);}.p_audioui_jumpButton{width:48px;height:48px;fill:#FFFFFF;color:#FFFFFF;}#p_audioui_backToStartButton_text{position:absolute;top:22px;right:17px;font-size:10px;line-height:10px;}#p_audioui_toLiveButton_text{position:absolute;top:22px;left:17px;font-size:10px;line-height:10px;}#p_audioui_playpause{width:68px;height:68px;fill:#FFFFFF;}#p_audioui_playpause_circle{stroke:rgb(255,255,255);stroke-width:3;fill:none;-webkit-transition:100ms opacity linear;transition:100ms opacity linear;}.p_fadingRing{-webkit-transition:100ms opacity linear;transition:100ms opacity linear;}#p_audioui_playpause_highlightCircle{opacity:0;-webkit-transition:100ms opacity linear;transition:100ms opacity linear;}#p_audioui_playpause.hovering #p_audioui_playpause_highlightCircle,#p_audioui_playpause.pressed #p_audioui_playpause_highlightCircle,.nonPointerFocus #p_audioui_playpause.focused #p_audioui_playpause_highlightCircle{opacity:1;}#p_audioui_playpause_playIcon{-webkit-transform-origin:34px 34px;transform-origin:34px 34px;-webkit-transition:100ms -webkit-transform ease-out;transition:100ms -webkit-transform ease-out;transition:100ms transform ease-out;transition:100ms transform ease-out,100ms -webkit-transform ease-out;-webkit-transform:scale(1);transform:scale(1);}#p_audioui_playpause.pressed #p_audioui_playpause_playIcon{-webkit-transform:scale(0.8);transform:scale(0.8);}#p_audioui_playpause_pauseIcon{-webkit-transform-origin:34px 34px;transform-origin:34px 34px;opacity:0;-webkit-transition:100ms -webkit-transform ease-out;transition:100ms -webkit-transform ease-out;transition:100ms transform ease-out;transition:100ms transform ease-out,100ms -webkit-transform ease-out;-webkit-transform:scale(1);transform:scale(1);}#p_audioui_playpause.pressed #p_audioui_playpause_pauseIcon{-webkit-transform:scale(0.8);transform:scale(0.8);}.audioUI #p_audioui_leftTimeDisplay{color:#FFF;font-size:12px;line-height:12px;pointer-events:none;transition:opacity 1000ms linear;}.audioUI #p_audioui_rightTimeDisplay{color:#FFF;font-size:12px;line-height:12px;pointer-events:none;transition:opacity 1000ms linear;}.audioUI #p_audioui_rightTimeDisplay span{display:block;float:right;line-height:12px;height:12px;margin-left:3px;transition:opacity 1000ms linear;}.audioUI #p_audioui_rightTimeDisplay svg{display:block;float:right;fill:#FFFFFF;transition:opacity 1000ms linear;-webkit-transform:translateZ(0);transform:translateZ(0);}.p_audioui_liveIconCentre{animation:1.7s ease infinite pulsate;}@media (prefers-reduced-motion){.p_audioui_liveIconCentre{animation:none;}}@keyframes pulsate{from{opacity:1;}50%{opacity:0.3;}to{opacity:1;}}.audioUI #p_audioui_container{position:absolute;width:100%;z-index:160;bottom:0;}.audioUI .p_playerSeekBarHolder{position:absolute;bottom:98px;}.audioButton{margin:0;padding:0;border:0;outline:0;background-color:transparent;cursor:pointer;transition:opacity 1000ms linear;opacity:1;-webkit-tap-highlight-color:transparent;}.audioButton .p_audioButton_buttonInner{position:relative;width:100%;height:100%;}.audioButton[disabled]{cursor:default;pointer-events:none;}.audioButton[disabled] .p_audioButton_buttonInner{opacity:0.4;}.audioButton.hidden,.audioButton.removed{opacity:0 !important;pointer-events:none;cursor:default;}.audioUI #p_audioui_coreControls{position:absolute;bottom:16px;left:50%;}.audioUI #p_audioui_playpause{position:absolute;bottom:0;left:-34px;}.audioUI #p_audioui_ctaDuration{position:absolute;bottom:26px;left:50px;width:150px;color:#FFF;font-size:15px;line-height:15px;opacity:1;transition:opacity 1000ms linear;}.audioUI #p_audioui_ctaDuration.hidden,.audioUI #p_audioui_ctaDuration.removed{opacity:0;transition-duration:0s;}.audioUI #p_audioui_backInterval{position:absolute;bottom:10px;right:62px;}.audioUI #p_audioui_forwardInterval{position:absolute;bottom:10px;left:62px;}.audioUI #p_audioui_previousButton{position:absolute;bottom:10px;right:123px;}.audioUI #p_audioui_nextButton{position:absolute;bottom:10px;left:123px;}.audioUI #p_audioui_backToStartButton{position:absolute;bottom:10px;right:123px;}.audioUI #p_audioui_toLiveButton{position:absolute;bottom:10px;left:123px;}.audioUI .p_volumeControls{bottom:26px;left:8px;}.audioUI #p_audioui_rightRegionControls{position:absolute;right:0;bottom:27px;}.audioUI #p_audioui_playbackSettingsButton{float:right;}.audioUI #p_audioui_popOutPlayerButton{float:right;padding-right:16px;}@media (max-width:799px){.audioUI #p_audioui_popOutPlayerButton{display:none;}.audioUI #p_audioui_playbackSettingsButton{display:none;}}.audioUI #p_audioui_leftTimeDisplay{position:absolute;left:16px;bottom:92px;}.audioUI #p_audioui_rightTimeDisplay{position:absolute;right:16px;bottom:92px;}@media (max-width:374px){.audioUI #p_audioui_backInterval{right:52px;}.audioUI #p_audioui_forwardInterval{left:52px;}.audioUI #p_audioui_previousButton{right:105px;}.audioUI #p_audioui_nextButton{left:105px;}.audioUI #p_audioui_backToStartButton{right:105px;}.audioUI #p_audioui_toLiveButton{left:105px;}}@media (max-width:399px){.audioUI #p_audioui_leftTimeDisplay{left:10px;}.audioUI #p_audioui_rightTimeDisplay{right:10px;}}.p_errorWrapper{position:absolute;z-index:150;left:0;top:0;height:100%;width:100%;}.p_errorDialog{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;text-decoration:none;vertical-align:middle;text-align:center;color:#fff;font-size:18px;line-height:24px;background-color:rgba(51,51,51,0.85);}.p_smallErrorVersion .p_errorDialog{background:rgba(51,51,51,1);display:block;}@media (min-width:320px) and (max-width:599px){.p_errorDialog{font-size:16px;line-height:22px;}}@media (max-width:319px){.p_errorDialog{font-size:15px;line-height:20px;}}.p_errorBackground{vertical-align:middle;width:245px;text-align:center;padding:20px;background-color:transparent;}.p_smallErrorVersion .p_errorBackground{position:absolute;left:0;height:100%;width:100%;background:none;text-align:left;padding:0;}@media (max-width:266px){.p_errorBackground{width:100%;padding:0 8px;box-sizing:border-box;}}.p_iconHolder.alertIconHolder{height:22px;background-size:25.15px 22px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/alert.png);}.svg .alertIconHolder{background-image:none;}.p_smallErrorVersion .alertIconHolder{display:inline-block;float:left;width:44px;height:100%;text-align:center;padding:0 8px;}@media (max-width:400px){.p_smallErrorVersion .p_fallbackDialog .alertIconHolder{display:none;}}@media (max-width:266px){.alertIconHolder:not(.p_smallErrorVersion){display:none;}.p_smallErrorVersion .p_errorRefreshDialog_a + .alertIconHolder{display:none;}}.svg .p_alertIcon{width:25.15px;height:22px;}.p_smallErrorVersion.svg .p_alertIcon{position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:25.15px;height:22px;}.p_smallErrorVersion div[role=alert]{display:block;overflow:hidden;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.p_errorPrimary{display:inline-block;margin-top:16px;}.p_smallErrorVersion .p_errorPrimary{margin:0;display:block;}@media (max-width:266px){.p_errorPrimary{width:100%;}}@media (max-width:400px){.p_smallErrorVersion .p_fallbackDialog .p_errorPrimary{padding:8px;text-align:center;}}.p_errorPrimary a{color:#fff;font-weight:bold;}@media (max-width:400px){.p_smallErrorVersion.svg .p_refreshIcon{display:block !important;width:18px;height:18px;padding:8px 0;}}.p_errorSecondary{margin-top:31px;display:block;color:#fff;}.p_errorSecondary a{color:#fff;}.p_none.p_errorSecondary,.p_smallErrorVersion .p_errorSecondary{display:none;}.p_errorDialog_a{display:inline-block;color:#fff;width:227px;height:34px;line-height:34px;margin-top:17px;margin-bottom:10px;background-color :#191919;border:5px solid transparent;background-clip:padding-box;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;}.p_smallErrorVersion .p_errorDialog_a{width:auto;text-align:center;margin:0 8px 0 0;padding:0 8px;float:right;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}.offline .p_errorDialog_a{display:none;}@media (max-width:400px){.p_smallErrorVersion .p_errorDialog_a{display:none;}}@media (max-width:266px){.p_errorDialog_a{width:100%;border:0;}}.p_errorRefreshDialog_a{background-size:18px 18px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/refresh.png);}.svg .p_errorRefreshDialog_a{background-image:none;}.p_smallErrorVersion .p_errorRefreshDialog_a{display:none;color:#fff;height:34px;line-height:34px;margin:0 8px 0 0;padding:0 8px;float:right;background-color :#191919;border:5px solid transparent;background-clip:padding-box;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}@media (max-width:400px){.p_smallErrorVersion .p_errorRefreshDialog_a{display:inline-block !important;}}.p_fallbackButton{height:34px;line-height:34px;width:100%;margin-top:19px;background:#191919;color:#fff;text-align:center;cursor:pointer;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;}.p_smallErrorVersion .p_fallbackDialog .p_fallbackButton{width:245px;margin-top:12px;}@media (max-width:400px){.p_smallErrorVersion .p_fallbackDialog .p_fallbackButton{margin-right:auto;margin-left:auto;}}#p_audioui_playbackSettingsButton{fill:#FFFFFF;width:48px;height:48px;}#p_audioui_playbackSettingsButton.removed{display:none;}.p_subtitlesContainer{pointer-events:none;z-index:9;width:100%;height:100%;display:block;position:absolute;}.errorShowing .p_subtitlesContainer{display:none !important;}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}body,html{margin:0;padding:0;overflow:hidden;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none;}video::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none;}html{height:100%;width:100%;}body{background-color:transparent;margin:0;padding:0;}body.classicUI{background-color:#000;}body.classicUI.transparent{background-color:transparent;}.p_background{position:fixed;left:0;right:0;top:0;bottom:0;background-color:#000;}.p_background.transparent{background-color:transparent;}button{border-radius:0px;}button.p_cta,button.p_button,button.p_controlBarButton{font-size:1em;outline:none;}.cta .mediaContainer:hover{cursor:pointer;}.transparent .mediaContainer{background-color:transparent !important;}.errorShowing .mediaContainer:hover{cursor:default;}.p_accessibleHitArea{position:absolute;top:0;width:100%;height:100%;}#p_alert{width:1px;position:absolute;left:-2500px;overflow:hidden;display:none;}.p_posterEffectsContainer,.p_posterSlideEffectContainer,.p_posterEffectsContainer img{position:absolute;top:0;z-index:0;height:100%;width:100%;}.p_oldSlideImage{z-index:0 !important;}.p_newSlideImage{z-index:1 !important;}.p_onScreen{left:0;}.p_offScreenLeft{left:-100%;}.p_offScreenRight{left:100%;}.p_button{cursor:pointer;border:0;padding:0;margin:0;}.p_posterEffectsContainer{position:absolute;top:0;left:0;bottom:0;right:0;}.p_posterEffectsContainer img{height:100%;width:100%;}.mediaContainer{left:0;top:0;height:100%;width:100%;overflow:hidden;position:absolute;background-repeat:no-repeat;background-position:49.99% 49.99%;background-size:contain;background-color:inherit;}.mediaContainer video,.mediaContainer audio{background-color:transparent;position:absolute;left:0;top:0;height:100%;width:100%;}.classicUI .mediaContainer video,.classicUI .mediaContainer audio{background-color:black;}body.classicUI.transparent .mediaContainer video,body.classicUI.transparent .mediaContainer audio{background-color:transparent;}#p_swfcontainer{pointer-events:none;position:fixed;left:0px;top:0px;right:0px;bottom:0px;}.errorShowing #p_swfcontainer,.flashHidden #p_swfcontainer{left:-10000px;width:10px;}.displayCover:not(.fullscreen) .mediaContainer{background-size:cover;}.videoPositionTop .mediaContainer{background-position:0% 0%;}.videoPositionBottom .mediaContainer{background-position:0% 100%;}.displayCover:not(.fullscreen) .mediaContainer video{object-fit:cover;}.videoPositionTop .mediaContainer video{object-position:0% 0%;}.videoPositionBottom .mediaContainer video{object-position:0% 100%;}#debugMenu{color:#fff;font-size:15px;display:block;position:fixed;top:0px;left:0px;right:0px;bottom:0px;padding:10px;z-index:10;background-color:rgba(0,0,0,0.7);}.p_contextMenu{position:fixed;background-color:#fff;border:1px solid #333;border-radius:3px;max-width:350px;margin:0;padding:0;z-index:200;}.p_contextMenu li:hover{background-color:#666;color:#fff;}.p_contextMenu li{list-style:none;}.p_contextMenuItem{display:inline-block;margin:0 5px;overflow:hidden;text-overflow:ellipsis;width:calc(100% - 10px);font-size:12px;line-height:22px;cursor:pointer;white-space:nowrap;color:#000;text-decoration:none;}.p_contextMenu li:first-child{margin-top:5px;}.p_contextMenu li:last-child{margin-bottom:5px;}#p_remoteInput{position:absolute;top:40px;right:40px;padding:8px 10px;width:37px;color:#fff;letter-spacing:3px;font-weight:bold;font-size:18px;background-color:rgba(0,0,0,0.8);}.p_iconHolder{position:relative;height:100%;width:100%;}.p_iconHolder svg{height:inherit;width:inherit;}.p_cta{position:absolute;border:0;left:0;bottom:0;width:99%;display:block;width:80px;height:80px;text-decoration:none;-webkit-transition:background-color 0.4s ease-out;-moz-transition:background-color 0.4s ease-out;-o-transition:background-color 0.4s ease-out;transition:background-color 0.4s ease-out;background-color:rgba(0,0,0,0.8);background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cta_play.png);background-repeat:no-repeat;background-position:center;background-size:52px 52px;cursor:pointer;z-index:150;}.rtlCta .p_cta{left:calc(100% - 80px);}.p_cta.p_hasDuration{background-position:50% 38%;}.svg .p_svg{fill:#fff;}.svg .p_cta,.svg.minimode .p_cta{background-image:none;}.svg .p_cta .p_ctaIcon{position:absolute;top:10px;left:10px;height:60px;width:60px;}.svg .p_cta.p_hasDuration .p_ctaIcon{top:5px;}.minimode .p_cta{width:60px;height:60px;background-size:35px 35px;}.minimode.svg .p_cta .p_ctaIcon{top:10px;left:10px;height:40px;width:40px;}.minimode.svg .p_cta.p_hasDuration .p_ctaIcon{top:4px;}.minimode.audio .p_cta{background-size:22px 22px;}.minimode.audio .p_cta.p_hasDuration{background-position:50% 34%;}.p_ctaDuration{font-size:0.75rem;position:absolute;bottom:8px;left:0;color:#fff;width:80px;}.minimode .p_ctaDuration{bottom:6px;width:60px;}.p_none{display:none;}.minimode .p_cta{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cta_play_minimode.png);}.p_cta.p_iplayerIcon{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cta_play_iplayer.png);background-size:36px 36px;}.svg .p_cta.p_iplayerIcon{background-image:none;}.minimode .p_cta .p_iplayerIcon{background-size:27px 27px;}.minimode .p_cta.p_hasDuration.p_iplayerIcon{background-position:50% 31%;}.minimode.audio .p_cta .p_iplayerIcon{background-size:23px 23px;}.audio .p_cta{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cta_play_audio.png);background-size:28px 28px;}.audio.svg .p_cta{background-image:none;}.audio.svg .p_cta .p_ctaIcon{top:9px;left:9px;height:62px;width:62px;}.audio.svg .p_cta.p_hasDuration .p_ctaIcon{top:4px;}.minimode.audio.svg .p_cta .p_ctaIcon{top:9px;left:7px;height:45px;width:45px;}.minimode.audio.svg .p_cta.p_hasDuration .p_ctaIcon{top:1px;}.audio .p_cta.p_iplayerIcon{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cta_play_audio_iplayer.png);}.audio.svg .p_cta.p_iplayerIcon{background-image:none;}.minimode.audio.svg .p_cta.p_iplayerIcon .p_ctaIcon{top:6px;left:6px;height:49px;width:49px;}.minimode.audio.svg .p_cta.p_hasDuration.p_iplayerIcon .p_ctaIcon{top:0;}@-webkit-keyframes spinner{from{-webkit-transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);}}@-moz-keyframes spinner{from{-moz-transform:rotate(0deg);}to{-moz-transform:rotate(360deg);}}@keyframes spinner{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}.p_spinner{position:absolute;position:fixed;pointer-events :none;z-index:10;display:none;}.p_spinner canvas{-webkit-animation-name:spinner;-webkit-animation-duration:1.1s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;-moz-animation-name:spinner;-moz-animation-duration:1.1s;-moz-animation-iteration-count:infinite;-moz-animation-timing-function:linear;animation-name:spinner;animation-duration:1.1s;animation-iteration-count:infinite;animation-timing-function:linear;}.minimode .p_spinner{display:none !important;}#p_pluginContainer{z-index:50;overflow:hidden;}.p_playerControls{left:0;right:0;bottom:0;z-index:160;position:absolute;}.p_gradientLayer{pointer-events:none;opacity:0;left:0;right:0;bottom:0;z-index:8;position:absolute;width:100%;height:148px;background:-moz-linear-gradient(top,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);background:-webkit-linear-gradient(top,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);background:linear-gradient(to bottom,rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 40%,rgba(0,0,0,1) 100%);}.p_gradientBottomfiller{pointer-events:none;position:absolute;z-index:49;width:100%;background-color:#000000;bottom:0;}.cta .p_gradientLayer,.cta .p_gradientBottomfiller{visibility:hidden;}.p_hasMarkers:not(.p_chapterOnly):not(.p_keyMomentOnly) .p_gradientLayer{height:176px;}.noSeekingBar .p_gradientLayer{height:64px;}.minimode .p_gradientLayer{background:black;height:88px;}.minimode.transparent .p_gradientBottomfiller{background:transparent;}.minimode.transparent .p_gradientLayer{background:transparent;}.minimode.noSeekingBar .p_gradientLayer{height:44px;}.minimode:not(.p_keyMomentOnly).p_hasMarkers .p_gradientLayer{height:132px;}.minimode .p_keyMoment{bottom:50px;}.minimode.p_keyMomentOnly .p_keyMoment{bottom:6px;}@media (max-width:1310px){.fullscreen .p_playerControls{left:3.5625%;right:3.5625%;margin:0;width:auto;}}@media (min-width:1310px){.fullscreen .p_playerControls{left:50%;margin:0 0 0 -640px;width:1280px;}}.fadedOut{opacity:0;}.fadedIn{opacity:1;}.fadedIn,.fadedOut{-webkit-transition:opacity 0.6s ease-out;-moz-transition:opacity 0.6s ease-out;-o-transition:opacity 0.6s ease-out;transition:opacity 0.6s ease-out;}.controlsFadedOut .p_playerControls,.controlsFadedOut .p_gradientLayer,.controlsFadedOut .p_gradientBottomfiller,.controlsFadedOut .p_timeDisplay{opacity:0;}.controlsFadedIn .p_playerControls,.controlsFadedIn .p_gradientLayer,.controlsFadedIn .p_gradientBottomfiller,.controlsFadedIn .p_timeDisplay{opacity:1;}.controlsFadedIn .p_playerControls,.controlsFadedIn .p_gradientLayer,.controlsFadedIn .p_gradientBottomfiller,.controlsFadedIn .p_timeDisplay,.controlsFadedOut .p_playerControls,.controlsFadedOut .p_gradientLayer,.controlsFadedOut .p_gradientBottomfiller,.controlsFadedOut .p_timeDisplay,#p_compassContainer{-webkit-transition:opacity 0.6s ease-out;-moz-transition:opacity 0.6s ease-out;-o-transition:opacity 0.6s ease-out;transition:opacity 0.6s ease-out;}.p_timeTipTriangle.p_keyMomentTipTriangle{border-top:5px solid #191919;left:2px;}.p_timeDisplay{cursor:default;float:right;right:0;margin-right:12px;text-align:center;white-space:nowrap;}.p_time{font-size:0.75em;text-align:right;display:inline-block;line-height:44px;color:#fff;}.p_timeSeparator{font-size:0.75em;padding-right:7px;padding-left:4px;width:2px;line-height:44px;color:#b3b3b3;display:inline-block;}.p_duration{color:#b3b3b3;text-align:left;}.transparent .p_timeSeparator,.transparent .p_duration{color:white;}.p_playerControlBarHolder{position:relative;height:44px;line-height:0;}.stopTouch .p_playerControls{pointer-events:none;}.p_controlBarButton{position:absolute;width:44px;height:44px;font-weight:bold;display:block;text-decoration:none;text-align:center;background-repeat :no-repeat;background-color :transparent;background-position :center center;outline:0;cursor:pointer;z-index:170;-webkit-transition:opacity 0.4s ease-out;-moz-transition:opacity 0.4s ease-out;-o-transition:opacity 0.4s ease-out;transition:opacity 0.4s ease-out;}.p_controlBarButton:not(.p_buttonTouch){-webkit-transition:background-color 0.4s ease-out,opacity 0.4s ease-out;-moz-transition:background-color 0.4s ease-out,opacity 0.4s ease-out;-o-transition:background-color 0.4s ease-out,opacity 0.4s ease-out;transition:background-color 0.4s ease-out,opacity 0.4s ease-out;}.p_selected_indicator{position:absolute;height:4px;width:40px;}.p_timeDisplay.p_covered{opacity:0;}.p_controlBarButton_on:hover .p_selected_indicator,.p_settingsPanelOpen .p_selected_indicator,.nonPointerFocus .p_controlBarButton_on:focus .p_selected_indicator{opacity:0.4;}.p_controlSeekBarThumb{position:absolute;width:38px;height:38px;z-index:170;}.p_playButton{left:0;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/play.png);}.svg .p_playButton{background-image:none;}.svg .p_playButton .p_playIcon{position:absolute;left:5px;top:7px;width:31px;height:31px;}.p_pauseButton{left:0;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/pause.png);}.svg .p_pauseButton{background-image:none;}.svg .p_pauseButton .p_pauseIcon{position:absolute;left:7px;top:8px;width:28px;height:28px;}.p_fullscreenButton{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/fullscreen.png);}.p_fullscreenButtonReturn{right:0;background-size:22px 22px;background-position:center;background-repeat:no-repeat;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/fullscreen-exit.png);}.p_castOverlay{position:absolute;background-color:rgba(51,51,51,0.8);height:100%;padding:0;top:0;left:0;right:0;margin:0;overflow:hidden;z-index:9;}.p_castOverlay .p_castIcon{height:100px;width:100px;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;}.fullscreen .p_messageDiv{top:35%;}.CCisCasting .p_castOverlay.shiftCentralControls .p_castIcon{margin:5px;}.p_messageDiv{top:22%;position:absolute;width:100%;text-align:center;}.p_castMessage{color:#fff;font-size:1.25em;font-weight:bold;}.CCisCasting .p_castOverlay.shiftCentralControls .p_castMessage,.CCisCasting .p_castOverlay.shiftCentralControls .p_deviceMessage{display:inline;}.CCisCasting .p_castOverlay.shiftCentralControls .p_deviceMessage:before{content:" - ";}.p_deviceMessage{padding:8px 0 4px 0;color:#a4a4a4;font-size:1em;}@media (min-width:600px){.CCisCasting .p_castOverlay.shiftCentralControls .p_messageDiv{top:40px;left:105px;display:inline;text-align:left;}}.CCisCasting .p_castOverlay.shiftCentralControls .p_messageDiv div{display:inline-block;}.rippleEffect:active{border-radius:50%;background-color:rgba(164,164,164,0.5);-webkit-transition:background 0.2s;transition:background 0.2s;}@media (max-width:600px){.p_castOverlay .p_castIcon{left:10px;top:7px;right:calc(100% - 100px);bottom:calc(100% - 50px);height:44px;width:44px;margin:0;}.CCisCasting .p_castIcon{margin:5px;}.CCisAttemptingToCast .p_castOverlay .p_castIcon,.CCisConnecting .p_castOverlay .p_castIcon{left:30px;top:13px;}.p_castMessage,.p_deviceMessage{display:inline;}.p_messageDiv,.fullscreen .p_messageDiv{top:25px;left:65px;display:inline;text-align:left;font-size:12px;}.CCisAttemptingToCast .p_messageDiv,.CCisConnecting .p_messageDiv{left:80px;}.p_deviceMessage:before{content:" - ";}.p_messageDiv div{display:inline-block;}}.svg .p_fullscreenButton,.svg .p_fullscreenButtonReturn{background-image:none;}.nofullscreen .p_fullscreenButton,.nofullscreen .p_fullscreenButtonReturn{display:none;}.p_subtitleButton{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/accessibility.png);}.svg .p_subtitleButton{background-image:none;}.svg .p_subtitleButton .p_subtitlesIcon{position:absolute;left:6px;top:6px;width:32px;height:32px;}.chromecast .p_chromecastButton{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/chromecast.png);}.svg .p_chromecastButton,.svg .p_picInPicButton{background-image:none;}.svg .p_picInPicButton{padding-left:11px;padding-top:13px;}.p_embedButton{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/embed.png);}.svg .p_embedButton{background-image:none;}.svg .p_embedButton .p_embedIcon{position:absolute;width:39px;height:39px;left:2px;top:3px;}.p_padlock{position:absolute;right:0px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/padlock_locked.png);background-position:center center;background-repeat:no-repeat;background-color:#d13c2c;cursor:pointer;height:30px;width:30px;top:50%;margin-top:-15px;}.rtlCta .p_padlock{left:0}.svg .p_padlock,.svg .p_padlock_unlocked{background-image:none;}.svg .p_padlock .p_padlock-lockedIcon{position:absolute;top:9px;left:6px;}.p_padlock_unlocked{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/padlock_unlocked.png);}.svg .p_padlock .p_padlock-unlockedIcon{position:absolute;top:9px;left:6px;}.p_guidance{position:absolute;height:80px;max-width:70%;padding-right:40px;display:table;margin-top:-40px;}.rtlCta .p_guidance{padding-right:25px;}.p_guidanceHolder{position:relative;}.rtlCta .p_guidanceHolder{text-align:right;}.svg .p_guidance .p_iconHolder{position:absolute;top:-9px;left:-6px;}.rtlCta .p_guidance .p_guidanceContainer .p_iconHolder{left:100%;}.svg .p_guidanceIcon.p_svg{display:block;}.p_guidanceIcon.p_svg{display:none;}.svg .p_guidanceIcon{fill:#f00;width:30px;height:30px;}.minimode .p_guidance{height:60px;}.p_guidance.p_ctaGuidance{bottom:0;background-color:rgba(0,0,0,0.7);}:not(.rtlCta).cta .p_guidance.p_ctaGuidance{left:80px;}.minimode .p_guidance.p_ctaGuidance{left:60px;}.rtlCta .p_guidance.p_ctaGuidance{right:0;margin-right:80px;}.p_guidance.p_continuous{height:30px;margin:8px;top:0px;width:70%;background-color:rgba(209,60,44,0.7);}.svg .p_guidance-alertIcon{fill:#F5B100;top:0;left:3px;position:absolute;}.svg .p_fullscreen-returnIcon{width:22px;height:22px;position:relative;top:50%;transform:translateY(-50%);-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);}@media (max-width:480px){.p_guidance{max-width:180px;min-width:180px;}.p_guidance.p_continuous{max-width:360px;min-width:240px;}}.p_guidanceContainer{color:#fff;font-size:0.75em;font-weight:bold;padding-left:10px;display:table-cell;vertical-align:middle;line-height:15px;padding:8px;}.p_guidanceFallback{display:inline-block;margin:auto;border-radius:50%;height:15px;width:15px;background-color:#f00;position:absolute;}.svg .p_guidanceFallback{display:none;}.p_guidanceFallbackText{position:relative;left:3px;}.guidanceClose{position:absolute;top:50%;right:1px;background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/cross.png);background-position:center center;background-repeat:no-repeat;background-color:rgba(209,60,44,1);width:30px;height:30px;margin-top:-15px;cursor:pointer;}.svg .guidanceClose{background-image:none;}.svg .guidanceClose .p_crossIcon{position:absolute;left:7px;top:10px;width:28px;height:28px;}.p_guidanceText{position:relative;margin-left:20px;}.rtlCta .rtlPadlock .p_guidanceText{margin-left:50px;}.p_subtitleButton{display:none;}.subtitles .p_subtitleButton{display:block;}.p_chromecastButton,.p_picInPicButton{display:none;}.chromecast .p_chromecastButton,.picInPic .p_picInPicButton{display:block;}.p_embedButton{display:none;}.embed .p_embedButton{display:block;}.p_playButton.p_iplayerPlay{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/play-iplayer.png);}.svg .p_playButton.p_iplayerPlay{background-image:none;}.p_controlBarFiller{position:absolute;width:90px;height:44px;text-align:center;left:90px;}.p_noVolume .p_controlBarFiller{left:45px;}.p_hiddenElement{left:-999em;top:0;position:absolute;}.p_button > .p_selected_background{display:none;position:absolute;height:4px;left:2px;width:40px;top:38px;background-color:#000;}.p_button.p_controlBarButton_on > .p_selected_background{display:block;}.p_chapterMarkersHolder{z-index:160;position:absolute;display:none;left:0;bottom:88px;width:100%;height:73px;line-height:0;}.p_hasMarkers .p_chapterMarkersHolder{display:block;}.p_playerControls.p_keyMomentOnly .p_chapterMarkersHolder{height:26px;}.fullscreen .p_playerControls.p_chapterOnly .p_chapterMarkersHolder{top:-88px;}.fullscreen .p_playerControls.p_keyMomentOnly .p_chapterMarkersHolder{top:-70px;}.p_playerControls.p_noControlBar .p_chapterMarkersHolder{bottom:44px;}.p_chapterMarker{position:absolute;bottom:0;height:34px;overflow:hidden;z-index:170;left:16px;background:#000;text-overflow:ellipsis;padding-right :0px;padding-left :0px;line-height:16px;font-size:0.75em;text-align:left;color:#fff;cursor:pointer;}.p_chapterMarker:focus{outline:none;}.p_chapterTip{display:none;position:absolute;bottom:44px;z-index:170;background-color:rgb(255,255,255);color:#191919;width:auto;margin-left:0;border-left-width:0;margin-right:0;border-right-width:0;max-width:144px;padding-right:8px;padding-left:8px;padding-top:12px;padding-bottom:12px;line-height:16px;font-size:0.75em;font-weight:bold;cursor:pointer;}.p_chapterMarkerText{line-height:34px;padding-left:5px;}.p_keyMoment{position:absolute;bottom:48px;height:17px;width:15px;z-index:165;background:#191919;cursor:pointer;}.p_keyMoment.p_highlighted{background-color:white;}.p_keyMoment.p_highlighted .p_keyMomentSquare{background-color:#191919;}.p_keyMoment:focus{outline:none;}.p_keyMomentOnly .p_keyMoment{bottom:0;}.p_keyMomentSquare{position:absolute;left:5px;bottom:6px;height:5px;width:5px;z-index:170;background:#fff;cursor:pointer;}.p_volumeControlsFiller{position:absolute;left:264px;height:44px;z-index:200;}.p_covered{opacity:0;}.p_iconHolder{-webkit-transition:opacity 0.4s ease-out;-moz-transition:opacity 0.4s ease-out;-o-transition:opacity 0.4s ease-out;transition:opacity 0.4s ease-out;}.focusEnabled .p_padlock:focus,.p_padlock:hover,.focusEnabled .p_padlock_unlocked:focus,.p_padlock_unlocked:hover{background-color:#ff4739;}.p_paragraph,.p_playerControlBarHolder{-webkit-text-size-adjust:none;}@-moz-document url-prefix(){.p_audioIcon,.p_muteIcon,.p_fullscreen-enterIcon{position:absolute;top:0;width:44px;height:44px;}.p_audioIcon{left:1px;}.p_muteIcon{left:1px;}.p_fullscreen-enterIcon{left:0;top:0;}.svg .p_cta .p_ctaIcon{left:9px;}.svg .p_padlock .p_padlock-lockedIcon{width:30px;height:30px;}.svg .p_padlock .p_padlock-unlockedIcon{width:30px;height:30px;}.p_play-iplayerIcon{width:44px;height:44px;top:2px;}.p_closed-captionsIcon{width:44px;height:44px;top:-1px;}.minimode.svg .p_cta .p_ctaIcon{left:9px;}.svg .p_embedButton .p_embedIcon{left:2px;top:2px;}}.p_warning.p_guidance.p_continuous .p_guidanceIcon,.p_ctaGuidance.p_guidance.p_warningCta .p_guidanceIcon{fill:#FFFFFF;color:black;}.p_warning.p_guidance.p_continuous{background-color:rgba(51,51,51,0.85);}.p_warning.p_guidance.p_continuous .guidanceClose{background-color:#404040;}.p_warning .p_guidanceFallback,.p_warningCta .p_guidanceFallback{background-color:#FFFFFF;color:black;}@media only screen and (orientation:portrait) and (height:628px) and (-webkit-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:2),only screen and (orientation:portrait) and (height:696px),only screen and (orientation:portrait) and (height:528px){.fullscreen.iPhoneIos10 .p_playerControls,.fullscreen.iPhoneIos11orGreater .p_playerControls{padding-bottom:65px;}}@media only screen and (orientation:portrait) and (min-height:640px) and (-webkit-device-pixel-ratio:3){.fullscreen.iPhoneIos11orGreater .p_playerControls{padding-bottom:95px;}}@media only screen and (orientation :landscape) and (device-width :375px) and (device-height :812px) and (-webkit-device-pixel-ratio :3){.fullscreen.iPhoneIos11orGreater .p_playerControls{bottom:20px;left:90px;right:90px;}.fullscreen.iPhoneIos11orGreater #p_pluginContainer{position:relative;top:constant(safe-area-inset-top) !important;top:env(safe-area-inset-top) !important;left:calc(constant(safe-area-inset-left) + 25px) !important;left:calc(env(safe-area-inset-left) + 25px) !important;height:calc(100% - constant(safe-area-inset-bottom) - constant(safe-area-inset-top)) !important ;height:calc(100% - env(safe-area-inset-bottom) - env(safe-area-inset-top)) !important ;width:calc(100% - constant(safe-area-inset-right) - constant(safe-area-inset-left) - 50px) !important;width:calc(100% - env(safe-area-inset-right) - env(safe-area-inset-left) - 50px) !important;}.fullscreen.iPhoneIos11orGreater.threeSixty #p_pluginContainer{pointer-events:none;}}#p_threeSixtyCanvas{position:absolute;top:0;left:0;width:100%;height:100%;-ms-touch-action:none;touch-action:none;}.threeSixty .p_accessibleHitArea{display:none;}.threeSixty.cta .p_accessibleHitArea{display:block;}#p_compassContainer{width:134px;height:134px;position:absolute;top:0;left:0;background:transparent;border:0;padding:0;margin:0;outline:none;}@media (max-width:500px){#p_compassContainer{display:none;}}#p_subtitleSettingsContainer{position:absolute;bottom:44px;width:224px;height:96px;display:none;z-index:200;color:#FFF;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}#p_subtitleSettingsContainer .p_subtitleSettingsMask{position:absolute;bottom:0;left:-22.5px;width:268px;height:96px;}#p_subtitleSettingsContainer .p_subtitleSettingsBox{position:absolute;width:224px;height:89px;bottom:7px;right:0;background-color:#191919;}#p_subtitleSettingsContainer .p_subsToggleLabel{position:absolute;font-size:14px;line-height:44px;margin-left:16px;}#p_subtitleSettingsContainer .p_subsToggle{position:absolute;right:0;}#p_subtitleSettingsContainer .p_subsToggle .p_toggleText{display:none;}#p_subtitleSettingsContainer .p_sizingButtonsContainer{position:absolute;width:100%;height:44px;bottom:0;}#p_subtitleSettingsContainer .p_subtitleSizeButton{display:block;float:left;width:44px;height:44px;background:none;margin-right:1px;color:#FFF;outline:0;}#p_subtitleSettingsContainer .p_subtitleSizeButton[disabled]{color:#a4a4a4;}#p_subtitleSettingsContainer .p_subtitleSizeButton div{width:100%;height:100%;box-sizing:border-box;text-align:center;}#p_subtitleSettingsContainer .p_subtitleSizeButton:last-child{margin-right:0;}#p_subtitleSettingsContainer #p_subtitleSizeButton_useSmallestFontSize div{font-size:9px;line-height:9px;padding-top:15px;}#p_subtitleSettingsContainer #p_subtitleSizeButton_useSmallFontSize div{font-size:11px;line-height:11px;padding-top:13px;}#p_subtitleSettingsContainer #p_subtitleSizeButton_useMediumFontSize div{font-size:14px;line-height:14px;padding-top:10px;}#p_subtitleSettingsContainer #p_subtitleSizeButton_useLargeFontSize div{font-size:17px;line-height:17px;padding-top:8px;}#p_subtitleSettingsContainer #p_subtitleSizeButton_useLargestFontSize div{font-size:20px;line-height:20px;padding-top:5px;}#p_subtitleSizeIndicator{position:absolute;bottom:8px;left:5px;width:34px;height:4px;background-color:#a4a4a4;-webkit-transition:left 200ms ease-out;transition:left 200ms ease-out;}.p_subsOn #p_subtitleSizeIndicator{background-color:#FFF;}#p_subtitleSettingsContainer .p_downArrow{position:absolute;bottom:0;right:15px;width:0;height:0;border-top:7px solid #191919;border-left:7px solid transparent;border-right:7px solid transparent;}@media (max-height:154px){#p_subtitleSettingsContainer{height:52px;}#p_subtitleSizeIndicator{display:none;visibility:hidden;}#p_subtitleSettingsContainer .p_sizingButtonsContainer{display:none;}#p_subtitleSettingsContainer .p_subtitleSettingsBox{height:45px;}}.p_toggle{position:relative;display:block;width:87px;height:44px;outline:0;}.p_toggleText{position:absolute;top:17px;right:58px;font-size:10px;line-height:10px;}.p_toggleSlot{position:absolute;box-sizing:border-box;top:10px;right:12px;width:40px;height:24px;padding:0;border:1px solid #A4A4A4;margin:0;background-color:#A4A4A4;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;cursor:pointer;}.p_toggleOn .p_toggleSlot{background-color:#000;border-color:#fff;}.p_toggleSlider{position:absolute;top:2px;left:2px;display:block;width:18px;height:18px;-webkit-border-radius:9px;-moz-border-radius:9px;border-radius:9px;background-color:#000;-webkit-transition:left 200ms linear;transition:left 200ms linear;}.p_toggleSlider .p_tick{position:absolute;top:3px;left:7px;height:8px;width:3px;border:solid #000;border-width:0px 2px 2px 0px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);opacity:0;}.p_toggleOn .p_toggleSlider{left:18px;background-color:#FFF;}.p_toggleOn .p_toggleSlider .p_tick{opacity:1;}@font-face{font-family:"ReithSans";src:url("https://gel.files.bbci.co.uk/r2.302/BBCReithSans_W_Rg.woff2") format("woff2"),url("https://gel.files.bbci.co.uk/r2.302/BBCReithSans_W_Rg.woff") format("woff");font-display:swap;}@font-face{font-family:"ReithSans";src:url("https://gel.files.bbci.co.uk/r2.302/BBCReithSans_W_Bd.woff2") format("woff2"),url("https://gel.files.bbci.co.uk/r2.302/BBCReithSans_W_Bd.woff") format("woff");font-weight:bold;font-display:swap;}@font-face{font-family:"ReithSerif";src:url("https://gel.files.bbci.co.uk/r2.302/BBCReithSerif_W_Rg.woff2") format("woff2"),url("https://gel.files.bbci.co.uk/r2.302/BBCReithSerif_W_Rg.woff") format("woff");font-display:swap;}.font-family-sans{font-family:Arial,Helvetica,freesans,sans-serif;line-height:normal;}.ReithSans-loaded .font-family-sans,.ReithSans-loaded .font-family-sans button{font-family:ReithSans,Arial,Helvetica,freesans,sans-serif;line-height:1.3;}.font-family-serif{font-family:"Times New Roman",serif;}.ReithSerif-loaded .font-family-serif{font-family:ReithSerif,"Times New Roman",serif;}.font-feature-salt{font-feature-settings:'salt';}.p_parentalGuidancePopup{position:fixed;width:390px;top:50%;margin-top:-175px;margin-left:-195px;left:50%;line-height:normal;vertical-align:middle;color:white;font-size:22px;z-index:2147483600;text-align:left;}.p_parentalGuidanceBackground{position:fixed;width:5000px;height:5000px;left:5000px;top:-500px;z-index:2147483600;background-color:#333333;filter:alpha(opacity=85);opacity:0.85;}#guidanceContainer{padding-right:26px;padding-left:26px;text-align:center;}#pgHeaderTitle{height:42px;position:relative;margin-top:35px;}#pgHeader{font-size:26px;}#guidanceBody{position:relative;width:100%;}#guidanceFooter{width:100%;height:42px;bottom:0px;display:table;text-align:center;}#pgExit{position:absolute;right:12px;top:12px;cursor:pointer;width:18px;height:18px;}.p_playbackSettingsButton{background:url(//emp.bbci.co.uk/emp/assets/2.0.23/playback_settings.png) no-repeat;display:none;}.playbackSettings .p_playbackSettingsButton{display:block;}.svg .p_playbackSettingsButton{background-image:none;}.p_dontCloseSettingsPanel svg{pointer-events:none;}#p_playbackSettingsContainer{display:none;position:absolute;bottom:44px;width:256px;z-index:200;color:#FFF;line-height:1.2;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}#p_playbackSettingsMask{position:absolute;height:88px;width:44px;right:-22px;bottom:24px;}#p_playbackSettingsBox{position:absolute;width:100%;bottom:7px;right:0;box-sizing:border-box;padding:12px 0 16px 12px;background-color:#191919;}#p_playbackSettingsHeading{font-size:16px;margin-bottom:12px;padding-top:8px;}.p_settingsRow{position:relative;min-height:44px;}.p_settingsTextBox{margin-right:55px;}#p_qualityRow .p_settingsTextBox{padding:0 0 0 2px;}.p_settingsTitle{font-size:14px;margin-bottom:4px;}.p_settingsSubtitle,#p_qualitySubtitleUnavailable{font-size:13px;color:#A4A4A4;}#p_autoplayRow{display:none;}#p_autoplayTitle{padding-top:14px;}#p_autoplayToggle{position:absolute;top:0;right:0;width:55px;}#p_autoplayToggle .p_toggleText{display:none;}#p_autoplayToggle .p_toggleSlot{right:11px;}#p_playbackSettingsContainer .p_downArrow{position:absolute;bottom:0;right:15px;width:0;height:0;border-top:7px solid #191919;border-left:7px solid transparent;border-right:7px solid transparent;}@media (max-height:295px){#p_qualityRow{display:none !important;}#p_playbackSettingsContainer.p_qualityPageOpen{display:none !important;}}.preferHls #p_qualityRow{display:none !important;}#p_qualityRow{display:none;margin-top:15px;outline:none;cursor:pointer;}#p_qualityRow.p_qualitySettingUnavailable{pointer-events:none;}.p_qualitySettingUnavailable #p_qualitySubtitle{display:none;}#p_qualitySubtitleUnavailable{display:none;}.p_qualitySettingUnavailable #p_qualitySubtitleUnavailable{display:block;}#p_qualityRow .p_settingsTitle{display:inline-block;}.p_qualitySettingUnavailable .p_chevronBorder{border-color:transparent transparent transparent #A4A4A4 !important;}.p_qualityPanelRow{height:48px;border-bottom:1px solid grey;margin-right:12px;line-height:48px;outline:none;cursor:pointer;}#p_qualityListWrap{display:none}#p_qualityPanelHighRow.p_qualityPanelRow{height:75px;border-bottom:0;}.p_qualityPanelRowHeading{font-size:14px;height:48px;padding:0 2px;}.p_qualityPanelRowSubtitle{font-size:13px;color:#A4A4A4;line-height:16px;margin-top:-12px;padding:0 2px;width:200px;}.p_qualityTick{position:relative;top:-32px;left:216px;height:12px;width:6px;border:solid white;border-width:0px 3px 3px 0px;-webkit-transform:rotate(40deg);-ms-transform:rotate(40deg);transform:rotate(40deg);opacity:0;background-color:#191919;}.p_qualitySettingOn .p_qualityTick{opacity:1;}#p_chevronPlaceholder{display:inline-block;float:right;position:absolute;left:218px;top:5px;background:transparent;border:0;outline:none;}.p_chevronBorder{width:0;height:0;border-style:solid;border-width:6px 0 6px 10px;border-color:transparent transparent transparent white;line-height:0px;}.p_chevronInside{position:relative;top:-8px;left:-20px;width:0;height:0;border-style:solid;border-width:8px 0 8px 16px;border-color:transparent transparent transparent #191919;line-height:0px;}.p_fullscreenButton,.nofullscreen .p_picInPicButton,.nofullscreen .p_chromecastButton,.nofullscreen .p_playbackSettingsButton,.nofullscreen .p_subtitleButton,.nofullscreen #p_subtitleSettingsContainer,.nofullscreen #p_playbackSettingsContainer,.nofullscreen .p_embedButton{right:0;}#p_subtitleSettingsContainer,#p_playbackSettingsContainer,.p_picInPicButton,.p_chromecastButton,.p_playbackSettingsButton,.p_subtitleButton,.p_embedButton,.nofullscreen.subtitles #p_playbackSettingsContainer,.nofullscreen.subtitles .p_picInPicButton,.nofullscreen.subtitles .p_chromecastButton,.nofullscreen.subtitles .p_playbackSettingsButton,.nofullscreen.subtitles .p_embedButton,.nofullscreen.subtitles .p_embedButton,.nofullscreen.playbackSettings .p_embedButton,.nofullscreen.picInPic .p_embedButton,.nofullscreen.chromecast .p_embedButton{right:45px;}.subtitles #p_playbackSettingsContainer,.subtitles .p_playbackSettingsButton,.subtitles .p_picInPicButton,.subtitles .p_chromecastButton,.playbackSettings .p_picInPicButton,.playbackSettings .p_chromecastButton,.subtitles .p_embedButton,.playbackSettings .p_embedButton,.picInPic .p_chromecastButton,.picInPic .p_embedButton,.chromecast .p_embedButton,.subtitles.picInPic .p_chromecastButton,.nofullscreen.subtitles.playbackSettings .p_embedButton,.nofullscreen.subtitles.picInPic .p_chromecastButton,.nofullscreen.subtitles.picInPic .p_embedButton,.nofullscreen.subtitles.chromecast .p_embedButton,.nofullscreen.picInPic.playbackSettings .p_embedButton,.nofullscreen.chromecast.playbackSettings .p_embedButton,.nofullscreen.subtitles.playbackSettings .p_picInPicButton,.nofullscreen.subtitles.playbackSettings .p_chromecastButton,.nofullscreen.subtitles.playbackSettings .p_embedButton{right:90px;}.subtitles.playbackSettings .p_picInPicButton,.subtitles.playbackSettings .p_chromecastButton,.subtitles.picInPic .p_chromecastButton,.subtitles.playbackSettings .p_embedButton,.subtitles.picInPic .p_embedButton,.subtitles.chromecast .p_embedButton,.picInPic.playbackSettings .p_chromecastButton,.picInPic.playbackSettings .p_embedButton,.chromecast.playbackSettings .p_embedButton,.picInPic.chromecast .p_embedButton,.nofullscreen.picInPic.subtitles.playbackSettings .p_chromecastButton,.nofullscreen.picInPic.subtitles.playbackSettings .p_embedButton,.nofullscreen.chromecast.subtitles.playbackSettings .p_embedButton{right:135px;}.picInPic.subtitles.chromecast .p_embedButton,.picInPic.subtitles.playbackSettings .p_chromecastButton,.picInPic.subtitles.playbackSettings .p_embedButton,.picInPic.chromecast.playbackSettings .p_embedButton,.chromecast.subtitles.playbackSettings .p_embedButton{right:180px;}.chromecast.picInPic.subtitles.playbackSettings .p_embedButton{right:225px;}@media (max-width:350px){#p_playbackSettingsContainer,.subtitles #p_playbackSettingsContainer,.nofullscreen #p_playbackSettingsContainer,.nofullscreen.subtitles #p_playbackSettingsContainer{right:5px;}#p_playbackSettingsContainer .p_downArrow,.nofullscreen.subtitles #p_playbackSettingsContainer .p_downArrow{right:55px;}.subtitles #p_playbackSettingsContainer .p_downArrow{right:100px;}.nofullscreen #p_playbackSettingsContainer .p_downArrow{right:10px;}#p_subtitleSettingsContainer,.nofullscreen #p_subtitleSettingsContainer{right:5px;}#p_subtitleSettingsContainer .p_downArrow{right:55px;}.nofullscreen #p_subtitleSettingsContainer .p_downArrow{right:5px;}}.p_audioui_playlistButton{width:48px;height:48px;fill:#FFFFFF;}.p_audioui_playlistButton .p_audioui_playlistChevron{-webkit-transform-origin:24px 24px;transform-origin:24px 24px;-webkit-transition:100ms -webkit-transform ease-out;transition:100ms -webkit-transform ease-out;transition:100ms transform ease-out;transition:100ms transform ease-out,100ms -webkit-transform ease-out;-webkit-transform:scale(1);transform:scale(1);}.p_audioui_playlistButton:not([disabled]).pressed .p_audioui_playlistChevron{-webkit-transform:scale(0.8);transform:scale(0.8);}#p_audioui_popOutPlayerButton{height:48px;fill:#FFFFFF;color:#FFFFFF;}#p_audioui_popOutPlayerButton svg{float:right;width:20px;height:20px;margin-right:6px;margin-top:15px;-webkit-transition:100ms -webkit-transform ease-out;transition:100ms -webkit-transform ease-out;transition:100ms transform ease-out;transition:100ms transform ease-out,100ms -webkit-transform ease-out;-webkit-transform:scale(1);transform:scale(1);}#p_audioui_popOutPlayerButton .p_audioui_popOutPlayerButton_text{float:right;height:48px;line-height:48px;font-size:13px;font-weight:bold;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}#p_audioui_popOutPlayerButton:not([disabled]).pressed svg{-webkit-transform:scale(0.8);transform:scale(0.8);}.p_playerSeekBarHolder{display:block;opacity:1;height:44px;width:100%;line-height:0;touch-action:none;transition:opacity 1000ms linear;}.classicUI .p_playerSeekBarHolder{z-index:160;position:absolute;left:0;top:-44px;}.classicUI .p_playerSeekBarHolder.hidden{display:none;}.audioUI .p_playerSeekBarHolder.hidden{pointer-events:none;}.audioUI .p_playerSeekBarHolder.hidden .p_progressBar{opacity:0;}.audioUI .p_playerSeekBarHolder.hidden .p_seekThumb{opacity:0;}.p_bar{position:absolute;top:18px;height:6px;left:16px;cursor:pointer;}.audioUI .p_bar{height:4px;top:20px;transition:transform 1000ms linear;}.audioUI .p_playerSeekBarHolder.hidden .p_bar{transform:scale(1,0.5);transform-origin:center;}.fullscreen .p_bar{left:0;}.seekingBarNotFullyAvailable .p_bar{cursor:default;}.p_seekBar{right:16px;background-color:#767676;}.audioUI .p_seekBar{background-color:rgba(255,255,255,0.3);}.fullscreen .p_seekBar{right:0;}.p_seekBarPositionLine{display:none;position:absolute;top:0;width:1px;height:6px;background-color:#fff;z-index:1;pointer-events:none;}.audioUI .p_seekBarPositionLine{height:4px;}.p_progressBar{right:100%;transform-origin:left;-webkit-transform-origin:left;-moz-transform-origin:left;}.audioUI .p_progressBar{transition:opacity 1000ms linear;}.audioUI .p_progressBar.p_progressBarAvailable{background-color:#FFF;opacity:0.5;}.p_progressBarAnimate{animation-name:progressBar;-webkit-animation-name:progressBar;-moz-animation-name:progressBar;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;animation-fill-mode:forwards;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;}@-webkit-keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}@-moz-keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}@keyframes progressBar{to{-webkit-transform:scale(1,1);-moz-transform:scale(1,1);transform:scale(1,1);}}.p_progressBarAvailable{opacity:0.4;}.p_bar.p_progressBar.p_progressBarAvailable{display:none;}.seekingBarNotFullyAvailable .p_bar.p_progressBar.p_progressBarAvailable,.seekingBarNotFullyAvailable .p_progressBar{cursor:pointer;display:block;}.p_seekThumb{position:absolute;top:14px;width:9px;height:14px;z-index:170;background:#fff;cursor:pointer;}.audioUI .p_seekThumb{top:16px;width:12px;height:12px;border-radius:50%;transition:opacity 1000ms linear;}.p_seekThumbAnimate{-webkit-animation-name:seekThumb;-moz-animation-name:seekThumb;animation-name:seekThumb;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;animation-fill-mode:forwards;}@-webkit-keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}@-moz-keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}@keyframes seekThumb{to{-webkit-transform:translate(0,0);-moz-transform:translate(0,0);transform:translate(0,0);}}.p_seekThumb > .p_seekThumbLine{background-color:#191919;}.p_seekThumbLine{position:absolute;top:4px;pointer-events:none;left:4px;width:1px;height:6px;z-index:170;}.audioUI .p_seekThumbLine{display:none;}.p_seekThumbHalo{position:absolute;top:-6px;left:-6px;width:24px;height:24px;border-radius:50%;opacity:0.4;-webkit-transform:scale(0,0) translateZ(0);-ms-transform:scale(0,0) translateZ(0);transform:scale(0,0) translateZ(0);-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear;}.p_seekThumbHalo.p_showing{-webkit-transform:scale(1,1) translateZ(0);-ms-transform:scale(1,1) translateZ(0);transform:scale(1,1) translateZ(0);}.classicUI .p_seekThumbHalo{display:none;}.p_timeTip{opacity:0;position:absolute;bottom:88px;font-size:0.75em;background-color:#fff;font-weight:bold;color:#191919;z-index:170;padding-top:1px;padding-bottom:0px;padding-left:8px;padding-right:8px;margin-top:0px;margin-bottom:0px;pointer-events:none;text-align:center;}.p_noControlBar .p_timeTip{bottom:44px;}.audioUI .p_timeTip{-webkit-transition:opacity .2s linear;transition:opacity .2s linear;bottom:139px;}@media only screen and (orientation:portrait) and (height:628px) and (-webkit-device-pixel-ratio:2) and (-webkit-min-device-pixel-ratio:2),only screen and (orientation:portrait) and (height:696px),only screen and (orientation:portrait) and (height:528px){.fullscreen.iPhoneIos10 .p_timeTip,.fullscreen.iPhoneIos11orGreater .p_timeTip{bottom:153px;}}@media only screen and (orientation:portrait) and (min-height:640px) and (-webkit-device-pixel-ratio:3){.fullscreen.iPhoneIos11orGreater .p_timeTip{bottom:183px;}}.p_timeTipText{line-height:22px;}.p_timeTipTriangle{position:absolute;bottom:-6px;left:15px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;font-size:0;line-height:0;}.p_thumbnail{visibility:hidden;border:1px solid white;position:absolute;bottom:88px;z-index:165;background:rgba(51,51,51,0.8);opacity:0;transition:opacity 0s linear 0.4s;}.p_noControlBar .p_thumbnail{bottom:44px;}@media (max-width:399px){.p_bar{left:10px;}.p_seekBar{right:10px;}}.p_volumeControls{position:absolute;display:block;opacity:1;overflow:hidden;left:45px;height:44px;z-index:200;-webkit-transition:width 0.25s ease-out,opacity 1000ms linear;-moz-transition:width 0.25s ease-out,opacity 1000ms linear;-o-transition:width 0.25s ease-out,opacity 1000ms linear;transition:width 0.25s ease-out,opacity 1000ms linear;}.classicUI .p_volumeControls.hidden,.classicUI .p_volumeControls.removed{display:none}.audioUI .p_volumeControls.hidden,.audioUI .p_volumeControls.removed{opacity:0;pointer-events:none;}.audioUI .p_volumeControls{height:48px;}.p_noVolume .p_volumeControls{display:none;}.p_volumeControls.p_closed{width:44px;}.audioUI .p_volumeControls.p_closed{width:48px;}.p_volumeControls.p_open{width:222px;}.p_volumeButton.audio{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/audio.png);}.p_volumeButton.mute{background-image:url(//emp.bbci.co.uk/emp/assets/2.0.23/mute.png);}.svg .p_volumeButton{background-image:none;}.audioUI .p_volumeButton{width:48px;height:48px;}.p_sliderContainer{position:absolute;width:176px;height:44px;left:44px;touch-action:none;cursor:pointer;}.audioUI .p_sliderContainer{height:48px;left:48px;}.p_sliderControls{position:absolute;width:132px;height:44px;touch-action:none;}.audioUI .p_sliderControls{height:48px;}.p_volumeBarHolder{position:absolute;background-color:transparent;bottom:0px;height:44px;width:9px;}.audioUI .p_volumeBarHolder{height:48px;}.p_volumeBar{position:absolute;bottom:8px;height:28px;width:3px;}.audioUI .p_volumeBar{bottom:10px;}.p_volumeLevel{position:absolute;width:22px;left:111px;top:24px;font-size:0.75em;text-align:center;vertical-align:middle;color:#fff;}.audioUI .p_volumeLevel{top:17px;left:105px;}.p_afterVolume{background-color:#A4A4A4;}.audioUI .p_afterVolume{background-color:rgba(255,255,255,0.5);}.p_selectedVolume{height:32px;background-color:#fff;}.audioUI .p_volumeButton svg{transition:fill 0.25s ease-out;}@media (max-width:799px){.audioUI .p_volumeControls{display:none;}}
</style>
<script type="text/javascript">
var DEBUG_FULL;
/* Font Face Observer v2.0.13 -  Bram Stein. License: BSD-3-Clause */(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());

(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

/*
 Copyright 2011 Abdulla Abdurakhmanov
 Original sources are available at https://code.google.com/p/x2js/

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */


function emptyFunction(){}function stopIt(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation()}function appendChildren(e,t){for(var i=0;t.length>i;i++)e.appendChild(t[i])}function createElement(e,t,i,n){var a=document.createElement(e);a.className=t;if(i){a.innerHTML=i;n&&(a.firstChild.textContent=n)}return a}function updateExistingSvg(e,t,i){for(var n=e.getElementsByClassName("p_"+t+"Icon")[0],a=e.getElementsByClassName("p_iconHolder"),r=0;a.length>r;r++)a[r].style.display=a[r].firstChild==n?"block":"none";if(!n){var o=44;"fullscreen-return"==t&&(o=32);e.appendChild(Utils.generateSVG(o,o,t,"p_"+t+"Icon",i))}}function X2JS(e,t,i){function n(e){var t=e.localName;null==t&&(t=e.baseName);(null==t||""==t)&&(t=e.nodeName);return t}function a(e){return e.prefix}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}function o(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function s(r){if(r.nodeType==C.DOCUMENT_NODE){var l,u,c,d=r.firstChild;for(u=0,c=r.childNodes.length;c>u;u+=1)if(r.childNodes[u].nodeType!==C.COMMENT_NODE){d=r.childNodes[u];break}if(i)l=s(d);else{l={};var p=n(d);l[p]=s(d)}return l}if(r.nodeType==C.ELEMENT_NODE){var l=new Object;l.__cnt=0;for(var f=[],m=r.childNodes,g=0;m.length>g;g++){var d=m.item(g),p=n(d);l.__cnt++;if(null==l[p]){var h=s(d);if("#text"!=p||/[^\s]/.test(h)){var y={};y[p]=h;f.push(y)}l[p]=h;l[p+"_asArray"]=new Array(1);l[p+"_asArray"][0]=l[p]}else{if(null!=l[p]&&!(l[p]instanceof Array)){var v=l[p];l[p]=new Array;l[p][0]=v;l[p+"_asArray"]=l[p]}for(var E=0;null!=l[p][E];)E++;var h=s(d);if("#text"!=p||/[^\s]/.test(h)){var y={};y[p]=h;f.push(y)}l[p][E]=h}}l.__children=f;for(var P=0;r.attributes.length>P;P++){var T=r.attributes.item(P);l.__cnt++;for(var S=T.value,_=0,I=e.length;I>_;_++){var k=e[_];k.test.call(this,T)&&(S=k.converter.call(this,T.value))}l[t+T.name]=S}var w=a(r);if(null!=w&&""!=w){l.__cnt++;l.__prefix=w}1==l.__cnt&&null!=l["#text"]&&(l=l["#text"]);if(null!=l["#text"]){l.__text=l["#text"];b&&(l.__text=o(l.__text));delete l["#text"];delete l["#text_asArray"]}if(null!=l["#cdata-section"]){l.__cdata=l["#cdata-section"];delete l["#cdata-section"];delete l["#cdata-section_asArray"]}(null!=l.__text||null!=l.__cdata)&&(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")});return l}return r.nodeType==C.TEXT_NODE||r.nodeType==C.CDATA_SECTION_NODE?r.nodeValue:r.nodeType==C.COMMENT_NODE?null:void 0}function l(e,t,i,n){var a="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=i)for(var r=0;i.length>r;r++){var o=i[r],s=e[o];a+=" "+o.substr(1)+"='"+s+"'"}a+=n?"/>":">";return a}function u(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){return c(t.toString(),"_asArray")||0==t.toString().indexOf("_")||e[t]instanceof Function?!0:!1}function p(e){var t=0;if(e instanceof Object)for(var i in e)d(e,i)||t++;return t}function f(e){var t=[];if(e instanceof Object)for(var i in e)-1==i.toString().indexOf("__")&&0==i.toString().indexOf("_")&&t.push(i);return t}function m(e){var t="";null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>");null!=e.__text&&(t+=b?r(e.__text):e.__text);return t}function g(e){var t="";e instanceof Object?t+=m(e):null!=e&&(t+=b?r(e):e);return t}function h(e,t,i){var n="";if(0==e.length)n+=l(e,t,i,!0);else for(var a=0;e.length>a;a++){n+=l(e[a],t,f(e[a]),!1);n+=y(e[a]);n+=u(e[a],t)}return n}function y(e){var t="",i=p(e);if(i>0)for(var n in e)if(!d(e,n)){var a=e[n],r=f(a);if(null==a||void 0==a)t+=l(a,n,r,!0);else if(a instanceof Object)if(a instanceof Array)t+=h(a,n,r);else{var o=p(a);if(o>0||null!=a.__text||null!=a.__cdata){t+=l(a,n,r,!1);t+=y(a);t+=u(a,n)}else t+=l(a,n,r,!0)}else{t+=l(a,n,r,!1);t+=g(a);t+=u(a,n)}}t+=g(e);return t}(null===t||void 0===t)&&(t="_");(null===i||void 0===i)&&(i=!1);var v="1.0.11",b=!1,C={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var t,i,n;if(window.DOMParser){i=new window.DOMParser;try{n=i.parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(a){}try{t=i.parseFromString(e,"text/xml");n&&t.getElementsByTagNameNS(n,"parsererror").length&&(t=void 0)}catch(a){}}else{0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2));t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}return t};this.xml2json=function(e){return s(e)};this.xml_str2json=function(e){var t=this.parseXmlString(e);return t?this.xml2json(t):void 0};this.json2xml_str=function(e){return y(e)};this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)};this.getVersion=function(){return v};this.escapeMode=function(e){b=e}}function PluginManager_init(e){PluginManager.player=e;PluginManager.playerInterface=new PlayerInterface(e,new DataStore);PluginManager.loadingCount=0;PluginManager.failedArray=[]}function PluginManager_resizeFix(){var e=PluginManager.playerInterface.container;e.style.width="0px";e.style.height="0px"}function PluginManager_resizeFixEnd(){var e=PluginManager.playerInterface.container;e.style.width=window.innerWidth+"px";e.style.height=window.innerHeight+"px"}function PluginManager_resizeFixComplete(){PluginManager.playerInterface.dispatchToPlugins({type:"resize",target:PluginManager.player})}function PluginManager_isPluginLoading(){return PluginManager.playerInterface?PluginManager.waitingOnPluginLoad:!1}function checkEndOfPluginLoads(){PluginManager.loadingCount--;if(0>=PluginManager.loadingCount&&PluginManager.waitingOnPluginLoad){PluginManager.waitingOnPluginLoad=!1;PluginManager.playlistLoadedEvent&&PluginManager.player.loadPluginCompleted(PluginManager.playlistLoadedEvent)}}function getPluginErrorFunction(e,t,i,n){return function(){var a=SMPError.getError(t);a.nonPlayer=!0;a.msg=i;a.extra=n;e.dispatch(a)}}function PluginManager_loadPlugin(e,t,i){PluginManager.playerInterface.datastore.set(t);if(!PluginManager.urls[e]){PluginManager.waitingOnPluginLoad=i;PluginManager.loadingCount++;PluginManager.urls[e]=!0;var n,a=PluginManager.pluginArray,r=PluginManager.player,o=new PluginUtilities(PluginManager.playerInterface,e,PluginManager),s=setTimeout(function(){PluginManager.failedArray.push(e);checkEndOfPluginLoads();s=setTimeout(getPluginErrorFunction(r,SMPError.PLUGIN_LOAD_TIMEOUT,"",e),REPORT_PLUGIN_LOAD_TIMEOUT)},PLUGIN_LOAD_TIMEOUT);require([e],function(){clearTimeout(s);var i=e;try{o.register=function(e){i=e.name};n=runPlugin(o,t)}catch(l){console.error("%cError in a plugin initialise","color:red;background-color:#ccc")}if(n){var u={name:i,plugin:n,utils:o};a.push(u);o.register=function(e){u.name=e.name};try{n.pluginInitialisation(o)}catch(l){console.error("%cError in a plugin initialise","color:red;background-color:#ccc");r.dispatch({type:"pluginInitialisationFailed",properties:{url:e}});getPluginErrorFunction(r,SMPError.PLUGIN_INITIALISE_FAIL,l.message,e)();-1===PluginManager.failedArray.indexOf(e)&&checkEndOfPluginLoads();return}r.dispatch({type:"pluginLoaded",url:e,name:i});r.trackAction("plugin_manager","plugin_loaded",{plugin_url:e,is_background:!0})}else{r.dispatch({type:"pluginLoadFailed",properties:{url:e}});getPluginErrorFunction(r,SMPError.PLUGIN_LOAD_FAIL,"",e)()}-1===PluginManager.failedArray.indexOf(e)&&checkEndOfPluginLoads()})}}function PluginManager_getPluginList(){return PluginManager.pluginArray}function Sonic(e){this.canvas=e}window.delayedFunctions=[];var XD=function(){function e(e){if("null"==e)return"*";for(var t=0;validDomains.length>t;t++){var i=new RegExp("^(http[s]{0,1})://([^\\?\\&#:/]+\\."+validDomains[t]+")(:([0-9]+))?","gi");if(e.match(i)){var n=e.split(i);return n[1]+"://"+n[2]+(n[4]?":"+n[4]:"")}}for(t=0;validWholeDomains.length>t;t++){if(e=="https://"+validWholeDomains[t])return"https://"+validWholeDomains[t];if(e=="http://"+validWholeDomains[t])return"http://"+validWholeDomains[t]}return/^file:\/\/$/i.test(e)?e:""}var t=function(){var e=this;e._receiveKey="";e._url="";e._listeners={};e.receive(function(t){var i=t._data.type,n=t._data.data;if(i&&"object"==typeof e._listeners[i])for(var a=e._listeners[i],r=0;a.length>r;r++){var o=a[r];"function"==typeof o&&o.call(e,n)}})};t.prototype={_receiveKey:"",_url:"",_listeners:{},post:function(e){var t=this;try{var i=JSON.stringify(e)}catch(n){i={type:e.type}}"function"==typeof window.parent.postMessage&&window.parent.postMessage(i,t._url);return t},receive:function(t){var i=this,n=function(n){if(0!==(n.data+"").indexOf("ima://")){if("SMP.asyncDelay"!=n.data){try{n._data=JSON.parse(n.data)}catch(a){n._data={}}var r=n._data;if(r&&!i._url&&"object"==typeof r.initXD){i._url=e(n.origin);if(!i._url.length)return!1;i._receiveKey=r.initXD.receiveKey;return!0}if(n.origin!==i._url&&"*"!=i._url)return!1;if(!r.receiveKey||r.receiveKey!==i._receiveKey)return!1;t(n);return void 0}if(window.delayedFunctions.length>0){var o=window.delayedFunctions.shift();o&&o.fn.apply(o.that,o.args)}}};"undefined"!=typeof window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n);return i},on:function(e,t){var i=this;"undefined"==typeof i._listeners[e]&&(i._listeners[e]=[]);i._listeners[e].push(t);return i},fire:function(e,t){this.post({receiveKey:this._receiveKey,data:t,type:e})},detach:function(e){var t=this;if("undefined"!=typeof t._listeners[e]){t._listeners[e]=null;delete t._listeners[e]}return t}};return t}(),CRITICAL="critical",ERROR="error",WARNING="warning",UNKNOWN="unknown",SMPError=function(){var e={unknown:{description:"An unknown error has occurred.",secondaryText:"Please try again later.",detail:"An unknown error occurred",severity:ERROR,responsibility:UNKNOWN,recoverable:!1}},t="Application",i="External",n="Media",a=function(t,i){var n;this.code=t;t=""+t;n=e[t]||e.unknown;var a=!!n.recoverable;this.handled=!0;this.type=ERROR;this.description=n.description||"";this.severity=n.severity;this.responsibility=n.responsibility;this.recoverable=a;this.secondaryText=n.hasOwnProperty("secondaryText")?n.secondaryText:a?"":Language.tryAgainLater;this.detail=n.detail||n.description;this.msg="";this.info=i;return this};a.NON_BBC_PLAYLIST=1001;a.ERROR_LOADING_PLAYLIST=1002;a.NO_ITEMS_IN_PLAYLIST=1003;a.PROGRAMME_NOT_AVAILABLE_YET=1004;a.CONTENT_NOT_AVAILABLE_EXPIRED=1005;a.CONTENT_NOT_AVAILABLE_REGION=1006;a.MEDIATION_ERROR=1026;a.CANNOT_MAINTAIN_LOCK=1039;a.CONTENT_NOT_AV=1051;a.CONTENT_NOT_AVAILABLE=1052;a.CONTENT_NOT_AVAILABLE_GEO=1056;a.CONTENT_NOT_AVAILABLE_OTHER=1057;a.CONTENT_NOT_AVAILABLE_UNKNOWN=1058;a.CONTENT_NOT_AVAILABLE_REVOKED=1059;a.ERROR_PARSING_PLAYLIST=1060;a.CONTENT_NOT_AVAILABLE_PRE_START=1061;a.ALL_CONNECTIONS_FILTERED=1062;a.ALL_ITEMS_FILTERED=1064;a.NO_ITEMS=1065;a.NO_ITEMS_FILTERED=1066;a.MEDIASELECTOR_TIMEOUT=1068;a.MEDIATION_ERROR_UNKNOWN=1069;a.ERROR_PARSING_CONFIG=1071;a.PREFERRED_PROTOCOL_NOT_AVAILABLE=1072;a.UNHANDLED_INTERNAL_ERROR=2100;a.PLAYING_FAILED_NO_INTENT=2200;a.PLAYING_STARTED_AFTER_NO_INTENT=2201;a.NETWORK_UNAVAILABLE=3025;a.MPD_LOAD_FAIL=4200;a.MPD_NO_STREAMS=4201;a.INIT_FRAGMENT_LOAD_FAIL=4202;a.STREAM_FRAGMENT_LOAD_FAIL=4203;a.PLAYING_DASH_WHEN_NOT_SUPPORTED=4204;a.DASH_MEDIASOURCE_ERROR=4205;a.INIT_FRAGMENT_DOWNLOAD_INFORMATION=4223;a.MPD_GENERIC=4224;a.FRAGMENT_DOWNLOAD_INFORMATION=4225;a.FRAGMENT_END_DOWNLOAD_INFORMATION=4229;a.MPD_PARSE_ERROR=4226;a.NO_SUPPORTED_CODECS=4227;a.NO_SUPPORTED_CODECS_FAILOVER=4228;a.DASH_EXCEPTION=4233;a.DASH_FRAGMENT_DISCARDED=4234;a.DOWNLOAD_WAS_SLOW=4237;a.DOWNLOADS_OFTEN_SLOW=4238;a.LOAD_FAILED_BUFFERING=4240;a.STREAM_FRAGMENT_CONTENT_LENGTH_MISMATCH=4241;a.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER=4999;a.NO_ALTERNATIVE_MEDIA=5e3;a.FORMAT_NOT_SUITABLE=5001;a.FORMAT_NOT_DECODED=5003;a.MEDIA_ERR_ABORTED=5005;a.MEDIA_ERR_NETWORK=5007;a.MEDIA_ERR_WEIRD=5009;a.DRM_KEY=5100;a.DRM_ERROR_TIMEOUT=5101;a.DEVICE_NOT_SUPPORTED=6003;a.INIT_TIMEOUT=6004;a.DASH_INIT_TIMEOUT=6006;a.ERROR_NO_MEDIA_SRC=6011;a.PLUGIN_LOAD_FAIL=6100;a.PLUGIN_INITIALISE_FAIL=6101;a.PLUGIN_LOAD_TIMEOUT=6102;a.THREE_SIXTY_FAILED=6250;a.EMBED_NOT_ALLOWED=6500;a.SUBS_FAILED=7500;a.THUMBNAIL_FAILOVER=7501;a.FONT_FAILED=7502;a.LANGUAGE_FAILED=7750;a.FLASH_NOT_CREATED=8e3;a.FLASH_NOT_INITIALISED=8001;a.FLASH_NOT_INSTALLED=8005;a.FLASH_CRITICAL_ERROR=8010;a.CANT_PLAY_IN_ANDROID_BROWSER=8020;a.getError=function(e){return new a(e)};a.prototype.toSimple=function(){var e={};e.code=this.code;e.type=this.type;e.description=this.description;e.severity=this.severity;e.responsibility=this.responsibility;e.recoverable=this.recoverable;e.secondaryText=this.secondaryText;e.detail=this.detail;e.info=this.info;return e};a.init=function(){e={1001:{code:1001,description:Language.defaultErrorMessage,detail:"Player attempted to load a non BBC playlist",severity:CRITICAL,responsibility:t},1002:{code:1002,description:Language.defaultErrorMessage,detail:"There was an error loading the playlist",severity:CRITICAL,responsibility:t},1003:{code:1003,description:Language.defaultErrorMessage,detail:"This content is not currently available on this device",severity:CRITICAL,responsibility:n},1004:{code:1004,description:Language.programmePreAvailability,detail:"This programme is not available to play yet",severity:CRITICAL,responsibility:n},1005:{code:1005,description:Language.contentPostAvailability,detail:"This content is no longer available",severity:CRITICAL,responsibility:n},1006:{code:1006,description:Language.programmeRegionRestriction,detail:"This content is no longer available",severity:CRITICAL,responsibility:n},1026:{code:1026,description:Language.defaultErrorMessage,detail:"The media selector request failed",severity:CRITICAL,responsibility:"MediaSelector"},1039:{code:1039,description:Language.httpsOnlyFailure,detail:"HTTPS only playback failed",severity:CRITICAL,responsibility:n,recoverable:!0,secondaryText:""},1051:{code:1051,description:Language.defaultErrorMessage,detail:"This content is not Audio or Video",severity:CRITICAL,responsibility:n},1052:{code:1052,description:Language.contentNotAvailableOnDevice,detail:"This content is not currently available on this device",severity:CRITICAL,responsibility:n},1056:{code:1056,description:Language.programmeRegionRestriction,secondaryText:"",detail:"Content not available mediaselector GEO",severity:CRITICAL,responsibility:n},1057:{code:1057,description:Language.contentNotAvailableOnDevice,detail:"Content not available OTHER",severity:CRITICAL,responsibility:n},1058:{code:1058,description:Language.contentNotAvailableOnDevice,detail:"Content not available UNKNOWN",severity:CRITICAL,responsibility:n},1059:{code:1059,description:Language.itemRevoked,detail:"Content not available revoked",severity:CRITICAL,responsibility:n},1060:{code:1060,description:Language.defaultErrorMessage,detail:"There was an error parsing the playlist",severity:CRITICAL,responsibility:n},1061:{code:1061,description:Language.programmePreAvailability,detail:"This live stream has not started yet.",severity:CRITICAL,responsibility:n,visible:!0},1062:{code:1062,description:Language.defaultErrorMessage,detail:"There were connections (from MediaSelector or hrefs), but all were filtered out",severity:CRITICAL,responsibility:n},1064:{code:1064,description:Language.defaultErrorMessage,detail:"There was an error parsing the playlist",severity:CRITICAL,responsibility:n},1065:{code:1065,description:Language.defaultErrorMessage,detail:"The playlist contained no items",severity:CRITICAL,responsibility:n},1066:{code:1066,description:Language.defaultErrorMessage,detail:"The playlist contained no items after filtering",severity:CRITICAL,responsibility:n},1068:{code:1068,description:Language.defaultErrorMessage,detail:"Mediaselector timed out",severity:CRITICAL,responsibility:n,recoverable:!0},1069:{code:1069,description:Language.defaultErrorMessage,detail:"Mediaselector errored",severity:CRITICAL,responsibility:n,recoverable:!0},2100:{code:2100,description:WARNING,detail:"SMPj experienced an internal error that it did not know how to handle",severity:WARNING,responsibility:t},2200:{code:2200,description:WARNING,detail:"Playing failed, no intent",severity:WARNING,responsibility:t},2201:{code:2201,description:WARNING,detail:"Playing started, after no intent",severity:WARNING,responsibility:t},3025:{code:3025,description:Language.networkNotAvailable,detail:"Appear to be offline",severity:CRITICAL,responsibility:n,recoverable:!0},4200:{code:4200,description:Language.defaultErrorMessage,detail:"The requested stream manifest could not be loaded",severity:ERROR,responsibility:n},4201:{code:4201,description:Language.defaultErrorMessage,detail:"The manifest file contains no valid streams",severity:ERROR,responsibility:n},4202:{code:4202,description:Language.defaultErrorMessage,detail:"Failed to load headers for stream",severity:ERROR,responsibility:n},4203:{code:4203,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment",severity:ERROR,responsibility:n},4204:{code:4204,description:Language.defaultErrorMessage,detail:"Attempting to play DASH connection with no MSE support",severity:ERROR,responsibility:t},4205:{code:4205,description:Language.defaultErrorMessage,detail:"DASH Reported media source error",severity:WARNING,responsibility:t},4223:{code:4223,description:Language.defaultErrorMessage,detail:"Failed to load init fragment",severity:ERROR,responsibility:n},4224:{code:4224,description:"Unknown manifest error",detail:"A generic manifest error occurred",severity:ERROR,responsibility:n},4225:{code:4225,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment",severity:ERROR,responsibility:n},4229:{code:4229,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment",severity:WARNING,responsibility:n},4226:{code:4226,description:Language.defaultErrorMessage,detail:"The manifest file could not be parsed",severity:ERROR,responsibility:n},4227:{code:4227,description:Language.codecErrorMessage,detail:"Client does not support any available codecs",severity:CRITICAL,secondaryText:""},4228:{code:4228,description:Language.defaultErrorMessage,detail:"Client does not support any available codecs failover to flash",severity:ERROR},4233:{code:4233,description:"An unspecified dash.js error occurred",severity:WARNING,responsibility:t,recoverable:!0},4234:{code:4234,description:"Dash.js thought there was content in the buffer, but there was not",severity:"info",responsibility:t,recoverable:!0},4237:{code:4237,description:"Slow download",detail:"A DASH fragment took longer to download than it would to play out",severity:WARNING,responsibility:t,recoverable:!0},4238:{code:4238,description:Language.insufficientBandwidth,detail:"DASH fragments consistently took longer to download than it would to play out",severity:CRITICAL,responsibility:t,recoverable:!0},4240:{code:4240,description:Language.defaultErrorMessage,detail:"A DASH failure happened, and now we've played out the rest of the buffer.",severity:CRITICAL,responsibility:t,recoverable:!0},4241:{code:4241,description:Language.defaultErrorMessage,detail:"Failed to load stream fragment because the content-length header didn't match the content",severity:ERROR,responsibility:n},5000:{code:5e3,description:Language.defaultErrorMessage,detail:"No alternative media format available",severity:CRITICAL,responsibility:n},4999:{code:4999,description:Language.defaultErrorMessage,detail:"No alternative media format available after failover, probably offline",severity:CRITICAL,responsibility:n,recoverable:!0},5003:{code:5003,detail:"The format of the media resource could not be decoded (video)",severity:ERROR,responsibility:n},5004:{code:5004,detail:"The format of the media resource could not be decoded (audio)",severity:ERROR,responsibility:n},5005:{code:5005,detail:"HTML5 MEDIA_ERR_ABORTED - (video)",severity:ERROR,responsibility:n},5006:{code:5006,detail:"HTML5 MEDIA_ERR_ABORTED - (audio)",severity:ERROR,responsibility:n},5007:{code:5007,detail:"HTML5 MEDIA_ERR_NETWORK - (video)",severity:ERROR,responsibility:n},5008:{code:5008,detail:"HTML5 MEDIA_ERR_NETWORK - (audio)",severity:ERROR,responsibility:n},5009:{code:5009,detail:"The video tag fired an error event, but there was no error available on the element",severity:WARNING,responsibility:n},5010:{code:5010,detail:"The audio tag fired an error event, but there was no error available on the element",severity:WARNING,responsibility:n},5100:{code:5100,detail:"The video could not be decoded with the provided key (if any).",severity:WARNING,responsibility:i},5101:{code:5101,description:Language.defaultErrorMessage,detail:"A DRM error fired, and the timeout elapsed without it being corrected",severity:CRITICAL,responsibility:i},6003:{code:6003,description:Language.errorUnsupported,detail:"Browser does not have MSE support",severity:CRITICAL,responsibility:t,secondaryText:""},6004:{code:6004,description:Language.defaultErrorMessage,detail:"The player could not be initialised in time",severity:CRITICAL,responsibility:t},6006:{code:6006,description:Language.defaultErrorMessage,detail:"Dash.js could not be initialised in time",severity:CRITICAL,responsibility:t,recoverable:!0},6011:{code:6011,description:Language.defaultErrorMessage,detail:"No source has been found for this video",severity:ERROR,responsibility:n},6100:{code:6100,description:"Plugin load failed",severity:ERROR,responsibility:t},6102:{code:6102,description:"Plugin load timed out",severity:ERROR,responsibility:t},6101:{code:6101,description:"Plugin initialise failed",severity:ERROR,responsibility:t},6250:{code:6250,description:"Plugin load timed out",severity:ERROR,responsibility:t},6500:{code:6500,description:"This content is not available on this site. Visit the BBC site to enjoy this content.",severity:CRITICAL,responsibility:i,recoverable:!0},7500:{code:7500,detail:"There was an error loading Subtitles",severity:WARNING,responsibility:n},7501:{code:7501,detail:"Failing over thumbnail manifest",severity:WARNING,responsibility:n},7502:{code:7502,detail:"Webfont failed to load",severity:WARNING,responsibility:i},7750:{code:7750,detail:"Language failed to load",severity:WARNING,responsibility:i},8000:{code:8e3,description:Language.errorFlashIsNeeded,detail:"Flash creation failed.",severity:CRITICAL,responsibility:i},8001:{code:8001,description:Language.errorFlashIsNeeded,detail:"Flash initialisation failed.",severity:CRITICAL,responsibility:i},8005:{code:8005,description:Language.errorFlashIsNeeded,detail:"Flash not installed",severity:CRITICAL,responsibility:i},8010:{code:8010,description:Language.defaultErrorMessage,detail:"Flash Error.",severity:CRITICAL,responsibility:UNKNOWN},8020:{code:8020,description:Language.errorCantPlayInBrowser,detail:"Can't play in android/kindle browser",severity:CRITICAL,responsibility:i},unknown:{description:Language.defaultErrorMessage,detail:"An unknown error occurred",severity:ERROR,responsibility:UNKNOWN},unknownCritical:{description:Language.defaultErrorMessage,detail:"An unknown error occurred",severity:CRITICAL,responsibility:UNKNOWN}}};return a}();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var HIDDEN_PLAYER="-9999px",HIDDEN_PLAYER_MINIMODE="-9998px",HIDDEN_PLAYER_SWF="-9997px",DUPLICATE_EVENT_TIMEOUT=500,KEY_ESCAPE=27,KEY_SPACE=32,KEY_LEFT_ARROW=37,KEY_UP_ARROW=38,KEY_RIGHT_ARROW=39,KEY_DOWN_ARROW=40,KEY_HOME=36,KEY_END=35,KEY_F=70,KEY_M=77,KEY_ENTER=13,KEY_0=48,KEY_8=56,KEY_9=57,KEY_J=74,KEY_K=75,KEY_L=76,STATS_TRACK_DELAY=2e3,Utils=function(){function e(e,t){return function(i){clearTimeout(lt[e]);window[e]=emptyFunction;t(i)}}function t(){for(var e=ut.length-1;e>=0;e--)if(!ut[e]){ut[e]=!0;return e}ut.push(!0);return ut.length-1}function i(e){var t=parseInt(e.target.getAttribute("json_id"),10);ut[t]=!1}function n(n,a){var r=arguments,o=t(),s="JS_callbacks"+o;window[s]=e(s,a);var l=function(){window[s]=emptyFunction;var e=vt.indexOf(r);vt.splice(e,1);a({result:"timeout"})};lt[s]=setTimeout(l,ct);if(navigator.onLine===!1&&dt){window.removeEventListener("online",N);vt.push(r);window.addEventListener("online",N)}else{n=n.replace("{callback}",s);var u=document.createElement("script");u.type="text/javascript";u.src=n;u.setAttribute("json_id",o);u.onload=i;var c=function(e){i(e);a({result:"scripterror"})};u.onerror=c;document.getElementsByTagName("head")[0].appendChild(u)}}function a(e,t,i,n,a){r(e,t,i,n,a,!0)}function r(e,t,i,n,a,r){var o=SMPError.getError(t);o.nonPlayer=n;o.extra=i;if(a){o.morphed=!0;o.severity="error"}r?e.delayedDispatch(o):e.dispatch(o)}function o(e,t,i){var n,a,r={};if(e)for(n in t)if(t.hasOwnProperty(n)){a=t[n];n in e&&(e[n]===a||n in r&&r[n]===a)||(e[n]="object"==typeof e[n]&&null!==e[n]?o(e[n],a,i):i(a))}return e}function s(){var e=l(arguments[0]);if(e)for(var t=1;arguments.length>t;t++)arguments[t]&&(e=o(e,arguments[t],l));return e}function l(e){if(!e||"object"!=typeof e)return e;var t,i,n;if(e instanceof Array){t=[];for(i=0,n=e.length;n>i;++i)i in e&&t.push(l(e[i]))}else t={};return o(t,e,l)}function u(e,t){return e&&(e.className+"").indexOf(t)>-1}function c(e,t,i){if(e){var n=e.className;if(""!==n){n=n.replace(f(i||"",t),"").trim()+" "+t;e.className=n.trim().replace(/\s+/g," ")}else e.className=t}}function d(e,t,i){i?Ct.className(e,t):Ct.className(e,"",t)}function p(e,t,i,n){var a=u(e,t);a&&n?c(e,"",t):!a&&i&&c(e,t,"")}function f(e,t){var i=e+" "+t;i=i.trim().replace(/\s+/g,"\\b|\\b");return new RegExp("\\b"+i+"\\b","g")}function m(e,t,i,n){if(isNaN(e)||0>e||e>36e4)return i?"--:--":"";if(!e)return"00:00";var a=Math.floor(e/60),r=Math.floor(a/60);a=Math.floor(a%60);var o=Math.floor(e%60),s=n&&10>r?"0"+r:r;10>a&&(a="0"+a);10>o&&(o="0"+o);var l=[a,o];(r>0||t)&&l.unshift(s);t&&l.pop();return l.join(":")}function g(e,t,i,n,a){if(14e6>e)return i?m(e,!1,!0):"";var r=new Date(1e3*e+(t?36e5:0)),o=60*r.getUTCHours()*60+60*r.getUTCMinutes()+r.getUTCSeconds();return m(o,n,i,a)}function h(e,t,i){var n=null;if(!e)return null;e.posterRecipe&&(n=e.posterRecipe);n||(n=e.posterImg);return n&&pt.test(n)?"url("+y(n,t,i)+")":null}function y(e,t,i,n){var a;a=n?n:Ct.getOffset(t,"width");(0===a||isNaN(a))&&(a=768);i&&i.densityMultiplier&&(a*=i.densityMultiplier);for(var r=ft.length-1;r>0&&!(a/ft[r]>.98);r--);var o=ft[r]+"x"+mt[r],s=1024>=ft[r]?ft[r]:1536;return e.replace(/[\${]recipe}?/,o).replace(/[\${]width}?/,s)}function v(e,t){var i=e.type;if(t.mediaItem){"playing"==i&&(e=t.mediaItem.annotateEvent(e));if("loadedmetadata"==i){var n=t.mediaConnection;if(n){e.transferFormat=n.format;e.cdn=n.supplier;e.height=t.mediaPlayer.videoHeight;e.width=t.mediaPlayer.videoWidth}}if("timeupdate"==i||"seeked"==i||"seeking"==i){var a=t.timeHelper;e.duration=a.duration;if(t.isLive){e.currentTime=a.time;e.streamStart=a.streamStart;e.latestSeek=a.latestSeek;e.earliestSeek=a.earliestSeek;e.streamEnd=a.streamEnd;e.joinTime=a.joinTime;e.livePoint=e.latestSeek}else e.currentTime=a.time}}if(Ct.eventFieldData[i])for(var r=Ct.eventFieldData[i],o=r.length,s=0;o>s;s++){var l=r[s];e[l]=t.mediaPlayer[l]}"volumechange"==i&&(e.volume=e.muted?0:e.volume);return e}function b(e,t){var i=t.items;if(!i||0===i.length||t.onlyAdverts){var n=SMPError.NO_ITEMS_IN_PLAYLIST;gt[t.noItemsReason]&&(n=gt[t.noItemsReason]);Ct.callErrorFunction(e,n);return!0}return!1}function C(e,t){var i=SMPError.CONTENT_NOT_AVAILABLE_UNKNOWN;if(t.result){var n=t.result.reason;if(gt[n]){i=gt[n];n=null}}var r=!1;if(e.supportFallback){Ct.asyncDelay(e.fallbackAsAppropriate,[],e);r=!0}else if(e.supportFallbackLocked){a(e,SMPError.CANNOT_MAINTAIN_LOCK);return!1}Ct.callErrorFunction(e,i,n,!1,r);return!1}function E(e,t){if(t in e.style)return!0;t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()});for(var i=["Webkit","Moz"],n=0;i.length>n;n++)if(i[n]+t in e.style)return!0;return!1}function P(e,t,i){for(var n=0;e.length>n;n++){var a=e[n];if(a&&a.style){a.style[t]=i;null===i&&a.style.removeProperty&&a.style.removeProperty(t);t=t.replace(/^[a-z]/,function(e){return e.toUpperCase()});a.style["webkit"+t]=i;a.style["moz"+t]=i;a.style["ms"+t]=i;a.style["o"+t]=i}}}function T(e,t){for(var i=e.cssRules.length-1;i>=0;i--)for(var n=e.cssRules[i].cssText,a=0;t.length>a;a++)if(-1!=n.indexOf(t[a])){e.deleteRule(i);break}}function S(e){e=(e+"").replace(/\D/gim," ");var t=e.split(/\s+/gim);return Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5])}function _(e){for(var t=0;window.validDomains.length>t;t++){var i=new RegExp("^(http[s]{0,1})://([^\\?\\&#:/]+\\."+window.validDomains[t]+")(:([0-9]+))?","gi");if(e.match(i))return!0}return!1}function I(e,t){if(e&&e.length>0)for(var i=0;e.length>i;i++)if(e[i]._id==t)return e[i];return null}function k(e,t,i){var n=[],a=[];if(e){if(t&&t.length>0)for(var r=0;e.length>r;r++)e[r]&&-1==t.indexOf(e[r].type)&&n.push(e[r]);else n=e;for(r=0;n.length>r;r++)n[r]&&-1!=ht[i].indexOf(n[r].type)&&a.push(n[r])}return a}function w(e,t,i){var n=!1,a=function(){n=!1};return function(r){if(!n){if(t)e(r);else{if(r.button&&0!==r.button)return;var o=H(r);e(o,r)}n=!0;setTimeout(a,DUPLICATE_EVENT_TIMEOUT)}i||r.stopImmediatePropagation()}}function A(e,t,i,n,a){var r=document.createElement("div");r.className="p_iconHolder";i&&(r.innerHTML=['<svg focusable="false" viewbox="0 0 ',e," ",t,'" class="p_svg ',a||""," ",n||"",'"><use xlink:href="#',i,'"></use></svg>'].join(""));return r}function L(e,t,i,n){var a=n?/^((([a-zA-Z]+\:)?\/\/)|\/|[\.]{1,2}\/)/:/^([a-zA-Z]+\:)?\/\//;if(i.loading)return!1;if(e&&!e.match(a)&&0!==e.indexOf("data:")){Ct.asyncDelay(t,[e]);return!1}return!0}function N(){window.removeEventListener("online",N);for(;vt.length;)n.apply(null,vt.shift());for(;yt.length;)x.apply(null,yt.shift())}function O(){window.removeEventListener("online",N);yt=[];vt=[]}function x(e,t,i,n,a,r){if(L(e,i,n,a))if(navigator.onLine===!1&&dt){window.removeEventListener("online",N);yt.push(arguments);window.addEventListener("online",N)}else{var o=new XMLHttpRequest,s=!1;try{o.open("GET",e,!0);r&&(o.withCredentials=!0)}catch(l){if(!XDomainRequest)return;o=new XDomainRequest;s=!0;o.open("GET",e)}o.onload=function(){var a;if(s)try{a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;a.loadXML(o.responseText)}catch(r){n.loading=!1;i(e,!0)}else{a=o.responseXML;if(!a&&window.DOMParser){var l=new DOMParser;a=l.parseFromString(o.responseText,"text/xml")}}n.loading=!1;t(a)};o.onerror=function(){n.loading=!1;i(e)};n.loading=!0;o.send(null)}}function D(e,t,i,n,a){if(L(e,i,n,a)){var r=new XMLHttpRequest;r.open("GET",e,!0);r.responseType="text";r.onload=function(){n.loading=!1;t(r.response)};r.onerror=function(){n.loading=!1;i(e)};n.loading=!0;r.send(null)}}function M(e,t){var i=e.getBoundingClientRect();t=t||"left";var n=i[t];return U(e)?100*n:n}function R(e){var t=e.getBoundingClientRect();if(U(e)){t.left=100*t.left;t.top=100*t.top;t.height=100*t.height;t.width=100*t.width}return t}function B(e,t,i,n){for(var a="object"==typeof t?t:t.split(/\s+/g),r=0;a.length>r;r++)e.addEventListener(a[r],i,n)}function U(e){return e.clientWidth>e.offsetWidth}function F(e){return"click"==e.type&&0===e.clientX&&0===e.clientY}function H(e){return 0===e.clientX&&0===e.clientY?"key_press":"click"}function q(e,t){for(var i in t)t.hasOwnProperty(i)&&Object.defineProperty(e,i,t[i])}function W(e,t,i){window.delayedFunctions.push({fn:e,args:t,that:i});window.postMessage&&window.postMessage("SMP.asyncDelay","*")}function G(e){return e.connections.length>=1&&e.connections[0].mimetype?"audio"===e.connections[0].mimetype.split("/")[0]:"audio"===e.type}function V(e,t){var i=e.map(function(e,t){return{item:e,position:t}});i.sort(function(e,i){var n=t(e.item,i.item);0===n&&(n=e.position-i.position);return n});for(var n=[],a=0;i.length>a;a++)n[a]=i[a].item;return n}function z(e,t,i){return t>e?t:e>i?i:e}function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*new Date%16|0,i="x"==e?t:3&t|8;
return i.toString(16)}).toUpperCase()}function Y(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointerdown",t,i);else{e.addEventListener("touchstart",function(i){t(i);e.focus();i.preventDefault()},i);e.addEventListener("mousedown",t,i)}}function K(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointerup",t,i);else{e.addEventListener("touchend",t,i);e.addEventListener("mouseup",t,i)}}function Q(e,t,i){i=!!i;if(window.PointerEvent)e.addEventListener("pointermove",t,i);else{e.addEventListener("touchmove",t,i);e.addEventListener("mousemove",t,i)}}function X(e,t,i){i=!!i;window.PointerEvent?e.addEventListener("pointermove",function(e){"mouse"==e.pointerType&&t(e)},i):e.addEventListener("mousemove",t,i)}function J(e,t,i){i=!!i;window.PointerEvent?e.addEventListener("pointerleave",function(e){"mouse"==e.pointerType&&t(e)},i):e.addEventListener("mouseleave",t,i)}function Z(e,t){Ct.downAction(e,t);e.addEventListener("keyup",function(e){var i=e.keyCode;(32==i||13==i)&&t(e)})}function $(e){e=encodeURIComponent(e);var t=new RegExp(e+"=([^;\\s]*)","i"),i=t.exec(document.cookie);return i?decodeURIComponent(i[1]):null}function et(e,t,i){var n=new Date;n.setTime(n.getTime()+15552e6*(i?-1:1));if(!i){n.setDate(15);n.setHours(12);n.setMinutes(0);n.setSeconds(0)}var a=n.toUTCString(),r=location.hostname;-1!==r.indexOf(".bbc.co.uk")&&(r=".bbc.co.uk");-1!==r.indexOf(".bbc.com")&&(r=".bbc.com");try{document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; expires="+a+"; domain="+r+"; path=/"}catch(o){}}function tt(e,t){var i=new FontFaceObserver(t);i.load().then(function(){Ct.className(document.documentElement,t+"-loaded")},function(){Ct.callErrorFunction(e,SMPError.FONT_FAILED,""+t,!1,!0)})}function it(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function nt(e){function t(){}t.prototype=e;return new t}function at(e){return e?"block":"none"}function rt(e,t){for(var i=e+"";t>i.length;)i="0"+i;return i}function ot(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var n in t)t.hasOwnProperty(n)&&i.setAttributeNS(null,n,t[n]);return i}var st={loadstart:["currentSrc","preload","networkState"],loadedmetadata:["duration","readyState"],canplay:["readyState"],canplaythrough:["readyState"],play:["paused"],pause:["paused","ended"],playing:["paused","readyState"],seeking:["seeking"],seeked:["seeking"],timeupdate:["readyState"],ended:["ended"],durationchange:["duration"],volumechange:["volume","muted"],error:["error","networkState"],waiting:["readyState"]},lt={},ut=[],ct=45e3,dt=0!==(location.href+"").indexOf("file:"),pt=new RegExp("^//|^http[s]{0,1}://","i"),ft=[320,384,432,480,512,608,640,688,720,768,800,832,976,1024,1376,1920],mt=[180,216,243,270,288,342,360,387,405,432,450,468,549,576,774,1080],gt={postAvailability:SMPError.CONTENT_NOT_AVAILABLE_EXPIRED,postLiveAvailability:SMPError.CONTENT_NOT_AVAILABLE_EXPIRED,preAvailability:SMPError.PROGRAMME_NOT_AVAILABLE_YET,regionRestriction:SMPError.CONTENT_NOT_AVAILABLE_REGION,selectionunavailable:SMPError.CONTENT_NOT_AVAILABLE,geolocation:SMPError.CONTENT_NOT_AVAILABLE_GEO,other:SMPError.CONTENT_NOT_AVAILABLE_OTHER,itemRevoked:SMPError.CONTENT_NOT_AVAILABLE_REVOKED,EmptyPlaylistObject:SMPError.NO_ITEMS,EmptyPlaylistObjectFiltered:SMPError.NO_ITEMS_FILTERED,noMedia:SMPError.CONTENT_NOT_AVAILABLE,timeout:SMPError.MEDIASELECTOR_TIMEOUT,error:SMPError.MEDIATION_ERROR,scripterror:SMPError.MEDIATION_ERROR_UNKNOWN,nocvidmediator:SMPError.CONTENT_NOT_AVAILABLE},ht={chapter:["chapter","programme"],key:["highlight","key"]},yt=[],vt=[];window.delayedFunctions=[];var bt=function(){return Date.now()};window.performance&&window.performance.now&&(bt=function(){return window.performance.now()});var Ct={getActionFn:w,eventFieldData:st,getJSON:n,getXML:x,getText:D,clearPendingReqs:O,merge:s,clone:l,isObjectEmpty:it,now:bt,className:c,setOrUnsetClass:d,setOrUnsetClassOnlyAfterCheck:p,hasClass:u,secondsToTime:m,epochToTime:g,callErrorFunction:r,delayedErrorFunction:a,parseISODate:S,asyncDelay:W,holdingImage:h,annotateEvent:v,deleteCssRules:T,checkCssSupport:E,applyVendorStyles:P,checkForItemsErrors:b,checkNotAvailableReason:C,isValidUrl:_,getMarkerByType:k,getItemById:I,generateSVG:A,getOffset:M,getOffsets:R,multiAddEventListener:B,isKeyboardClick:F,getActionType:H,defineProperties:q,isItemAudio:G,stableSort:V,clamp:z,sortByStart:function(e,t){return e.start-t.start},sortSimple:function(e,t){return e-t},UUID:j,doChef:y,downAction:Y,upAction:K,moveAction:Q,hoverLeaveAction:J,hoverMoveAction:X,buttonAction:Z,getCookie:$,setCookie:et,loadFontFile:tt,object:nt,noneOrBlock:at,padZeros:rt,createSVGElement:ot};return Ct}(),TimeHelper=function(){function e(e){return Utils.clamp(e,0,1)}function t(e,t,i){if(i){var n=i.ignoreJoinTime?e.time:e.joinTime;if(i.accurateStartTime){e.accurateStartTime=i.accurateStartTime;e.earliestSeek=Math.max(Math.min(n,i.accurateStartTime),e.streamStart)}else i.scheduledStartTime?e.earliestSeek=Math.max(Math.min(n,i.scheduledStartTime),e.streamStart):t.simulcast||(e.earliestSeek=Math.max(e.joinTime,e.streamStart));if(i.accurateEndTime){e.accurateEndTime=i.accurateEndTime;e.streamEnd=i.accurateEndTime}else if(i.scheduledEndTime){e.scheduledEndTime=i.scheduledEndTime;e.streamEnd=Math.max(i.scheduledEndTime,e.latestSeek)}e.inbandEndTime&&(e.streamEnd=Math.min(e.streamEnd,e.inbandEndTime))}else t.simulcast||(e.earliestSeek=Math.max(e.joinTime,e.streamStart))}var i=-37,n=1e6,a=function(e){var t=this;t.player=e;t.reset();return t};a.prototype={reset:function(){var e=this;e.joinTime=0/0;e.streamStart=0;e.latestSeek=0;e.latestAllowableSeekTime=0;e.earliestSeek=0;e.streamEnd=0;e.time=e.player.config.startTime;e.percent=0;e.drawSeekBar=!1;e.duration=0/0;e.rewindWindowLength=0;e.dashTimeDelta=0;e.restartedWebcast=!1;e.startTimeAvailable=!1;e.accurateStartTime=!1;e.accurateEndTime=!1;e.scheduledEndTime=!1;e.availableTime={};e.presentationTimeOffset=0;e.inbandEndTime=null;e.forcedTime=null;e.playbackTimeouts=[]},setAvailableTime:function(e){var t=this;t.availableTime=e||{};t.update(t.player.time,t.player.duration)},partialReset:function(){var e=this,t=e.player.mediaItem;e.percent=0;t&&(t.live?e.duration=0/0:e.time=e.player.config.startTime)},timeToString:function(e,t){var i=this,n=i.player.mediaItem,a=e;isNaN(a)&&(a=i.time);return!n||isNaN(a)?t?"--:--":"":n.live?Utils.epochToTime(a,i.player.config&&i.player.config.isBSTime,t,!0,!0):Utils.secondsToTime(a,!1,t)},getDurationOrEndString:function(){var e=this,t=e.player.mediaItem;if(t){if(!t.live&&e.duration&&!e.player.config.ondemandWebcastData)return Utils.secondsToTime(e.duration);if((t.live||e.player.config.ondemandWebcastData)&&(e.accurateEndTime||e.scheduledEndTime&&e.scheduledEndTime>e.latestSeek))return e.timeToString(e.streamEnd)}return""},getTimeString:function(e){var t=this,i=t.player.mediaItem;return n>t.time&&i&&i.live?"":t.timeToString(e)},getTimeInfoToDisplay:function(e){var t=this,i={};i.duration=t.getDurationOrEndString();i.currentTime=t.getTimeString(e);return i},percentToTimeString:function(e,t){var i=this,n=i.percentToTime(e);return i.timeToString(n,t)},unixTimeToStreamTime:function(e){var t=this,a=t.player,r=t.player.mediaItem;if(r&&r.live&&!r.useFlash)if(a.isPlayingDash)"audio"==r.type&&e>n&&(e-=i);else{if(!t.startTimeAvailable)return e;if(e>n){e-=r.startTime;"audio"==r.type&&(e-=i)}}return e},streamTimeToUnixTime:function(e){var t=this,a=t.player,r=t.player.mediaItem;if(r&&r.live&&!r.useFlash){if(!a.isPlayingDash){if(!t.startTimeAvailable)return e;n>e&&(e+=r.startTime)}"audio"==r.type&&e>n&&(e+=i)}return e},timeToPercent:function(t){var i,n=this,a=n.player.mediaItem;if(!a||isNaN(Number(t))||isNaN(n.duration))return 1/0;i=a.live||n.player.config.ondemandWebcastData?(t-n.earliestSeek)/n.duration:t/n.duration;return e(i)},percentToTime:function(t){var i=this,n=i.player.mediaItem;if(!n)return 0;var a=i.duration*e(t);(n.live||i.player.config.ondemandWebcastData)&&(a+=i.earliestSeek);return a},update:function(i,a){var r=this,o=r.player,s=o.mediaItem,l=o.webcastData,u=s&&s.live;r.forcedTime&&(i=r.forcedTime);var c=0===o.mediaPlayer.currentTime&&u&&!o.isPlayingDash,d=u&&!o.isPlayingDash&&Device.windowsPhone;if(c||d)r.time=0;else{isNaN(i)||(r.time=i);if(s&&(u||r.player.config.ondemandWebcastData))if(o.isPlayingDash){if(o.dashEvents.dashPlayer){r.earliestSeek=r.streamStart=r.streamTimeToUnixTime(o.dashEvents.dashPlayer.currentStart)+r.presentationTimeOffset+(s.simulcast?60:0);r.streamEnd=r.latestSeek=Math.max(r.streamTimeToUnixTime(o.dashEvents.dashPlayer.currentEnd||0)+r.presentationTimeOffset-8,isNaN(i)?0:i);isNaN(r.joinTime)&&!isNaN(r.latestSeek)&&i&&(r.joinTime=i);r.inbandEndTime&&(r.latestSeek=r.streamEnd=r.inbandEndTime);t(r,s,l);r.checkSnappedAndUpdate(i)}}else if(s.useFlash){var p=o.swf.currentTimeInfo;if(p){r.setStartTimeAvailable(!0);r.earliestSeek=r.streamStart=p.streamStart;r.streamEnd=p.streamEnd;r.latestSeek=p.latestSeek;r.joinTime=p.joinTime;t(r,s,l);r.checkSnappedAndUpdate(i)}}else{var f=o.seekable;if(r.startTimeAvailable&&1/0!=f.end){r.earliestSeek=r.streamStart=r.streamTimeToUnixTime(f.start+60);r.streamEnd=r.latestSeek=r.streamTimeToUnixTime(f.end);isNaN(r.joinTime)&&i>n&&(r.joinTime=i);t(r,s,l);r.checkSnappedAndUpdate(i)}1/0==r.duration&&(r.duration=0)}else{a=r.checkDurationAgainstSeekableEnd(a,o.seekable);r.duration=a;r.streamEnd=r.latestSeek=a;r.percent=e(r.time/r.duration)}var m=r.availableTime.end;m&&m>r.streamStart&&(r.latestSeek=Math.min(Math.max(m,r.time),r.streamEnd));r.latestAllowableSeekTime=Math.min(r.latestSeek,r.streamEnd);var g=r.canSeek();if(r.drawSeekBar!=g){r.drawSeekBar=g;s&&u&&r.player.delayedDispatch({type:"canPauseChange",canPause:g});r.player.ui.checkIfCanDisplaySeekBar()}for(var h=0;r.playbackTimeouts.length>h;){var y=r.playbackTimeouts[h];if(r.time>=y.time&&(y.seekover||y.time+.33>i)){var v=y.callback;r.playbackTimeouts.splice(h,1);v()}else h++}}},checkDurationAgainstSeekableEnd:function(e,t){return t&&e&&Math.abs(e-t.end)<=.1?t.end:e},checkSnappedAndUpdate:function(t){var i=this,n=i.latestSeek-t,a=20;if(a>n){i.streamEnd==i.latestSeek&&(i.streamEnd=t);i.latestSeek=t}i.rewindWindowLength=i.latestSeek-i.streamStart;i.duration=i.streamEnd-i.earliestSeek;i.percent=e((t-i.earliestSeek)/i.duration)},getLatestAllowableSeekPercent:function(){var e=this,t=e.latestAllowableSeekTime;return e.timeToPercent(t)},checkIfTimeIsAvailable:function(e,t){var i=this,n=i.earliestSeek-(t?2:0);return Utils.clamp(e,n,i.latestAllowableSeekTime)},hasRewindWindow:function(){var e=this,t=e.player.mediaItem;return t&&t.live&&e.rewindWindowLength>60},canSeek:function(){var e=this,t=e.player,i=e.player.mediaItem;return i&&!i.live||i&&i.live&&!Device.inaccurateRewindWindow&&(e.latestSeek-e.earliestSeek>90||e.streamEnd-e.earliestSeek>90)&&t.playlist.liveRewind&&t.ui.config.controls.enableLiveRewind&&(!Device.consideredForMobileLiveRewind||t.config.supportLiveRewindOnMobile)},setStartTimeAvailable:function(e){var t=this;if(t.startTimeAvailable!=e){t.startTimeAvailable=e;var i=t.player;if(i.needHlsStartTime&&e||i.isUsingGetStartDate&&e){i.timeHelper.update(i.time,i.duration);i.needHlsStartTime=!1;if(i.waitingForStartTime&&t.canSeek()){i.time=i.waitingForStartTime;i.waitingForStartTime=0}}}},setPresentationTimeOffset:function(e){var t=this;t.presentationTimeOffset=e||0},setInbandEndTime:function(e){var t=this;t.inbandEndTime=e+t.presentationTimeOffset},setPlaybackTimeout:function(e,t,i){var n=this,a={callback:e,time:t,seekover:!!i},r=-1;if("function"==typeof a.callback&&!isNaN(a.time)){r=n.playbackTimeouts.length>0?n.playbackTimeouts[n.playbackTimeouts.length-1].id+1:1;a.id=r;n.playbackTimeouts.push(a)}return r},clearPlaybackTimeout:function(e){var t=this;t.playbackTimeouts=t.playbackTimeouts.filter(function(t){return t.id!=e})},secondsToHMS:function(e){var t=0>e?"-":"";e=Math.abs(e);var i=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60),a=Math.round(e%60);t+=i?i+":"+Utils.padZeros(n,2)+":"+Utils.padZeros(a,2):Utils.padZeros(n,2)+":"+Utils.padZeros(a,2);return t}};return a}(),Quality=function(){var e=function(e){var t=this;e&&(t.name=e.toLowerCase());return t};e.prototype={getVideoRatio:function(){var e,t=this;switch(t.name){case"hd":case"high":e=1;break;case"medium":e=.65;break;case"low":e=.2;break;default:e=.65}return e},getAudioRatio:function(){return 1}};return e}(),Device=function(){var e={requiresFakeEndedEvent:!1,requiresFakePlayEvent:!1,requiresRestartAdjustmentAtEnd:!1,supportsVideoDash:!1,supportsAudioDash:!1,needToLoadSVG:!0,supportsHls:!1,useFakeFullscreen:!1,windowsPhone:!1,android:!1,ios:!1,ipad:!1,iphone:!1,blackBerry:!1,init:function(t,i){var n=window.MediaSource?!0:!1;t=t.toLowerCase();e.windowsPhone=/windows phone/.test(t);e.android=/android/.test(t)&&!e.windowsPhone;e.ios=/(ipod|ipad|iphone)/.test(t)&&!e.windowsPhone;e.iphone=/iphone|ipod/.test(t)&&!e.windowsPhone;e.ipad=/ipad/.test(t);e.playbook=/playbook/.test(t);e.blackBerry=/blackberry/.test(t)||e.playbook||/bb10/.test(t);e.macSafari=/safari/.test(t)&&/mac/.test(t)&&!/chrome/.test(t)&&!e.windowsPhone;e.firefox=/firefox/.test(t);e.kindle=/silk/.test(t);e.trident=/trident/.test(t);e.edge=/ edge\//.test(t);e.snowLeopard=e.macSafari&&/os x 10_6/.test(t);e.windowsWebview=e.edge&&/webview/.test(t);e.windows10Arm=/windows nt 10\.[0-9]; arm/.test(t);var a=/windows nt 5\./.test(t);e.windowsXpFirefox=e.firefox&&a;e.windowsXpChrome=window.chrome&&a;e.preWindows10IE11=e.trident&&/ nt 6./.test(t);e.opera=/opr/.test(t);e.samsung=/samsungbrowser/.test(t);if(e.firefox)var r=t.match(/firefox\/([0-9]+)/),o=r?parseInt(r[1],10):0;if(e.ios){r=t.match(/os ([0-9]+)\_([0-9]+)/);var s=r?parseInt(r[1],10):0,l=r?parseInt(r[2],10):0}if(e.macSafari){r=t.match(/os x ([0-9]+)\_([0-9]+)/);if(r&&r.length>=3)var u=parseInt(r[1],10),c=parseInt(r[2],10)}e.safariPreSierra=e.macSafari&&(10>u||10===u&&12>c);e.hideCursorInFullscreen=!e.ios||s>=7;var d,p=0,f=!1;if(e.android){r=t.match(/android (\d+(?:[\.\d]*)+)/i);d=r?10*parseFloat(r[1]):99;d&&42>d&&(f=!0);var m=t.match(/chrome\/([0-9]+)/);if(m){p=parseInt(m[1],10);35>p&&(e.useFakeFullscreen=!0)}}e.useStartDateInHls=s>=10;e.iPhoneIos10=e.iphone&&10==s;e.iPhoneIos11orGreater=e.iphone&&s>=11;e.iPhoneOutOfPagePlayback=e.iphone&&10>s;e.inaccurateRewindWindow=e.ios&&7>s;e.allowFakeFullscreenScroll=e.ios&&11===s&&3>l||11>s;e.cannotDetectAutoplayFailure=e.ios&&8>s;e.iPhoneNeedFullScreenMarginButton=e.iphone&&320===screen.width&&568===screen.height;e.loadStartUnreliableAudio=e.ios&&s>=6;e.requiresRestartAdjustmentAtEnd=e.iPad;e.requiresFakePlayEvent=f||e.kindle||e.blackBerry;e.requiresFakeEndedEvent=e.macSafari||f;e.requiresFakePlayingEventAfterSeekedWhenDash=e.trident;e.supportsAutoplay=!(e.ios||e.windowsPhone||e.android||e.blackBerry);e.fallbackAfterDashDecodeError=e.supportsAutoplay&&/palemoon/.test(t);e.possiblyPreferPlainOverDash=!e.supportsAutoplay&&!(o>63&&d>=8||p>55&&d>=6);e.notWorthTryingAutoplay=!e.supportsAutoplay||e.macSafari;e.supportsMultipleMediaElements=e.supportsAutoplay;e.consideredForMobileLiveRewind=!e.supportsAutoplay;e.supportsVideoDash=n&&!e.safariPreSierra&&!e.windowsXpFirefox&&!e.preWindows10IE11&&!e.windowsXpChrome;e.supportsAudioDash=n;e.supportsHls=i||e.edge||e.windows10Arm||e.macSafari;e.preferHls=e.ios||e.blackBerry&&!e.playbook||e.windowsWebview;e.requiresDashAVC3CodecHack=e.trident||e.windowsWebview;e.noSupportForLocationHeader=e.trident;e.requiresFullscreenResizeDelay=!e.supportsAutoplay||!(e.Edge||window.chrome||e.macSafari||e.firefox);e.requiresShortFullscreenResizeDelay=e.trident;e.supportPlayerFallback=!e.ios;e.preferVideoFallbackOverHLS=e.kindle||e.android||!e.supportsHls&&!e.macSafari;e.flashLockMatters=!(e.kindle||e.android);e.requiresManualDashPlay=e.firefox;e.requiresPageFullScreenStyles=e.edge;e.disallowHighResIcons=!1;e.animationCompensationSupported=!e.ios&&!e.edge&&!e.macSafari;e.scrubAnimation=!(e.firefox&&52>o||e.samsung||d&&44>d||e.trident);e.canTabbing=!e.ios;e.webgl=function(){try{var e=document.createElement("canvas"),t="probablySupportsContext"in e?"probablySupportsContext":"supportsContext";return t in e?e[t]("webgl")||e[t]("experimental-webgl"):"WebGLRenderingContext"in window}catch(i){return!1}}()},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()},exitFullscreen:function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen&&e.mozCancelFullScreen()},fullscreenEnabled:function(t){return!t||e.useFakeFullscreen?!1:t.fullscreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled||t.mozFullScreenEnabled},bindToFullscreenChange:function(e,t){Utils.multiAddEventListener(e,"fullscreenchange webkitfullscreenchange MSFullscreenChange mozfullscreenchange",t)},isBrowserFullscreen:function(e){var t=e.target;if(!t)return!1;var i=t.contentDocument||t.ownerDocument;if(i){if(i.fullscreenElement||i.msFullscreenElement||i.webkitIsFullScreen||i.mozFullScreen)return!0}else if(t.msFullscreenElement)return!0;return t.webkitIsFullScreen||t.mozFullScreen},loadSVGForHighResIcon:function(t){if(e.needToLoadSVG){var i=function(){t&&(t.config.useHighResIcons=!1);Utils.className(document.body,"","svg")};e.needToLoadSVG=!1;var n="/emp/assets/2.0.23/svgicons.svg";Utils.getXML(n,function(e){e&&e.documentElement?document.body.appendChild(document.importNode(e.documentElement,!0)):i()},i,{},!0)}}};return e}(),ThumbnailScrub=function(){function e(e){var t=r.exec(e);if(t){var i=parseInt("0"+t[2],10),n=parseInt("0"+t[3],10),a=parseInt("0"+t[4],10),o=parseInt("0"+t[5],10),s=parseInt("0"+t[6],10),l=parseFloat("0"+t[7]);return l+60*s+60*o*60+24*a*60*60+30*n*24*60*60+365*i*24*60*60}return null}function t(e,t){return e.replace("$Number%04d$",("0000"+t).slice(-4))}function i(e){var t="";if(-1!==e.indexOf("/")){-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?")));t=e.substring(0,e.lastIndexOf("/")+1)}return t}function n(e,t,n){var a,r,o,s,l,u,c,d,p,f={},m={},g=i(n);for(d=0,p=t.length;p>d;d++){m={};a=t[d];r=a.Representation.width;o=a.Representation.height;s=a.SegmentTemplate.media;l=a.Representation.id;c=r+"x"+o;u=g+s.replace("$RepresentationID$",l);m.storyboardUrlTemplate=u;m.numberRows=a.Representation.EssentialProperty_asArray[0].value;m.numberColumns=a.Representation.EssentialProperty_asArray[1].value;m.thumbsPerBoard=m.numberRows*m.numberColumns;m.maxNumBoards=40;m.thumbInterval=a.SegmentTemplate.timescale/1e3;m.totalNumberThumbs=Math.floor(e/m.thumbInterval);m.lastBoard=Math.ceil(m.totalNumberThumbs/m.thumbsPerBoard)-1;f[c]=m}return f}function a(e,i){var n=t(e.storyboardUrlTemplate,i);if(!s[n]){s[n]=!0;var a=new Image;a.src=n}}var r=new RegExp("([+-]?)P(?:(\\d+)Y)?(?:(\\d+)M)?(?:(\\d+)D)?(?:T(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+(?:\\.\\d+)?)S)?)?","i"),o={},s={},l=function(e){this.player=e};l.prototype={updateOverrideManifest:function(e){this.overrideManifestHref=e;this.extractManifestData()},newMediaItem:function(e){this.overrideManifestHref=null;this.connectionIndex=0;this.reset();this.mediaItem=e},extractManifestData:function(){var e=this.overrideManifestHref;if(this.mediaItem){e||(e=this.mediaItem.thumbManifestHref);if(!e){var t=this.mediaItem.thumbnailConnections;t[this.connectionIndex]&&(e=t[this.connectionIndex].href)}}this.manifestHref!=e&&(e?this._init(e):this.reset())},getThumbnailData:function(e,i,n){var r,o,s,l,u,c,d,p,f;f=i+"x"+n;r=this.thumbData[f];if(r){o=Math.min(r.totalNumberThumbs-2,Math.max(0,Math.ceil(e/r.thumbInterval)-1));s=Math.floor(o/r.thumbsPerBoard);a(r,s);s>0&&a(r,s-1);r.lastBoard>s&&a(r,s+1);l=o%r.thumbsPerBoard;c=l%r.numberColumns;u=Math.floor(l/r.numberColumns);d=t(r.storyboardUrlTemplate,s);p={storyBoardUrl:d,x:-1*c*i,y:-1*u*n};return p}},reset:function(){this.manifestHref=null;this.thumbData={};this.loaded=!1;this.player.ui&&this.player.ui.controls&&Utils.className(this.player.ui.controls,"","p_hasThumbnails")},_init:function(t){var i=this;i.manifestHref=t;i.thumbData={};i.loaded=!1;if(t){o[t]={};var a=function(){Utils.callErrorFunction(i.player,SMPError.THUMBNAIL_FAILOVER,i.manifestHref,!0);i.connectionIndex++;i.extractManifestData()},r=function(r){var o,s={};i.manifestXml=r;try{o=new X2JS([],"",!1);s=o.xml2json(r);i.manifestJSON=s}catch(l){a();return}if(s&&s.MPD&&s.MPD.Period){i.duration=e(s.MPD.Period.duration);i.thumbData=n(i.duration,s.MPD.Period.AdaptationSet_asArray,t);i.player.ui&&i.player.ui.controls&&Utils.className(i.player.ui.controls,"p_hasThumbnails");i.loaded=!0}else a()};Utils.getXML(t,r,a,o[t])}}};return l}(),TTMLParser=function(){function e(e){function t(e){if(e.div){var t=e.div.p_asArray;t||(t=[]);var i=e.div.div_asArray;if(i&&i.length)for(var n=0;i.length>n;n++){var a=i[n].p_asArray,d=O(i[n]);if(a)for(var f=0;a.length>f;f++){t.push(a[f]);(d.begin||d.end)&&(a[f].parentTime=d)}}}t||(t=[]);t.forEach(function(t){var i,n;i=O(t);n=O(t.span);var a=x(t),d=D(t.parentTime,i);d=D(d,n);if(!isNaN(d.begin)||!isNaN(d.end))if(void 0!==t["smpte:backgroundImage"])for(var f=B.tt.head.metadata.image_asArray,m=0;f.length>m;m++)"#"+f[m]["xml:id"]==t["smpte:backgroundImage"]&&R.push({start:d.begin,end:d.end,id:f[m]["xml:id"],data:"data:image/"+f[m].imagetype.toLowerCase()+";base64, "+f[m].__text,type:"image"});else if("html"===r){q={};W={};H={};G={};var g="";(t.hasOwnProperty("id")||t.hasOwnProperty("xml:id"))&&(g=t["xml:id"]||t.id);var h=I(t,e.div,T),y=h&&h.length>0;w(h,V);var v=k(t,T),b=document.createElement("div");b.className="p_paragraph";var E=t.__children,N=_(E,T,!!o);N.className="p_cueDirUniWrapper";var M=/[^\s]/;if(!M.test(N.textContent))return;if(s("unicode-bidi",v)){N.style.cssText+=l("unicode-bidi",v);c("unicode-bidi",v)}if(s("direction",v)){N.style.cssText+=l("direction",v);c("direction",v)}if(s("padding-left",v)||s("padding-right",v))P(N,u("padding-left",v),u("padding-right",v));else{v.push("padding-left:"+.5*T[0]+"px;");v.push("padding-right:"+.5*T[0]+"px;");P(N,u("padding-left",v),u("padding-right",v))}G.left=u("padding-left",v);G.right=u("padding-right",v);if(y)s("justify-content",v)&&h.push(l("justify-content",v));else{c("text-align",v);c("justify-content",v);h.push(Q.center[0]);v.push(Q.center[1])}if(s("multi-row-align",v)){var U=u("multi-row-align",v);s("text-align",v)&&"auto"!=X[U]&&c("text-align",v);if(U in X){v.push(X[U]);c("multi-row-align",v)}}if(s("padding-left",v)&&s("padding-right",v)){c("padding-left",v);c("padding-right",v)}var F="";if(s("regionID",h)){var z=l("regionID",h);F=z.slice(z.indexOf(":")+1,z.length-1)}var j=[];p("justify-content",h,j);p("align-items",h,j);if(v){Utils.className(b,S(v));var Y=v.join(" ");b.style.cssText=Y}b.appendChild(N);var K=document.createElement("div");K.appendChild(b);K.id="subtitle_"+g;if(h){Utils.className(K,S(h));h=h.join(" ")}K.style.cssText="position: absolute; margin: 0; box-sizing: border-box; pointer-events: none;"+h;0===Object.keys(H).length&&(H.defaultFontSize=T[1]/16+"em");A(b);R.push({start:d.begin,end:d.end,type:"html",cueHTMLElement:K,regions:L,regionID:F,cueID:g,videoHeight:at,videoWidth:rt,cellResolution:C,fontSize:H||T[1]/16+"em",lineHeight:q,linePadding:W,padding:G,flexBoxAttr:j,forcedDisplay:a.forcedDisplay})}else{var J="",Z=t.__children;Z.length&&Z.forEach(function(e){if(e.hasOwnProperty("span")){var t=e.span.__children;t.forEach(function(e){t.hasOwnProperty("metadata")||(e.hasOwnProperty("#text")?J+=e["#text"].replace(/[\r\n]+/gm," ").trim():"br"in e&&(J+="\n"))})}else J+=e.hasOwnProperty("br")?"\n":e["#text"].replace(/[\r\n]+/gm," ").trim()});R.push({start:d.begin,end:d.end,data:J,type:"text"})}})}var i=new X2JS([],"",!1);B=i.xml2json(e);if(!B)throw"TTML document could not be parsed";var r="html",o=n(B,"http://www.w3.org/ns/ttml"),d=o||n(B,"http://www.w3.org/2006/10/ttaf1");d&&a(B,d);var m=B.tt;if(!m)throw"TTML document lacks tt element";var g=m.head;g||(g={});g.layout&&(F=g.layout.region_asArray);g.styling&&(U=g.styling.style_asArray);var h=m.body;if(!h)throw"TTML document lacks body element";var y=n(B.tt,"http://www.w3.org/ns/ttml#styling")||n(B.tt,"http://www.w3.org/2006/10/ttaf1#styling");if(m.hasOwnProperty(y+":extent")){var b=m[y+":extent"].split("px");if(3==b.length){rt=parseInt(b[0],10);at=parseInt(b[1],10)}}var C=E(),T=[rt/C[0],at/C[1]];z["font-size"]=f(T[1]+"px;",T);var L=[];if(F)for(var N=0;F.length>N;N++)L.push(v(Utils.clone(F[N]),T));var M=n(B.tt,"http://www.w3.org/ns/ttml#parameter")||n(B.tt,"http://www.w3.org/2006/10/ttaf1#parameter");B.tt.hasOwnProperty(M+":frameRate")&&(B.tt.frameRate=parseInt(B.tt[M+":frameRate"],10));var R=[],j=B.tt.body_asArray[0].__children;j.forEach(function(e){1>R.length&&t(e);Utils.asyncDelay(t,[e])});return R}function t(){R=/^([0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/;H={};q={};W={};G={};V={top:"85%;",left:"5%;",width:"90%;",height:"10%;","align-items":"flex-end;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"};z={color:"rgb(255,255,255);",direction:"ltr;","font-style":"normal;","font-weight":"normal;","text-align":"center;","justify-content":"center;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;"};j={monospace:"monospace",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif"};K={"Reith-sans":!0};Y={sansSerif:"font-family-sans",serif:"font-family-serif",proportionalSansSerif:"font-family-sans",proportionalSerif:"font-family-serif","default":"font-family-sans;"};Q={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]};X={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""};J={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"};Z={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"};$={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"};tt={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"};et=Utils.checkCssSupport(document.createElement("span"),"boxDecorationBreak")}function i(e){var t,i,n,a=R.test(e);if(!a)return 0/0;t=e.split(":");i=parseFloat(t[0])*it+parseFloat(t[1])*nt+parseFloat(t[2]);if(t[3]){n=B.tt.frameRate;n&&!isNaN(n)&&(i+=parseFloat(t[3])/n)}return i}function n(e,t){var i=Object.keys(e).filter(function(i){return("xmlns"===i.split(":")[0]||"xmlns"===i.split(":")[1])&&e[i]===t}).map(function(e){return e.split(":")[2]||e.split(":")[1]});return 1!=i.length?null:i[0]}function a(e,t){for(var i in e)if(e.hasOwnProperty(i)){if(("object"==typeof e[i]||e[i]instanceof Object)&&!Array.isArray(e[i]))a(e[i],t);else if(Array.isArray(e[i]))for(var n=0;e[i].length>n;n++)a(e[i][n],t);var r=i.slice(i.indexOf(t)+t.length+1);e[r]=e[i];delete e[i]}}function r(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function o(e){var t=e.slice(1),i=t.match(/.{2}/g),n=parseFloat(parseInt(parseInt(i[3],16)/255*1e3,10)/1e3),a=i.slice(0,3).map(function(e){return parseInt(e,16)});return"rgba("+a.join(",")+","+n+");"}function s(e,t){for(var i=0;t.length>i;i++){var n=t[i].split(":");if(2===n.length&&n[0].trim()===e)return!0}return!1}function l(e,t){for(var i=0;t.length>i;i++)if(t[i].indexOf(e)>-1)return t[i];return null}function u(e,t){var i=l(e,t);i&&(i=i.slice(i.indexOf(":")+1).replace(";",""));return i}function c(e,t){t.splice(t.indexOf(l(e,t)),1)}function d(e,t){for(var i=0;e.length>i;i++)for(var n=0;t.length>n;n++)e[i]&&e[i].split(":")[0].indexOf(t[n].split(":")[0])>-1&&e.splice(i,1);return e.concat(t)}function p(e,t,i){if(s(e,t)){i.push(l(e,t));c(e,t)}}function f(e,t){var i,n=e.slice(e.indexOf(":")+1,e.length);if(n.indexOf("%")>=0){var a=parseFloat(n.slice(0,n.length-1));i=a*t[1]/1600}else{if(n.indexOf("em")>=0)return n;var r;r=n.indexOf("px")>=0?parseInt(n.slice(0,n.length-2),10):parseInt(n,10);i=r/16}return i+"em;"}function m(e,t){var i=125;if(e.indexOf("%")>=0)i=parseFloat(e.slice(e.indexOf(":")+1,e.indexOf("%")));else if(e.indexOf("px")>=0){i=t/parseFloat(e.slice(e.indexOf(":")+1,e.indexOf("px")));i*=100}return i+"%;"}function g(e,t){var i=[];if("object"==typeof e){for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace("ebutts:","");a=a.replace("xml:","");a=a.replace("tts:","");a=r(a);if(a!==n){e[a]=e[n];delete e[n]}}"style"in e&&(i=i.concat(y(e.style,t)));if("line-padding"in e){var s=parseFloat(e["line-padding"].slice(e["line-padding"].indexOf(":")+1,e["line-padding"].indexOf("c")));"id"in e&&(W[e.id]=s);var l=s*t[0]+"px;";i.push("padding-left:"+l);i.push("padding-right:"+l)}if("font-size"in e){var u=f(e["font-size"],t);"id"in e&&(H[e.id]=u);i.push("font-size:"+u)}if("line-height"in e)if("normal"===e["line-height"])i.push("line-height: normal;");else{var c=m(e["line-height"],t);i.push("line-height:"+c);"id"in e&&(q[e.id]=c)}if("font-family"in e){for(var d=e["font-family"].split(","),p="",g=0;d.length>g;)if(d[g]in K)d.splice(g,1);else if(d[g]in Y){p+=Y[d[g]]+" ";d.splice(g,1)}else{d[g]in j&&(d[g]=j[d[g]]);g++}if(p){i.push("_element-classes:"+p+";");d.length>0&&d.push("Arial, Helvetica, freesans, sans-serif")}d.length>0&&i.push("font-family:"+d.join(",")+";")}if("text-align"in e&&e["text-align"]in Q){i.push(Q[e["text-align"]][0]);i.push(Q[e["text-align"]][1])}"multi-row-align"in e&&i.push("multi-row-align:"+e["multi-row-align"]+";");var h;if("background-color"in e)if(e["background-color"].indexOf("#")>-1&&e["background-color"].length-1===8){h=o(e["background-color"]);i.push("background-color: "+h)}else i.push("background-color:"+e["background-color"]+";");if("color"in e)if(e.color.indexOf("#")>-1&&e.color.length-1===8){h=o(e.color);i.push("color: "+h)}else i.push("color:"+e.color+";");"wrap-option"in e&&i.push(e["wrap-option"]in J?J[e["wrap-option"]]:"white-space:"+e["wrap-option"]);"unicode-bidi"in e&&i.push(e["unicode-bidi"]in Z?Z[e["unicode-bidi"]]:"unicode-bidi:"+e["unicode-bidi"]);"font-style"in e&&i.push("font-style:"+e["font-style"]+";");"font-weight"in e&&i.push("font-weight:"+e["font-weight"]+";");"direction"in e&&i.push("direction:"+e.direction+";");"text-decoration"in e&&i.push("text-decoration:"+e["text-decoration"]+";");B.tt.hasOwnProperty("xml:space")&&"preserve"===B.tt["xml:space"]&&i.push("white-space: pre;");return i}}function h(e,t){for(var i=0;e.length>i;i++){var n=e[i];if(n["xml:id"]===t||n.id===t)return n}return null}function y(e,t){var i=[],n=e.match(/\S+/g);n.forEach(function(e){var n=h(U,e);if(n){var a=g(JSON.parse(JSON.stringify(n)),t);i=i.concat(a)}});return i}function v(e,t){var i=[];for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace("tts:","");a=a.replace("xml:","");a=r(a);e[a]=e[n];a!==n&&delete e[n]}if("extent"in e&&"origin"in e){var o=e.extent.split(/\s/);if(N(o[0])&&N(o[1])){i.push("width: "+o[0]+";");i.push("height: "+o[1]+";")}var s=e.origin.split(/\s/);if(N(s[0])&&N(s[1])){i.push("left: "+s[0]+";");i.push("top: "+s[1]+";")}}"display-align"in e&&i.push($[e["display-align"]]);"writing-mode"in e&&i.push(tt[e["writing-mode"]]);if("style"in e){var l=y(e.style,t);i=i.concat(l)}"padding"in e&&i.push("padding:"+e.padding+";");
"show-background"in e&&i.push("show-background:"+e["show-background"]+";");"id"in e&&i.push("regionID:"+e.id+";");return i}function b(e,t){if(e)for(var i=0;e.length>i;i++){var n=e[i];if(n["xml:id"]===t||n.id===t)return n}return null}function C(e,t){var i=[],n=b(F,e);if(n&&(n.hasOwnProperty("origin")||n.hasOwnProperty("tts:origin"))&&(n.hasOwnProperty("extent")||n.hasOwnProperty("tts:extent"))){i=v(Utils.clone(n),t);var a=s("left",i)&&s("top",i)&&s("height",i)&&s("width",i);a||(i=[])}return i}function E(){var e=[32,15];return B.tt.hasOwnProperty("ttp:cellResolution")?B.tt["ttp:cellResolution"].split(" ").map(parseFloat):e}function P(e,t,i){if(t&&i){for(var n,a=Array.prototype.slice.call(e.children),r=function(e){e.className.indexOf("p_spanPadding")<0&&(e.className=e.className+" p_spanPadding")},o=!0,s=0;a.length>s;s++){var l=a[s];if("SPAN"===l.tagName){if(o){l.style.paddingLeft=t;r(l);o=!1}n=l}else if("BR"===l.tagName){if(n){n.style.paddingRight=i;r(l)}o=!0}}if(!o&&n){n.style.paddingRight=i;r(l)}}}function T(e){e.textContent=e.textContent.replace(/\s+/g," ");e.textContent=e.textContent.replace(/^\s|\s$/g,"")}function S(e){var t="",i=u("_element-classes",e);if(i){t+=i;c("_element-classes",e)}return t}function _(e,t,i){var n=document.createElement("div");e.forEach(function(e){if(!e.hasOwnProperty("metadata"))if(e.hasOwnProperty("span")){var a=e.span.__children;if(a&&a.length>0){var r=document.createElement("span"),o=g(Utils.clone(e.span),t);Utils.className(r,S(o));r.style.cssText=o.join(" ");i&&et?Utils.applyVendorStyles([r],"boxDecorationBreak","clone"):r.style.display="inline-block";r.style.paddingLeft||(r.style.paddingLeft="0.25em");r.style.paddingRight||(r.style.paddingRight="0.25em");var s=function(e,t,i){e.span&&e.span.__children&&e.span.__children.forEach(s);if(!a.hasOwnProperty("metadata"))if(e.hasOwnProperty("#text")){var o=document.createTextNode(e["#text"]);T(o);r.appendChild(o)}else if("br"in e){r.hasChildNodes()&&n.appendChild(r);var l=document.createElement("br");l.className="p_lineBreak";n.appendChild(l);if(i.length>t+1){var u=document.createElement("span");u.className=r.className;u.style.cssText=r.style.cssText;r=u}else r=null}};a.forEach(s);r&&n.appendChild(r)}}else if(e.hasOwnProperty("br")){var l=document.createElement("br");l.className="p_lineBreak";n.appendChild(l)}else if(e.hasOwnProperty("#text")){var u=document.createElement("span");u.textContent=e["#text"];i&&et?Utils.applyVendorStyles([u],"boxDecorationBreak","clone"):u.style.display="inline-block";T(u);n.appendChild(u)}});return n}function I(e,t,i){var n=[],a=e.region,r=t.region,o=e.origin||e["tts:origin"],s=e.extent||e["tts:extent"];if(o&&s){var l=s.split(/\s/);if(N(l[0])&&N(l[1])){n.push("width: "+l[0]+";");n.push("height: "+l[1]+";")}var u=o.split(/\s/);if(N(u[0])&&N(u[1])){n.push("left: "+u[0]+";");n.push("top: "+u[1]+";")}}else a?n=C(a,i):r&&(n=C(r,i));return n}function k(e,t){var i=[];i=d(i,g(B.tt.body,t));i=d(i,g(B.tt.body.div,t));i=d(i,g(e,t));w(i,z);return i}function w(e,t){for(var i in t)t.hasOwnProperty(i)&&(s(i,e)||e.push(i+":"+t[i]))}function A(e){if(e.style.cssText.indexOf("background-color")<0)for(var t=e.getElementsByClassName("p_cueDirUniWrapper"),i=0;t.length>i;i++)if(t[i].children)for(var n=0;t[i].children.length>n;n++){var a=t[i].children[n];L(a)}}function L(e){if(e.children&&e.children.length>0)for(var t=0;e.children.length>t;t++)L(e.children[t]);else e.style.cssText.indexOf("background-color")<0&&(e.style.backgroundColor="black")}function N(e){return e.match(/(100|[0-9]{1,2})(.[0-9]+)?%/)}function O(e){var t,n;if(e){t=e.begin||e["tt:begin"];n=e.end||e["tt:end"]}return{begin:i(t),end:i(n)}}function x(e){var t=!1,i="";if(e){i=e["itts:forcedDisplay"];t="true"==i}return{forcedDisplay:t}}function D(e,t){return{begin:isNaN(t.begin)?e&&e.begin:t.begin,end:isNaN(t.end)?e&&e.end:t.end}}var M,R,B,U,F,H,q,W,G,V,z,j,Y,K,Q,X,J,Z,$,et,tt,it=3600,nt=60,at=360,rt=640;M={parse:e,applyLinePadding:P};t();return M}(),SubtitlesItem=function(){var e=function(e,t,i,n){var a=this;a.live=!1;a.href=e;a.protocol=t;a.supplier=i;a.dpw=n;a.override=!1;a.captionsList=null;a.kind=/^us_closed_captions/.test(i+"")?"closedCaptions":"subtitles";a.loaded=!1;return a};e.prototype={loadSubtitles:function(e,t){var i=this,n=i.href;if(i.captionsList&&i.captionsList.length>0)e(n);else{var a=function(a){i.subtitlesLoaded(a)?e(n):t(n)};Utils.getXML(n,a,t,i)}},subtitlesLoaded:function(e){var t=this,i=!1;try{var n=TTMLParser.parse(e);if(n.length>0){t.captionsList=n;i=!0;t.loaded=!0}}catch(a){}return i}};return e}(),NarrSubtitles=function(){function e(e){var t=e.player.Subtitles&&e.player.Subtitles.currentSubItem&&e.player.Subtitles.currentSubItem.loaded;if(!r&&t){for(var i=e.player.Subtitles.currentSubItem.captionsList,n=0;i.length>n;n++)i[n].forcedDisplay&&a.push(i[n]);r=!0}return 0!==a}function t(){n=!0;r=!1}function i(e){return{timeupdate:function(){n||e.render()},playing:function(){if(n){e.player.Subtitles.load(!0);n=!1}},playlistLoaded:t}}var n=!0,a=[],r=!1,o=function(e){var t=this;t.player=e;t.container=document.createElement("div");t.container.id="narrSubsContainer";t.container.style.cssText="display:none;";t.player.mediaContainer.appendChild(t.container);t.narrativeMainWrap=document.createElement("div");t.narrativeMainWrap.id="narrative";t.narrativeMainWrap.className="Narrative";t.container.appendChild(t.narrativeMainWrap);t.narrSubWrap=document.createElement("div");t.narrativeMainWrap.appendChild(t.narrSubWrap);t.textContainer=document.createElement("p");t.narrSubWrap.appendChild(t.textContainer);t.eventCallbacks=i(this);return t};o.prototype={render:function(){var t=this,i=e(t);if(i){var n=t.player.timeHelper.time,r=function(e){return n>=e.start&&e.end>n},o=a.filter(r),s=o[0]&&o[0].cueHTMLElement?o[0].cueHTMLElement.innerText:"";if(!t.textContainer.firstChild||t.textContainer.firstChild.innerText!==s){var l=document.getElementById("caption");l&&t.textContainer.removeChild(l);if(""!==s){l=document.createElement("span");l.id="caption";l.textContent=s;t.textContainer.appendChild(l)}}}}};return o}(),LiveSubtitlesItem=function(){function e(e,t){return e+t+".m4s"}function t(e,t,i){var n="captionsList";i&&(n+="2");e[n]||(e[n]=[]);for(var a=0;t.length>a;a++)e[n].push(t[a]);e[n]=Utils.stableSort(e[n],Utils.sortByStart)}function i(t){if(t.loadQueue.length>0){var a=t.loadQueue[0];if(!(t.loadedSegments.indexOf(a.index)<0&&t.baseUrl)){t.loadQueue.shift();i(t);return!1}var r=e(t.baseUrl,a.index);t.loadedSegments.push(a.index);var o=0,s=function(e){var o=e.split(/<\?xml version=\"1.0\" encoding=\"UTF-8\"\?>/i)[1],s=new DOMParser;try{var l=s.parseFromString(o,"text/xml");if(n(t,a.start,l,a.index)){if(t.loadedCallback){t.loadedCallback(r);t.loadedCallback=null}}else t.errorCallback(r)}catch(u){t.errorCallback(r)}t.loadQueue.shift();i(t)},l=function(){o++>3?t.errorCallback(r):setTimeout(function(){Utils.getText(r,s,l,t)},400)};Utils.getText(r,s,l,t)}return!0}function n(e,i,n,a){var s=!0;if(n)try{var p=TTMLParser.parse(n);if(p&&p.length>0){for(var f=0;p.length>f;f++){if(3600>p[f].start){p[f].start+=i-3.84;p[f].end+=i-3.84}p[f].start+=e.timeOffset;p[f].end+=e.timeOffset;p[f].liveSegmentIndex=a;if(e.enableReformat){u(p[f]);c(p[f]);d(p[f])}}t(e,p);e.enableDesnake&&r(e.captionsList,o);if(e.enableReformat){r(e.captionsList,l);for(var g=0;p.length>g;g++){var y=p[g];e.lastBaseline&&h(e.lastBaseline,y);m(y)&&(e.lastBaseline=y)}}var v=e.captionsList.length;if(v>180){for(var b=[],C=p[0].start,E=0;e.captionsList.length>E;){var P=e.captionsList[E];if(C-120>P.start||P.start>C+300||b.indexOf(P.liveSegmentIndex)>0){b.indexOf(P.liveSegmentIndex)<0&&b.push(P.liveSegmentIndex);e.captionsList.splice(E,1)}else E++}e.loadedSegments=e.loadedSegments.filter(function(e){return b.indexOf(e)<0})}}}catch(T){}else s=!1;return s}function a(e,t){var i=!1;0===e.cueHTMLElement.textContent.indexOf(t.cueHTMLElement.textContent)&&e.cueHTMLElement.style.left===t.cueHTMLElement.style.left&&e.cueHTMLElement.style.top===t.cueHTMLElement.style.top&&e.cueHTMLElement.style.width===t.cueHTMLElement.style.width&&e.cueHTMLElement.style.height===t.cueHTMLElement.style.height&&(i=!0);return i}function r(e,t){for(var i=0;e.length>i;){for(var n=!1,a=e[i],r=i-1;r>=0;r--){var o=e[r],s=t(a,o);if(s){e.splice(i,1,s);e.splice(r,1);n=!0;break}}n||i++}}function o(e,t){var i=null;if(t.end>=e.start&&a(e,t)){e.start=t.start;t.desnaked=!0;i=e}return i}function s(e){return{left:parseFloat(e.cueHTMLElement.style.left),top:parseFloat(e.cueHTMLElement.style.top),width:parseFloat(e.cueHTMLElement.style.width),height:parseFloat(e.cueHTMLElement.style.height)}}function l(e,t){var i=s(e),n=s(t);if(i.top>n.top){var a=t;t=e;e=a;var r=n;n=i;i=r}else if(i.top===n.top)return null;if(p(e,t)&&f(i,n)){for(var o=0;t.cueHTMLElement.children.length>o;o++)for(var l=e.cueHTMLElement.children[0],u=t.cueHTMLElement.children[0],c=0;u.children.length>c;c++)l.appendChild(u.children[c]);e.cueHTMLElement.style.left=Math.min(i.left,n.left)+"%";e.cueHTMLElement.style.width=Math.max(i.width,n.width)+"%";e.cueHTMLElement.style.height=i.height+n.height+(n.top-i.top)+"%";return e}return null}function u(e){e.cueHTMLElement.style.width=parseFloat(e.cueHTMLElement.style.width)-parseFloat(e.cueHTMLElement.style.left)+"%"}function c(e){for(var t=e.cueHTMLElement.children,i=0;t.length>i;i++)t[i].style.fontFamily="ReithSans, sans-serif"}function d(e){for(var t=parseFloat(e.cueHTMLElement.style.top),i=0;e.flexBoxAttr.length>i;i++)if(0===e.flexBoxAttr[i].indexOf("align-items:")){e.flexBoxAttr[i]=40>"align-items:"+t?"flex-start;":"flex-end;";break}}function p(e,t){return e.start===t.start&&e.end===t.end}function f(e,t){var i=v+.1>=t.top-(e.top+e.height),n=e.left+e.width/2;i&=n>=t.left&&t.left+t.width>=n;return i}function m(e){return g(e)}function g(e){var t=parseFloat(e.cueHTMLElement.style.height);return t>2*v&&4*v>=t}function h(e,t){if(e&&!g(t)){var i=s(e),n=s(t);if(Math.abs(i.top-n.top)<=v)t.cueHTMLElement.style.height=Math.max(i.height,n.height)+"%";else if(Math.abs(n.top+n.height-(i.top+i.height))<=v){t.cueHTMLElement.style.height=Math.max(i.height,n.height)+"%";t.cueHTMLElement.style.top=Math.min(i.top,n.top)+"%"}}}function y(e){return e.slice(-17)}var v=4.17,b=function(e,t){var i=this;i.live=!0;i.loadedSegments=[];i.unloadedSegments=[];i.captionsList=null;i.off();i.enableDesnake=!1;i.hasHLSliveSubs=!1;i.baseUrl=null;i.lastBaseline=null;var n=e.match(/.*\/([^\/]*)\.isml/);if(n&&n.length>0){if(t){i.hasHLSliveSubs=!0;var a=n[0].replace("hls","dash");i.baseUrl=a+"/dash/"+n[1]+"-caption1=64000-"}else i.baseUrl=n[0]+"/dash/"+n[1]+"-caption1=64000-";i.timeOffset=0}return i};b.prototype={loadSubtitles:function(e,t){var n=this;n.loadedCallback=e;n.errorCallback=t;n.active=!0;for(var a=y(n.unloadedSegments);a.length>0;){var r=a.shift();if(!r)break;n.loadQueue.push(r);1==n.loadQueue.length&&i(n)}},onFragmentLoaded:function(e,t){var n=this,a=/-([0-9]*)\.m4s/g.exec(t.url);if(a&&2===a.length){var r={index:+a[1],start:e.start};if(n.active){n.loadQueue.push(r);1==n.loadQueue.length&&i(n)}else n.unloadedSegments.push(r)}},loadHLSsubs:function(e){var t=this,n={index:Math.floor(e/3.84),start:e-e%3.84};if(t.active){t.loadQueue.push(n);1==t.loadQueue.length&&i(t)}else t.unloadedSegments.push(n)},off:function(){var e=this;e.active=!1;e.loadQueue=[];e.loadedCallback=null;e.errorCallback=null}};return b}(),MediaItem=function(){function e(e){return"programme"==e||"radioProgramme"==e||"audio"==e||"video"==e||"trailer"==e||"360"==e}function t(e){return"ident"==e}function i(e){return"ident"==e||"warning"==e}function n(e){return{startTime:{get:function(){return e._startTime}},changeEvent:{get:function(){return e.annotateEvent({type:"mediaItemChanged"})}},failSilent:{get:function(){return e.failureMode==r.SILENT||e.failureMode==r.FAST_SILENT}},failFast:{get:function(){return e.failureMode==r.FAST||e.failureMode==r.FAST_SILENT}}}}function a(e,t){t.kind=e.kind;t.identifier=e.identifier;t.isLive=!!e.live;t.duration=e.duration;t.simulcast=!!e.simulcast;t.versionID=e.versionID;t.serviceID=e.serviceID;t.type=t.type||e.type;var i=e.getSubtitlesOfKind("subtitles");t.captionsURL=i.length>0?i[0].href:null;t.captionsList=e.subtitleConnections;t.thumbnailList=e.thumbnailConnections;return t}var r=function(a,o,s,l,u,c,d,p,f,m,g,h,y,v){var b=this;b.identifier=a;b.versionID=o;b.serviceID=s;b.cvid=v;b.vpid=l;b.id=u;b.kind=c;b.live=d;b.simulcast=p;b.type="360"==c?"360":"audio"==c||"radioProgramme"==c?"audio":"video";b.itemGroup=h;b._startTime=0;b.itemAlternate=y;b.isProgramme=e(c);b.isIdent=t(c);b.isIdentOrWarning=i(c);b.connections=f;b.originalConnections=Utils.clone(f);b.thumbManifestHref=g;b.mediationAttempted=!0;b.failureMode=b.isIdent?r.FAST:r.NORMAL;b.subtitleConnections=[];b.thumbnailConnections=[];b.failedConnections=[];m&&b.subtitleConnections.push(new SubtitlesItem(m,null));Utils.defineProperties(b,n(b));return b};r.NORMAL="normal";r.FAST="fast";r.FAST_SILENT="fastsilent";r.SILENT="silent";r.prototype={annotateEvent:function(e){var t=this;a(t,e);e.mediaItem=a(t,{});return e},addFailedConnection:function(e){var t=this;t.failedConnections.push(e);setTimeout(function(){t.failedConnections=t.failedConnections.filter(function(t){return t!=e})},12e4)},getSubtitlesOfKind:function(e){var t=this;if(t.subtitleConnections.length>0){var i=t.subtitleConnections.filter(function(t){return t.kind==e});return i.length>0?i:t.subtitleConnections}return[]},getRewindWindow:function(e){var t=this;if(!t.gotWindow&&"hls"==t.connections[0].format){t.gotWindow=!0;var i=t.connections[0].href,n=i.substring(0,i.lastIndexOf("/")+1),a=new XMLHttpRequest;a.open("GET",i,!0);a.onerror=function(){};a.onload=function(){t.bitratesMap={};for(var i,r,o="",s=(a.responseText+"").split("\n"),l=0;s.length-1>l;l++)if(-1!=s[l].indexOf("#EXT-X-STREAM-INF:")){o=decodeURIComponent(s[l+1].trim());if(-1!=s[l].indexOf("BANDWIDTH=")&&-1!=s[l].indexOf("RESOLUTION=")){i=s[l].match("RESOLUTION=([0-9]*)")[1];r=Math.round(parseInt(s[l].match("BANDWIDTH=([0-9]*)")[1])/1e3);t.bitratesMap[i]=r}}if(""!==o){var u=new XMLHttpRequest;0!==o.indexOf("http")&&(o=n+o);u.open("GET",o,!0);u.onload=function(){s=(u.responseText+"").split("\n");for(var i=0,n=0;s.length-1>n;n++){var a=s[n],r=a.split("#EXT-X-PROGRAM-DATE-TIME:")[1];r&&(i||(i=Utils.parseISODate(r.trim())))}if(i){i=i.valueOf();isNaN(i)&&(i=0);t._startTime=i/1e3;e()}};u.send(null)}};a.send(null)}},startLiveHLSsubs:function(e){var t=this;if("hls"==t.connections[0].format){var i=t.connections[0].href,n=new XMLHttpRequest;n.open("GET",i,!0);n.onerror=function(){};n.onload=function(){var i=(n.responseText+"").split("\n"),a=i[3];t.liveSubsItem=new LiveSubtitlesItem(a,!0);t.subtitleConnections.push(t.liveSubsItem);e.Subtitles.considerHLSdelay=!0;e.Subtitles.load();e.ui.updateLayout()};n.send(null)}}};return r}(),Playlist=function(){function e(){return{onlyAdverts:{get:function(){for(var e=0;this.items.length>e;e++)if("advert"!==this.items[e].kind)return!1;return!0}},hasAds:{get:function(){for(var e=0;this.items.length>e;e++)if("advert"==this.items[e].kind)return!0;return!1}},mediaType:{get:function(){for(var e=0;this.items.length>e;e++)if(this.items[e].isProgramme)return this.items[e].type;return"video"}},firstProgramme:{get:function(){for(var e=0;this.items.length>e;e++)if(this.items[e].isProgramme)return e;return 0}}}}function t(e,t,i,n){if(e)for(var a=0;e.length>a;a++)if(e[a].getAttribute(t)==i)return n?e[a].getAttribute(n):e[a]}function i(e,t,i,n){var a=e.getElementsByTagName(t);return a.length?i?a[0].getAttribute(i):a[0].textContent||a[0].nodeValue:n||""}function n(e,t,i){var n=e.getAttribute(t);return n?n.toLowerCase():i}function a(e,t,i){var a=n(e,t,i);return isNaN(a)?0:a}function r(e){if(e&&e.replace&&"https:"===(location.protocol+"").toLowerCase()&&0===e.indexOf("http://"))for(var t=0;v.length>t;t++)if(v[t].test(e))return e.replace("http://","https://");return e}function o(e){return e&&e.replace?e.replace("http://ichef.bbci.co.uk","https://ichef.bbci.co.uk").replace("http://newsimg","https://newsimg"):e}function s(e,r){if(r.getElementsByTagName("parsererror").length)throw{message:"invalid/incomplete playlist xml"};var s=r.getElementsByTagName("link"),u=r.getElementsByTagName("item");e.id=i(r,"id");e.title=i(r,"title");e.summary=i(r,"summary");e.updated=i(r,"updated");e.noItemsReason=i(r,"noItems","reason");e.guidance=i(r,"guidance");e.warning=i(r,"warning");e.posterImg=o(t(s,"rel","holding","href"));e.posterRecipe=o(t(s,"rel","holdingrecipe","href"));e.alternateHref=t(s,"rel","alternate","href");if("embed"===i(r,"right","name")){var c=i(r,"right");e.embedRights=c;e.embedRight="true"==c||"allowed"==c}for(var d=r.getElementsByTagName("relatedLink"),p=0;d.length>p;p++){var f=d[p],m=i(f,"summary"),g=i(f,"title",!1,m),h=t(s,"rel","alternate","href");if(g&&h){var y=f.getElementsByTagName("link"),v=t(y,"rel","thumb"),b=v?{href:v.getAttribute("href"),width:v.getAttribute("width"),height:v.getAttribute("height")}:null;e.relatedLinks.push({title:g,summary:m,href:h,thumb:b})}}var C=!1;for(p=0;u.length>p;p++){var E=u[p],P=null,T=i(E,"id"),S=E.getAttribute("kind"),_="true"==E.getAttribute("live"),I="true"==E.getAttribute("simulcast"),k=E.getAttribute("group"),w=i(E,"alternate","id"),A="",L=[],N="",O=i(E,"mediator","identifier");if(O){P=new MediaItem(O,null,null,T,T,S,_,I,[],null,null,k,w,null);P.mediationAttempted=!1}else{for(var x=E.getElementsByTagName("media"),D=0;x.length>D;D++){var M=x[D];A=M.getAttribute("kind");for(var R=M.getElementsByTagName("connection"),B=0;R.length>B;B++){var U=R[B];if("audio"==A||"video"==A){"audio"==A&&"programme"==S&&(S="radioProgramme");h=U.getAttribute("href");L.push({href:h,protocol:n(U,"protocol"),mimetype:n(M,"type"),encoding:n(M,"encoding"),format:n(U,"transferFormat","plain"),supplier:n(U,"supplier"),bitrate:a(M,"bitrate")})}else"captions"==A&&(N=U.getAttribute("href"))}}if(L.length){P=new MediaItem("",null,null,null,T,S,_,I,L,N,null,k,w,null);P.flashAvailable=LoadBalancing.getFlashAvailable(L);P.flashAvailableUnlocked=LoadBalancing.getFlashAvailable(L,!0);LoadBalancing.validateConnections(P);P.fallbackPlaylist=e.url}}if(P){e.addItem(P);if(P.isProgramme&&!C){C=!0;e.isRadio="audio"==P.type;e.groupId=P.itemGroup;e.identifier=E.getAttribute("identifier")||"";var F=E.getElementsByTagName("masterbrand");if(F.length){F=F[0];e.masterbrand={id:F.getAttribute("id"),href:F.getAttribute("href"),title:F.textContent||F.nodeValue}}}}}l(e)}function l(e){for(var t=e.items,i=[],n={},a=0;t.length>a;a++){var r=t[a].itemGroup;if(r&&""!==r){if(!n[r]){n[r]=[];i.push(r)}n[r].push(a)}}var o=[];for(a=0;i.length>a;a++){r=i[a];var s=n[r];if(s.length>1)for(var l=0;s.length>l;l++){var u=t[s[l]];"default"!=u.itemAlternate&&o.push(s[l])}}o.sort();for(a=o.length-1;a>=0;a--)e.items.splice(o[a],1)}function u(e){e.id="";e.title="";e.summary="";e.updated="";e.posterImg="";e.noItemsReason="";e.guidance="";e.warning="";e.groupId="";e.identifier="";e.isRadio=!1;e.masterbrand={};e.relatedLinks=[];e.items=[];e.hasLive=!1}function c(e,t){""===e.guidance&&t.forceGuidance&&(e.guidance=t.forceGuidance);t.overrideHoldingImage&&(e.posterRecipe=t.overrideHoldingImage);t.overrideCtaDuration&&(e.programmeDuration=t.overrideCtaDuration)}function d(e){for(var t=0;e.items.length>t;t++){var i=e.items[t];i.live&&(e.hasLive=!0);if(i.isProgramme){i.duration&&!i.live&&(e.programmeDuration=Utils.secondsToTime(i.duration));break}}}function p(e){e&&this.push({href:e.url,format:e.format,protocol:"http",supplier:e.supplier})}function f(e){return e&&"undefined"!=e&&(e+"").match(/^[a-z0-9_]+$/)?!0:!1}function m(e){return f(e.versionID)?e.versionID:e.serviceID?e.serviceID:f(e.vpid)?e.vpid:e.cvid?"CVID:"+e.cvid:null}function g(e,t){return e&&t&&t.indexOf(e)>=0?!0:!1}function h(e,t,i){e.title=t.title||"";e.guidance=t.guidance||"";e.warning=t.warning||"";e.posterImg=e.holdingImageURL=t.holdingImageURL||"";e.videoHoldingImage=t.videoHoldingImage||"";e.summary=t.summary||"";e.liveRewind=t.liveRewind!==!1;e.embedRights=t.embedRights||"";e.embedRight="true"==e.embedRights||"allowed"==e.embedRights;e.allowContinuousCast=t.allowContinuousCast||!1;t.masterBrandName&&(e.masterbrand={title:t.masterBrandName});if(t.items)for(var n=0;t.items.length>n;n++){var a;a=t.items[n].createdItem?t.items[n].createdItem:e.createMediaItem(t,n,i);if(a){a.simulcast&&(t.simulcast=!0);var r="0";if(i.statsObject){i.statsObject.parentPID&&(r=i.statsObject.parentPID);i.statsObject.episodePID&&(r=i.statsObject.episodePID);i.statsObject.clipPID&&(r=i.statsObject.clipPID)}var o=r;a.live&&"0"==o&&(o=a.identifier);a.itemGroup=o;e.groupId=o;e.addItem(a)}}e.queuedPlaylist=t.queuedPlaylist;e.queuedOptions=t.queuedOptions;0===e.items.length&&(e.noItemsReason=t.noItemsReason?t.noItemsReason:"EmptyPlaylistObject"+(e.filteredItem?"Filtered":""))}function y(t,i,n,a,o){var l=this;Utils.defineProperties(l,e(l));l.suppressItemKind=o.suppressItemKind||[];l.programmeDuration="";u(l);l.filterIdentAndWarning=o.startTime>0;if(a){h(this,a,o);d(l);c(l,o);Utils.asyncDelay(i)}else{t=r(t);l.url=t;var p=function(e,i){var a=i?SMPError.ERROR_PARSING_PLAYLIST:SMPError.ERROR_LOADING_PLAYLIST,r=SMPError.getError(a);r.extra=t;n(r)},f=function(e){try{s(l,e)}catch(n){p(t,!0);return}c(l,o);d(l);i()};Utils.asyncDelay(function(){Utils.getXML(t,f,p,l,!1,o.setWithCredentials)})}return l}var v=[/meta\/dps/,/playlists\.bbc\.co\.uk/i,/news.bbc.co.uk\/media\/emp/i];y.prototype={getNextItem:function(e){var t=this;if(t.items)for(var i=e+1;t.items.length>i;i++)if(t.items[i]&&"advert"!==t.items[i].kind)return t.items[i];return null},getPreviousItemIndex:function(e){var t=this;if(t.items)for(var i=e-1;i>=0;i--)if(t.items[i]&&"advert"!==t.items[i].kind)return i;return null},addItem:function(e){var t=this,i=!1;if("advert"!=e.kind&&"ad"!=e.kind){i=t.filterIdentAndWarning&&("ident"==e.kind||"warning"==e.kind)||t.suppressItemKind.indexOf(e.kind)>-1;i=i||e.mediationAttempted===!1&&("null"==e.identifier||"undefined"==e.identifier)}i?t.filteredItem=!0:t.items.push(e)},createMediaItem:function(e,t,i){var n=e.items[t],a=e.simulcast,r=m(n);if(n.serviceID&&r===n.serviceID){n.live=!0;a!==!1&&(a=!0)}if(r){var o=new MediaItem(r+"",n.versionID,n.serviceID,n.vpid,n.id,n.kind||"programme",n.live,a,[],null,null,null,null,n.cvid);o.preferProtocol=g(r,i.httpsVpids)?"https":null;o.mediationAttempted=!1;o.samltoken=n.samltoken;o.ceiling=n.ceiling;o.duration=n.duration;n.failureMode&&(o.failureMode=n.failureMode);return o}var s=[];n.href&&(n.href.forEach?n.href.forEach(p,s):s.push({href:n.href,format:"plain",protocol:"http"}));if(s.length>0||"advert"==n.kind||"ad"==n.kind){o=new MediaItem(null,null,null,null,n.id,n.kind||"programme",n.live,a,s,n.captionsUrl,n.thumbManifestUrl,null);o.duration=n.duration;n.failureMode&&(o.failureMode=n.failureMode);"ad"==n.kind&&(o.mediationAttempted=!1);LoadBalancing.validateConnections(o);return o}}};return y}(),IStats=function(){function e(e){return{blockUnwanted:!0,playing:function(t){if(t._.shouldReport)if(e.hasPlayed){if(e.dispatchResume){e.updateStats(r);e.dispatchResume=!1}}else{e.hasPlayed=!0;e.updateStats(s)}},waiting:function(t){t._.shouldReport&&(e.dispatchResume=!0)},ended:function(){e.hasPlayed=!1;e.dispatchResume=!1},playlistLoaded:function(){e.hasPlayed=!1;e.dispatchResume=!1},pause:function(t){e.dispatchResume=!1;e.hasPlayed=!1;t._.shouldReport&&!t._.mediaPlayer.ended&&e.updateStats(a)},seeked:function(t){e.updateStats(o);t._.paused||t._.dispatch({type:s})},playlistEnded:function(){e.dispatchResume=!1;e.updateStats(i)},playerDisconnected:function(t){e.dispatchResume=!1;t._.dispatch({type:a})},playerDestroying:function(t){t._.dispatch({type:a});e.dispatchResume=!1},error:function(t){4237!=t.code&&e.updateStats(n,t)}}}function t(e,t){var i=this.player,n=i.mediaItem||l,a={type:e,mediaItem:n};t&&(a.errorItem=t.toSimple());i.dispatch(a)}var i="SonarEndEvent",n="SonarErrorEvent",a="SonarPauseEvent",r="SonarResumeEvent",o="SonarSeekEvent",s="SonarPlayEvent",l={mediaType:"-",groupId:"unknown",identifier:"unknown"},u=function(t){var i=this;this.player=t;this.eventCallbacks=e(this);this.hasPlayed=!1;return i};u.prototype={updateStats:t};return u}(),INFO_INTERVAL=1e3,QOS=function(){function e(e){e&&e.lastInfoTime<Utils.now()-1e3*e.infoTimeMultiplier&&(e.infoEventObject&&e.infoEventObject.averageBufferLength!=e.lastBufferLength||e.lastInfoCurrentTime!=e.player.time.toFixed(1)||e.lastInfoBitrate!=t(e))&&i(e)}function t(e,t){var i="-";if(e.infoAdapter){var n,a=e.infoAdapter.bitrateList;n=t?e.infoAdapter.bitrateIndex:e.infoAdapter.downloadingBitrateIndex;a[n]&&(i=a[n])}return i}function i(e){if(e.infoEventObject&&e.infoAdapter){var t=e.infoAdapter.bitrateList;if(t.length){var i=[];i.push(e.getMediaType());i.push(t.join("~"));i.push(a(e).join("~"));i.push(r(e).join("~")||"-");i.push(e.infoEventObject.droppedFrames);i.push(e.infoEventObject.droppedFrames);i.push(e.timeSpentTotal.join("~"));i.push(e.droppedFramesTotal.join("~")||"-");var o=e.startupTime?e.startupTime.toFixed(0):0;e.lastBufferLength=e.infoEventObject.averageBufferLength;i.push(o);e.lastInfoCurrentTime=e.player.time.toFixed(1);i.push(n(e).join("~"));e.lastInfoTime=Utils.now();e.infoTimeMultiplier=60;var s=i.join("/");RDotReporting.trackQOSInfo(s,"baa")}}}function n(e){for(var t=[],i=Math.max(0,e.bitrateChanges.length-5);e.bitrateChanges.length>i;i++)t.push(e.bitrateChanges[i].join(","));return t}function a(e){if(!e.infoAdapter)return[];for(var t=e.infoAdapter.bitrateList,i=[],n=0;t.length>n;n++){var a=e.timeSpent[n]||0;i.push(a);e.timeSpentTotal[n]?e.timeSpentTotal[n]+=a:e.timeSpentTotal[n]=a}e.timeSpent=[];return i}function r(e){for(var t=[],i=0;e.droppedFramesArray.length>i;i++){t.push(e.droppedFramesArray[i]||0);e.droppedFramesTotal[i]?e.droppedFramesTotal[i]+=e.droppedFramesArray[i]||0:e.droppedFramesTotal[i]=e.droppedFramesArray[i]||0}e.droppedFramesArray=[];return t}function o(e){e.infoAdapter=null;e.currentFormat=null;e.timeSpent=[];e.timeSpentTotal=[];e.bitrateChanges=[];e.infoEventObject=null;e.lastInfoTime=-999999}function s(t){return{blockUnwanted:!0,error:function(e){var i=t.player.mediaItem,n={};e.extra&&"string"==typeof e.extra&&(n.bbc_smp_detail=e.extra);t.player.trackAction("error_"+e.code,"error",n);RDotReporting.trackError(e,i);var a=[];if(4200==e.code){try{var r=t.player.dashEvents.dashPlayer,o=r.getMetricsFor("stream"),s=o.HttpList}catch(l){s=[]}for(var u=s.length-1;u>-1;u--)if(s[u].url==e.extra){a.push(e.extra);a.push(s[u].responsecode);a.push(s[u]._responseHeaders);break}RDotReporting.trackError({code:5022,severity:"i",extra:a.join("_")},i)}if((5003==e.code||5004==e.code)&&t.player.isPlayingDash)try{var c=t.player.mediaPlayer.currentTime;r=t.player.dashEvents.dashPlayer;try{o=r.getMetricsFor("audio");var d=o.HttpList,p=o.RequestsQueue.executedRequests}catch(l){d=[];p=[]}try{o=r.getMetricsFor("video");var f=o.HttpList,m=o.RequestsQueue.executedRequests}catch(l){f=[];m=[]}for(var g=0;p.length>g;g++){var h=p[g];if(c>=h.startTime&&h.startTime+h.duration>c){a.push(h.url);for(u=d.length-1;u>-1;u--)if(d[u].url==h.url){a.push(d[u]._responseHeaders);a.push(d[u].responsecode);a.push(h.bytesLoaded);a.push(h.bytesTotal);break}break}}for(g=0;m.length>g;g++){h=m[g];if(c>=h.startTime&&h.startTime+h.duration>c){a.push(h.url);for(u=f.length-1;u>-1;u--)if(f[u].url==h.url){a.push(f[u]._responseHeaders);a.push(f[u].responsecode);a.push(h.bytesLoaded);a.push(h.bytesTotal);break}}}RDotReporting.trackError({code:5020,severity:"i",extra:a.join("_")},i)}catch(l){}},info:function(e){var i=t.infoAdapter&&t.infoAdapter.bitrateIndex||0,n=t.infoEventObject?t.infoEventObject.droppedFrames:0;t.timeSpent[i]?t.timeSpent[i]+=INFO_INTERVAL/1e3:t.timeSpent[i]=INFO_INTERVAL/1e3;e.droppedFrames>n&&(t.droppedFramesArray[i]?t.droppedFramesArray[i]+=e.droppedFrames-n:t.droppedFramesArray[i]=e.droppedFrames-n);t.infoEventObject=e},mediaItemChanged:function(){o(t)},changingsrc:function(e){t.currentSupplier!==e.supplier&&(t.currentSupplier=e.supplier);if(t.currentFormat!==e.format){o(t);t.currentFormat=e.format;t.infoAdapter="hls"===t.currentFormat?new p(t):"dash"===t.currentFormat?new d(t):new c(t)}},timeupdate:function(){e(t);if(!t.sentPS)if(void 0===t.firstPSTime)t.firstPSTime=t.player.time;else if(t.firstPSTime!=t.player.time){RDotReporting.trackPlaySuccess();t.sentPS=!0;t.infoAdapter&&t.infoAdapter._bitrateList&&t.infoAdapter._bitrateList()}},bitrateChanged:function(e){e.streamType==t.player.elType&&t.bitrateChanges.push([e.newIndex,t.player.time.toFixed(1)])},waiting:function(){clearInterval(t.updateTimer);clearInterval(t.sendInfoTimer);t.sendInfoTimer=setInterval(e,1e3,t)},tryingToPlay:function(){t.startupStart=Utils.now();t.startupTime=null;t.sentPS=!1;t.firstPTime=void 0;RDotReporting.trackPlayIntent()},ended:function(){t.playing=!1;clearInterval(t.updateTimer);i(t);t.infoTimeMultiplier=10},pause:function(){t.playing=!1;clearInterval(t.updateTimer);clearInterval(t.sendInfoTimer);t.sendInfoTimer=setInterval(e,1e3,t)},canplay:function(){if(!t.startupTime){t.startupTime=Utils.now()-t.startupStart;t.timeSpentBufferingStart=0;t.lastInfoTime=Utils.now()}},playlistLoading:function(){i(t);t.resetProperties()},playing:function(){clearInterval(t.sendInfoTimer);clearInterval(t.updateTimer);t.player.mediaItem&&!t.player.mediaItem.useFlash&&(t.updateTimer=setInterval(function(){l(t)},INFO_INTERVAL));t.playing=!0}}}function l(e){var t=e.player,i=t.mediaPlayer,n=e.infoAdapter;if(!(2>=i.readyState||i.paused)){var a;if(i.getVideoPlaybackQuality){var r=i.getVideoPlaybackQuality();a=r.totalVideoFrames;e.droppedFrames=r.droppedVideoFrames}else if(i.webkitDecodedFrameCount){a=i.webkitDecodedFrameCount;e.droppedFrames=i.webkitDroppedFrameCount;e.decodedBytes=i.webkitAudioDecodedByteCount+(i.webkitVideoDecodedByteCount?i.webkitVideoDecodedByteCount:0)}else if(i.mozParsedFrames){a=i.mozParsedFrames;e.droppedFrames=i.mozDecodedFrames-i.mozPresentedFrames}e.currentFPS=a-e.decodedFrames;(0>e.currentFPS||e.currentFPS>100)&&(e.currentFPS=0);e.maxFPS=Math.max(e.currentFPS,e.maxFPS);e.decodedFrames=a;e.averageDroppedFrames=(e.averageDroppedFrames*e.averagesCounter+e.droppedFrames)/(e.averagesCounter+1);if(n){e.averageBufferLength=(e.averageBufferLength*e.averagesCounter+n.bufferLength)/(e.averagesCounter+1);t.dispatch({audioBufferLength:n.audioBufferLength,averageBufferLength:e.averageBufferLength,averageDroppedFPS:e.averageDroppedFrames,averageMaxBandwidth:null,bufferLength:n.bufferLength,currentBitsPerSecond:n.currentBitsPerSecond,currentFPS:e.currentFPS,decodedBytes:e.decodedBytes,decodedFrames:e.decodedFrames,droppedFrames:e.droppedFrames,maxFPS:e.maxFPS,maxBandwidth:null,type:"info",videoBufferLength:n.videoBufferLength})}}}function u(e){var t=this;t.eventCallbacks=s(t);t.player=e;t.reportError=t.eventCallbacks.error;t.resetProperties();return t}var c=function(){function e(e){this.qos=e}var t=function(){};e.prototype={_audioBufferLength:t,_bitrateIndex:t,_downloadingBitrateIndex:t,_bitrateList:function(){return[]},_bufferLength:function(){var e=this.qos.player,t=0;e.mediaPlayer&&(t=e.buffered-e.mediaPlayer.currentTime);return Math.max(0,isNaN(t)?0:t)},_currentBitsPerSecond:t,_videoBufferLength:t};Utils.defineProperties(e.prototype,{audioBufferLength:{get:function(){return this._audioBufferLength()}},bitrateIndex:{get:function(){return this._bitrateIndex()}},downloadingBitrateIndex:{get:function(){return this._downloadingBitrateIndex()}},bitrateList:{get:function(){return this._bitrateListCached||this._bitrateList()}},bufferLength:{get:function(){return this._bufferLength()}},currentBitsPerSecond:{get:function(){return this._currentBitsPerSecond()}},videoBufferLength:{get:function(){return this._videoBufferLength()}}});return e}(),d=function(){function e(e){this.qos=e}e.prototype=Object.create(c.prototype);e.prototype._audioBufferLength=function(){return this.qos.player.dashEvents.bufferLevel.audio};e.prototype._downloadingBitrateIndex=function(){if(this.qos.player.dashEvents.dashPlayer){try{var e=this.qos.player.dashEvents.dashPlayer.getQualityFor(this.qos.player.elType)
}catch(t){}return e}};e.prototype._bitrateIndex=function(){return this.qos.player.dashEvents.dashPlayer?this.qos.player.dashEvents.currentBitrateIndex:void 0};e.prototype._bitrateList=function(){if(!this.qos.player.dashEvents.dashPlayer)return[];var e=this.qos.player.elType;try{var t=this.qos.player.dashEvents.dashPlayer.getBitrateInfoListFor(e)}catch(i){return[]}var n=0;"video"===e&&(n=this.qos.player.consideredMobileConnection?48:96);var a=[];if(t)for(var r=0;t.length>r;r++)a.push((t[r].bitrate/1e3+n).toFixed(0));this._bitrateListCached=a;return a};e.prototype._bufferLength=function(){return Math.min(this.audioBufferLength,this.videoBufferLength||Number.POSITIVE_INFINITY)};e.prototype._currentBitsPerSecond=function(){return this.qos.player.dashEvents.currentBitsPerSecond};e.prototype._videoBufferLength=function(){return this.qos.player.dashEvents.bufferLevel.video};return e}(),p=function(){function e(e){this.qos=e}var t={mf_:{192:86,256:156,384:281,512:437,704:827,960:1604}};e.prototype=Object.create(c.prototype);e.prototype._bitrateIndex=function(){var e,t,i=this.bitrateMap,n=this.qos.player,a=n.mediaPlayer.videoWidth,r=this.bitrateList,o=this.qos.bitrateChanges;if(i){if(i.hasOwnProperty(a))for(var s=0;this.bitrateList.length>s;s++)if(r[s]==i[a]){e=r[s];t=s;break}if(!o.length||o[o.length-1][0]!==t){n.dispatch({type:"bitrateChanged",streamType:this.qos.player.elType,previousBitrate:o.length?r[o[o.length-1][0]]:0,newBitrate:e,newIndex:t});n.dispatch({type:"loadedmetadata",bitrate:e,cdn:this.qos.currentSupplier})}return t}};e.prototype._currentBitsPerSecond=function(){var e=this.bitrateList,t=this.qos.bitrateChanges;return t.length>0?e[t[t.length-1][0]]:void 0};e.prototype._bitrateList=function(){var e=this.bitrateMap,t=[];if(e){for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}};Utils.defineProperties(e.prototype,{bitrateMap:{get:function(){var e=this.qos.player.mediaItem;if(e&&e.bitratesMap)return e.bitratesMap;for(var i in t)if(-1!==(this.qos.currentSupplier+"").indexOf(i))return t[i];return{}}}});return e}();u.prototype={buffering:function(){var e=this;if(0===e.timeSpentBufferingStart){e.player.dispatch({type:"SonarBufferEvent"});e.timeSpentBufferingStart=Utils.now()}},endBuffering:function(){var e=this;if(0!==e.timeSpentBufferingStart&&e.startupTime){var t=Utils.now()-e.timeSpentBufferingStart;e.timeSpentTotalBuffering+=t/1e3;e.timeSpentBufferingStart=0;e.bufferingEvents++}},resetProperties:function(){var e=this;e.currentFPS=0;e.maxFPS=0;e.decodedFrames=0;e.droppedFrames=0;e.decodedBytes=0;e.timeSpent=[];e.timeSpentTotal=[];e.timeSpentTotalBuffering=0;e.timeSpentBufferingStart=0;e.droppedFramesArray=[];e.droppedFramesTotal=[];e.infoEventObject=null;e.bufferingEvents=0;e.lastInfoTime=-999999;e.infoTimeMultiplier=10;e.bitrateChanges=[];e.averageBufferLength=0;e.averageDroppedFrames=0;e.averagesCounter=0;e.playing=!1},getMediaType:function(){var e=this,t=e.player,i="od";t.mediaItem&&(t.isLive?i=t.mediaItem.simulcast?"simulcast":"live":"programme"!=t.mediaItem.kind&&"radioProgramme"!=t.mediaItem.kind&&(i=t.mediaItem.kind||"unknown"));return t.elType+"-"+i},getInfoData:function(){var e=this,i=[],n=t(e);e.lastInfoBitrate=n;i.push(n);i.push(t(e,!0));i.push(e.bufferingEvents);i.push(e.timeSpentTotalBuffering.toFixed(1));var a=e.averageBufferLength?e.averageBufferLength.toFixed(1):"-";i.push(a);var r=e.player.timeHelper,o="-";isNaN(r.time)||(o=r.time.toFixed(1));i.push(o);var s="-";r.latestSeek?s=r.latestSeek.toFixed(1):isNaN(r.duration)||(s=r.duration);i.push(s);return i}};return u}(),DebugConsole=function(){function e(e){if((e.target==B.mediaContainer||e.target==B.mediaPlayer)&&e.changedTouches){var t=e.changedTouches[0].pageX/window.innerWidth,i=e.changedTouches[0].pageY/window.innerHeight;.25>t&&(R|=1);t>.75&&(R|=2);.25>i&&(R|=4);i>.66&&(R|=8)}}function t(e){if(e||"block"==S.style.display){T.textContent=T.title=B.build;var t=h()+"\n ";try{_.firstChild.textContent=t.split("\n")[0];_.lastChild.textContent=t.split("\n")[1]}catch(i){_.textContent=t}_.title=t;I.textContent=I.title=P?"Error: "+P.code+(P.extra?", "+P.extra:""):"";for(var n=S.getElementsByTagName("li"),a=0;n.length>a;a++)n[a].style.display=""===n[a].textContent?"none":""}}function i(e){t(!0);S.style.display="block";var i=Utils.getOffsets(B.mediaContainer),n=i.left+i.width,a=i.top+i.height,r="touchstart"==e.type?e.targetTouches[0].pageX:e.pageX,o="touchstart"==e.type?e.targetTouches[0].pageY:e.pageY,s=a-o>Utils.getOffset(S,"height"),l=n-r>Utils.getOffset(S,"width");S.style.left=l?r+"px":"auto";S.style.right=l?"auto":"0";S.style.top=s?o+"px":"auto";S.style.bottom=s?"auto":"0"}function n(e){("keydown"!==e.type||e.keyCode===KEY_ESCAPE)&&a()}function a(){document.documentElement.removeEventListener("click",n);document.documentElement.removeEventListener("keydown",n);S.style.display="none"}function r(){S=document.createElement("ul");S.style.display="none";S.className="p_contextMenu";T=o(f);T.textContent=T.title=B.build;_=o(g);_.innerHTML=" <br> ";I=o(m);k=o(p);D=o(c);B.mediaContainer.appendChild(S);Utils.multiAddEventListener(document.documentElement,"click keydown",n,!0)}function o(e){var t=document.createElement("li");S.appendChild(t);var i=document.createElement("a");i.className="p_contextMenuItem";e&&i.addEventListener("click",e);t.appendChild(i);return i}function s(){A=document.createElement("div");A.className="p_debugConsoleLog";var e=document.getElementById("mediaContainer");e.appendChild(A);x=O=document.createElement("ul");x.className="p_consoleLogList";x.id="p_consoleList";A.appendChild(x);O.addEventListener("scroll",d);O.scrollTop=O.scrollHeight}function l(){w=!0;A.style.display="block"}function u(){A.style.display="none";document.documentElement.removeEventListener("scroll",d)}function c(e){A||s();if(w){u();w=!1}else{l();a()}e.preventDefault()}function d(){M=O.scrollTop;L=N>M}function p(e){var t=B.dashEvents;t.dashJsDebug=!t.dashJsDebug;k.textContent="Dash logging "+(t.dashJsDebug?String.fromCharCode(10003):"");e.preventDefault();a()}function f(e){console.log(B.mediaConnection);console.log(B.mediaItem);console.log(B.playlist);console.log(B.config);console.log(B.ui.config);console.log(B.ui.markerData);console.log(navigator.userAgent);e.preventDefault();a()}function m(e){var t="Error code : "+P.code+"\nSeverity : "+P.severity+"\nDescription : "+P.description+"\nResponsibility : "+P.responsibility+"\nDetail : "+P.detail;console.log(t);e.preventDefault();a()}function g(e){console.log(_.textContent);e.preventDefault();a()}function h(){var e=B.mediaItem&&B.mediaItem.identifier?B.mediaItem.identifier:"unknown",t="",i=B.mediaConnection;if(i){var n=b||"unknown bitrate";"flac"==C&&(n="lossless");var a=E||(i.format?i.format:"unknown format"),r=i.supplier?i.supplier:"unknown cdn";"video"==B.elType&&(t=" | "+(B.mediaPlayer&&B.mediaPlayer.videoWidth&&B.mediaPlayer.videoHeight?B.mediaPlayer.videoWidth+"x"+B.mediaPlayer.videoHeight:"unknown dimensions"));return n+" | "+a+" ("+r+")\n"+e+t}return e}function y(e){e.targetTouches.length>2&&i(e)}function v(e){var t=!B.swf.fake&&!B.swf.ready&&!B.swf.failed;if(t||S&&"none"!=S.style.display)a();else{i(e);e.preventDefault()}}var b,C,E,P,T,S,_,I,k,w,A,L,N,O,x,D,M,R=0,B=null,U=[],F={player:function(t){B=t;var i=t.mediaContainer;r();Utils.multiAddEventListener(i,"touchend mouseup",e);i.addEventListener("contextmenu",v);i.addEventListener("touchstart",y)},addContextMenuItem:function(e,t,i){var n="item_"+e;H[n]||(H[n]=o(i));H[n].textContent=t},updateContextMenuItem:function(e,t){var i="item_"+e;H[i]&&(H[i].textContent=t)},eventCallbacks:{mediaItemChanged:function(){b=null;C=null;E=null;t();U=[]},loadedmetadata:function(e){var i=e.bitrate,n=e.codecs,a=e.transferFormat;i&&(b=i+"kbps");n&&(C=n);a&&(E=a);t()},info:function(e){e.currentBitsPerSecond&&(b=e.currentBitsPerSecond+"kbps")},error:function(e){if(4205!=e.code){P&&5e3==e.code?P.code=P.code+" ("+e.code+")":P=e;U.push(e.code);t()}},playlistLoading:function(){P=null;t()}}},H={};return F}(),Subtitles=function(){function e(e){return e?parseFloat(e.split("px")[0]):0}function t(e,t){return t>e.start&&e.end>t}function i(e,t){return isNaN(t.max)||isNaN(t.min)?isNaN(t.min)?e:Math.max(e,t.min):Math.min(Math.max(e,t.min),t.max)}function n(e,t){return function(i){e.currentSubItem&&e.currentSubItem.href===i&&e[t](i)}}function a(e){function t(){e.clearSubtitles()}function i(){e.clearSubtitles();e.captionsList=null;e.overrideItem=null;e.currentSubItem=null;e.failedToLoad=!1}return{blockUnwanted:!0,playlistLoading:i,playlistEnded:t,seeking:t,ended:t,error:t,losingControl:t,mediaItemChanged:i,mediaItemInfoChanged:function(){e.failedToLoad=!1;e.load()},timeupdate:function(){e.showingSubs&&!e.player.Chromecast.isCasting&&e.currentSubItem&&e.currentSubItem.captionsList&&e.checkForSubtitles(e.player.time);e.player.mediaItem.liveSubsItem&&e.player.mediaItem.liveSubsItem.hasHLSliveSubs&&e.player.mediaItem.liveSubsItem.loadHLSsubs(e.player.timeHelper.time+6)},seeked:function(){e.clearSubtitles();var t=e.player.mediaItem;t&&t.liveSubsItem&&t.liveSubsItem.hasHLSliveSubs&&e.player.mediaPlayer.paused&&t.liveSubsItem.loadHLSsubs(e.player.timeHelper.time)},playing:function(){e.player.mediaItem.liveSubsItem&&e.player.mediaItem.liveSubsItem.hasHLSliveSubs&&e.player.mediaItem.liveSubsItem.loadHLSsubs(e.player.timeHelper.time+3.84)}}}function r(e,t,i){if(e.from===t){var n=e.size;return n>i?n:i}return i}function o(e,t,i){return{top:i(e.top,t.top),bottom:i(e.bottom,t.bottom),left:i(e.left,t.left),right:i(e.right,t.right)}}function s(e,t){return{top:e.bottom-t.top,bottom:-(e.top-t.bottom),left:e.right-t.left,right:-(e.left-t.right)}}function l(e){if(e.length>0){for(var t={top:e[0].top,bottom:e[0].bottom,left:e[0].left,right:e[0].right},i=1;e.length>i;i++){var n=e[i];t.top=Math.min(t.top,n.top);t.bottom=Math.max(t.bottom,n.bottom);t.left=Math.min(t.left,n.left);t.right=Math.max(t.right,n.right)}t.width=t.right-t.left;t.height=t.bottom-t.top;return t}return void 0}function u(e,t,i){return d(e,t,function(e){return e+i})}function c(e,t,i){return d(e,t,function(e){return e*i})}function d(e,t,i){var n=parseFloat(e.slice(0,e.indexOf(t)));return i(n)+t}function p(e){if(window.screen&&window.screen.width&&window.screen.height&&e.width&&e.height){var t=window.screen.width/e.width,i=window.screen.height/e.height;return Math.min(i,t)}return 1}function f(e){var t={from:"bottom"};Utils.defineProperties(t,{size:{get:function(){var t=0;if(e.areControlsVisible()){var i=0,n=e.UIinfoObject;n.markersBarVisible?i=Utils.getOffset(e.chapterMarkersHolder,"top"):n.seekBarVisible?i=Utils.getOffset(e.progressBar.seekBarHolder,"top"):e.controls&&(i=Utils.getOffset(e.controls,"top"));e.subtitleSettingsPanel.isPanelOpen()&&(i=Math.min(i,e.subtitleSettingsPanel.getPanelTop()));e.playbackSettingsPanel.isPanelOpen()&&(i=Math.min(i,e.playbackSettingsPanel.getPanelTop()));if(i>0){var a=n.videoHeight?n.videoHeight:Utils.getOffset(e.container,"height"),r=n.videoY?n.videoY:0;t=r+a-i+10}else t=i}return t}}});return t}function m(e){var t={from:"bottom"};Utils.defineProperties(t,{size:{get:function(){if(!isNaN(e.config.subtitles.yOffset)){var t=e.UIinfoObject.videoHeight?e.UIinfoObject.videoHeight:Utils.getOffset(e.container,"height"),i=e.UIinfoObject.videoY?e.UIinfoObject.videoY:0;return t+i-e.config.subtitles.yOffset}return 0}}});return t}var g={scale:{min:.5},fontSize:{min:.5}},h=function(e){var t=this;t.player=e;var i=t.container=document.createElement("div");i.setAttribute("aria-live","polite");i.setAttribute("role","region");i.className="p_subtitlesContainer";t.player.mediaContainer.appendChild(t.container);t.failedToLoad=!1;t.enabled=!0;t.eventCallbacks=a(this);t.index=0;t.previousTime=0;t.subtitleMargins=[];t.currentSubtitles=[];t.leftToRight=[];t.topToBottom=[];t.currentSubItem=null;t.overrideItem=null;t.desnakeLiveSubs=!1;t.reformatLiveSubs=!1;t.kind="subtitles";t.considerHLSdelay=!1;return t};h.prototype={subsClasses:{},showingSubs:!1,failedToLoad:!1,enabled:!0,getDefaultSizeAdjustment:function(){var e=window.innerWidth,t=.67;601>e?t=1:1281>e?t=.67:2561>e&&(t=.6);return t},updateConfig:function(e){var t=this;e=e.subtitles;var i=.8;e.contrast&&"number"==typeof e.contrast&&e.contrast>1&&(i=e.contrast/100);t.sizeAdjustment=t.getDefaultSizeAdjustment();e.sizeAdjustment&&"number"==typeof e.sizeAdjustment&&e.sizeAdjustment>0&&(t.sizeAdjustment=e.sizeAdjustment);t.player.ui&&t.player.ui.subtitleSettingsPanel&&t.player.ui.subtitleSettingsPanel.indicateSize&&t.player.ui.subtitleSettingsPanel.indicateSize(t.sizeAdjustment);t.container.style.opacity=i;t.kind=e.kind||"subtitles";t.subtitleMargins=[f(t.player.ui),m(t.player.ui)];if(e.margins)for(var n=0;e.margins.length>n;n++)t.subtitleMargins.push(e.margins[n]);t.desnakeLiveSubs=e.desnakeLiveSubtitles;t.reformatLiveSubs=e.reformatLiveSubtitles;t.currentSubItem&&t.currentSubItem.live&&(t.currentSubItem.enableDesnake=e.desnakeLiveSubtitles);e.defaultOn&&t.on();t.updatePositions()},persistSizeAdjustment:function(e){var t=Utils.getCookie("ckps_smpSettings"),i={};if(t)try{i=JSON.parse(t);i.subtitles?i.subtitles.sizeAdjustment=e:i.subtitles={sizeAdjustment:e}}catch(n){i={subtitles:{sizeAdjustment:e}}}else i={subtitles:{sizeAdjustment:e}};Utils.setCookie("ckps_smpSettings",JSON.stringify(i))},checkForSubtitles:function(e){for(var i=this,n=0;i.currentSubtitles.length>n;)!t(i.currentSubtitles[n],e)||i.currentSubtitles[n].desnaked?i.removeSubtitle(i.currentSubtitles[n]):n++;var a=0;e>i.previousTime&&(a=i.index);var r=null;for(n=a;i.currentSubItem.captionsList.length>n;n++){var o=i.currentSubItem.captionsList[n];if(o.start>e)break;o.end>e&&i.displaySubtitle(o)}i.previousTime=e;return r},displaySubtitle:function(e){var t=this;if(e&&t.currentSubtitles.indexOf(e)<0){t.container.appendChild(e.cueHTMLElement);var i=Utils.getOffsets(e.cueHTMLElement),n=Utils.getOffsets(t.container),a=o(i,n,Utils.sortSimple);a.left/=n.width;a.right/=n.width;a.top/=n.height;a.bottom/=n.height;a.right=-a.right;a.bottom=-a.bottom;e.naturalPos=a;t.topToBottom.push(e);t.topToBottom.sort(function(e,t){return e.naturalPos.top>t.naturalPos.top?1:e.naturalPos.top===t.naturalPos.top?0:-1});t.leftToRight.push(e);t.leftToRight.sort(function(e,t){return e.naturalPos.left>t.naturalPos.left?1:e.naturalPos.left===t.naturalPos.left?0:-1});t.currentSubtitles.push(e);e.active=!0;t.updatePositions()}},removeSubtitle:function(e){var t=this,i=t.currentSubtitles.indexOf(e);if(i>=0){t.currentSubtitles.splice(i,1);t.leftToRight.splice(t.leftToRight.indexOf(e),1);t.topToBottom.splice(t.topToBottom.indexOf(e),1);t.container.removeChild(e.cueHTMLElement);e.active=!1}},clearSubtitles:function(){var e=this;e.previousTime=0;e.index=0;for(var t=e.currentSubtitles;t.length>0;)e.removeSubtitle(t[t.length-1])},showLoadErrorMessage:function(){var e=this;if(e.container){var t=document.createElement("div");Utils.className(t,"p_subs");t.innerHTML="Error Loading Subtitles";t.style.cssText="text-align:center; color:#fff; font-size:1.25em; background-color:rgba(0,0,0,1); padding:2px 8px";e.container.style.display="block";e.container.className="p_subtitles";e.container.appendChild(t);e.updatePositions();setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t);t=null},5e3)}},updateSubs:function(e){var t=this;t.failedToLoad=!1;t.overrideItem=e?new SubtitlesItem(e,null):null;t.load();t.player.ui.updateLayout()},on:function(){var e=this;if(!e.showingSubs||e.considerHLSdelay){e.considerHLSdelay=!1;e.showingSubs=!0;e.container.style.display="block";e.load();e.updatePositions();e.player.ui.UIinfoObject.subtitles=!0;e.player.ui.dispatchUIInfo();e.player.dispatch({type:"subtitles",active:!0})}},off:function(){var e=this;if(e.showingSubs){e.currentSubItem&&e.currentSubItem.live&&e.currentSubItem.off();e.showingSubs=!1;e.container.style.display="none";e.clearSubtitles();e.player.ui.UIinfoObject.subtitles=!1;e.player.ui.dispatchUIInfo();e.player.dispatch({type:"subtitles",active:!1});e.player.ui.config.subtitles.defaultOn=!1}},subsAvailable:function(){var e=this,t=e.player.mediaItem;return(!!e.overrideItem||t&&t.subtitleConnections&&t.subtitleConnections.length>0)&&!e.failedToLoad},updatePositions:function(){var e=this;e.resizeContainer();for(var t=0;e.currentSubtitles.length>t;t++){e.resizeSubtitle(e.currentSubtitles[t]);e.positionSubtitle(e.currentSubtitles[t])}var i=[];for(t=e.topToBottom.length-1;t>=0;t--){var n=e.topToBottom[t];e.deconflictSubtitle(n,i,!1);i.push(n);for(var a=0,o=0;e.subtitleMargins.length>o;o++)a=r(e.subtitleMargins[o],"top",a);var s=n.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===s.length){var l=-(Utils.getOffsets(s[0]).top-Utils.getOffsets(e.container).top-a);if(l>0){s[0].style.top=u(s[0].style.top,"px",l);for(var c=[],d=t;e.topToBottom.length>d;d++){e.deconflictSubtitle(e.topToBottom[d],c,!0);c.push(e.topToBottom[d])}}}}},deconflictSubtitle:function(e,t,i){for(var n=this,a=0;t.length>a;a++){var r=t[a],o=e.cueHTMLElement.getElementsByClassName("p_paragraph"),l=r.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===o.length&&1===l.length){var c=o[0],d=l[0],p=s(Utils.getOffsets(c),Utils.getOffsets(d)),f=n.leftToRight.indexOf(e)>n.leftToRight.indexOf(r),m=f?p.right:p.left,g=i?p.bottom:p.top;m>0&&g>0&&(g>m?c.style.left=f?u(c.style.left,"px",m):u(c.style.left,"px",-m):c.style.top=i?u(c.style.top,"px",g):u(c.style.top,"px",-g))}}return!0},resizeContainer:function(){var e=this,t=e.player.ui.UIinfoObject;if(isNaN(t.videoWidth)||isNaN(t.videoHeight)){e.container.style.width="100%";e.container.style.height="100%"}else{e.container.style.width=t.videoWidth+"px";e.container.style.height=t.videoHeight+"px"}e.container.style.marginLeft=t.videoX+"px";e.container.style.marginTop=t.videoY+"px"},positionSubtitle:function(e){var t=this;if(e){for(var i={top:0,bottom:0,left:0,right:0},n=0;t.subtitleMargins.length>n;n++){var a=t.subtitleMargins[n];i.top=r(a,"top",i.top);i.bottom=r(a,"bottom",i.bottom);i.left=r(a,"left",i.left);i.right=r(a,"right",i.right)}var s=e.cueHTMLElement.getElementsByClassName("p_paragraph");if(1===s.length){var l=s[0];l.style.position="relative";l.style.top="0px";l.style.left="0px";var u=Utils.getOffsets(l),c=o(u,Utils.getOffsets(t.container),Utils.sortSimple);c.bottom=-c.bottom;c.right=-c.right;var d,p,f=o(i,c,Utils.sortSimple);f.top>0?p=f.top:f.bottom>0&&(p=-Math.min(f.bottom,-f.top));f.left>0?d=f.left:f.right>0&&(d=-Math.min(f.right,-f.left));if(p){l.style.top=p+"px";f.top-=p;f.bottom+=p}if(d){l.style.left=d+"px";f.left-=d;f.right+=d}e.marginOverflows=f}}},resizeSubtitle:function(t){var n=this;if(t){var a=Utils.getOffset(n.container,"height"),r=Utils.getOffset(n.container,"width"),s=t.videoHeight,u=t.videoWidth;if(2>r/a)var d={width:r/u,height:a/s};else d={width:1,height:1};d.height=i(d.height,g.scale);d.width=i(d.width,g.scale);var f;if(t.linePadding)for(var m=c(t.padding.left,"px",d.width*n.sizeAdjustment),h=c(t.padding.right,"px",d.width*n.sizeAdjustment),y=document.getElementsByClassName("p_cueDirUniWrapper"),v=0;y.length>v;v++)TTMLParser.applyLinePadding(y[v],m,h);if(t.fontSize)for(f in t.fontSize)if(t.fontSize.hasOwnProperty(f)){var b=t.fontSize[f].slice(0,t.fontSize[f].indexOf("em")),C=parseFloat(b)*d.height;if(2>r/a){var E=.06*a/16;C=Math.max(C,E);var P=.1*a/16;C=Math.min(C,P)}if(n.player.isFullScreen){var T=p({width:r,height:a});C*=Math.sqrt(T)}C*=n.sizeAdjustment;C+="em";for(var S=t.cueHTMLElement.getElementsByClassName("p_paragraph"),_=0;S.length>_;_++)S[_].style.fontSize=C}var I=t.cueHTMLElement.getElementsByClassName("p_paragraph");for(v=0;I.length>v;v++){I[v].style.width="100%";I[v].style.height="100%";var k=I[v].getElementsByTagName("span"),w=[];for(_=0;k.length>_;_++)w.push(Utils.getOffsets(k[_]));var A=l(w),L=1;Device.trident&&(L=1.05);if(A){I[v].style.width=A.width*L+"px";I[v].style.height=A.height*L+"px"}}for(v=0;I.length>v;v++){var N=I[v],O=Utils.getOffsets(N),x=Utils.getOffsets(t.cueHTMLElement),D=t.cueHTMLElement.style,M={left:e(D.paddingLeft),right:-e(D.paddingRight),top:e(D.paddingTop),bottom:-e(D.paddingBottom)};x=o(x,M,function(e,t){return e+t});x.width=x.right-x.left;x.height=x.bottom-x.top;for(_=0;t.flexBoxAttr.length>_;_++){var R=t.flexBoxAttr[_];R.indexOf("align-items")>=0?R.indexOf("flex-start")>=0?N.style.marginTop="0px":R.indexOf("center")>=0?N.style.marginTop=x.height/2-O.height/2+"px":R.indexOf("flex-end")>=0&&(N.style.marginTop=x.height-O.height+"px"):R.indexOf("justify-content")>=0&&(R.indexOf("flex-start")>=0?N.style.marginLeft="0px":R.indexOf("center")>=0?N.style.marginLeft=x.width/2-O.width/2+"px":R.indexOf("flex-end")>=0&&(N.style.marginLeft=x.width-O.width+"px"))}}}},resizeFix:function(){var e=this,t=e.container;t&&(t.style.display="none")},resizeFixEnd:function(){var e=this;if(!e.player.ui.config.subtitles||!e.player.ui.config.subtitles.sizeAdjustment){e.sizeAdjustment=e.getDefaultSizeAdjustment();e.player.ui.subtitleSettingsPanel.indicateSize&&e.player.ui.subtitleSettingsPanel.indicateSize(e.sizeAdjustment)}var t=e.container;if(t&&e.showingSubs){t.style.display="block";e.updatePositions()}},load:function(e){var t,i=this;if(i.subsAvailable()&&(i.showingSubs||e)){var a=i.player.mediaItem,r=a.subtitleConnections;t=i.overrideItem;if(!t&&r){var o=r.filter(function(e){return e.kind==i.kind});t=o[0]||r[0]}if(t){if(t.live){t.enableDesnake=i.desnakeLiveSubs;t.enableReformat=i.reformatLiveSubs}i.currentSubItem=t;i.currentSubItem.loadSubtitles(n(i,"subtitlesLoaded"),n(i,"subtitlesFailed"))}}},subtitlesFailed:function(e){var t=this;t.failedToLoad=!0;t.showingSubs=!1;Utils.callErrorFunction(t.player,SMPError.SUBS_FAILED,e,!0);t.clearSubtitles();t.showLoadErrorMessage();t.player.ui.subtitleSettingsPanel.indicateSubsOff()},subtitlesLoaded:function(){var e=this;e.player.ui.UIinfoObject.subtitles=!0;e.player.ui.dispatchUIInfo();e.clearSubtitles()},onNewConnection:function(){var e=this;e.showingSubs&&!e.currentSubItem&&e.load()}};return h}(),Chromecast=function(){var e=function(e){var t=this;t.player=e;t.deviceId="";t.isAvailable=!1;t.isCasting=!1;t.isCastPlaying=!1;t.isAttemptingToCast=!1;t.isConnecting=!1;t.subtitlesEnabled=!1;t.needSetUp=!0;t.fakeTime=0;t.shortcutToProgramme=!1;t.newPlaylist=!1;t.postInterrupt=!1;t.duration=0;t.activeSession=!1;t.settings=t.player.config;t.shiftCentralControls=t.settings&&t.settings.ui&&t.settings.ui.chromecast&&t.settings.ui.chromecast.shiftCentralControls?!0:!1;t.eventCallbacks={subtitles:function(e){t.subtitlesEnabled=e.active;t.isCasting&&t.player.dispatch(e.active?{type:"ccSubsOn"}:{type:"ccSubsOff"})},volumechange:function(){t.isCasting&&t.ccVolume(t.player.muted?0:t.player.volume)},seeked:function(){},pause:function(){},playlistLoading:function(){if(t.isCasting){t.player.config.suppressItemKind=["ident"];t.newPlaylist=!0;t.interrupt()}},playlistEnded:function(){t.newPlaylist=!1},playlistLoaded:function(e){if(e.playlist&&e.playlist.allowContinuousCast){t.activeSession&&(t.player.config.suppressItemKind=["ident"]);t.newPlaylist=!0;t.needSetUp=!0}},canplay:function(){if(t.newPlaylist&&t.activeSession){t.needSetUp=!0;t.newPlaylist=!1;t.on()}if(t.shortcutToProgramme){t.player.pause();t.shortcutToProgramme=!1}}};return t};e.prototype={toggle:function(){var e=this;if(e.isCasting)e.off();else{e.isAttemptingToCast=!0;e.on()}e.player.dispatch({type:"chromecastToggle"})},on:function(){var e=this,t=e.player.mediaItem,i=e.player.Subtitles,n=e.player.playlist;e.player.minimise();e.player.pause();i.showingSubs&&i.clearSubtitles();e.player.ui.hideControlBar();Utils.asyncDelay(function(){e.player.hidePlayer();e.drawCastOverlay();if(!t.isProgramme){var i=n.firstProgramme;t=n.items[i];e.player.next();e.shortcutToProgramme=!0;e.player.config.suppressItemKind=["ident"]}e.player.dispatch({type:"chromecast",active:!0});e.player.dispatch({type:"ccRequest",data:{mediatorIdentifer:t.identifier}})})},off:function(){var e=this;e.player.dispatch({type:"chromecast",active:!1});e.player.dispatch({type:"notPlayingState"});e.player.dispatch({type:"ccCancel"})},interrupt:function(){var e=this;if(e.isCasting){e.player.dispatch({type:"chromecast",active:!1});e.removeByClass("p_castOverlay");e.isCastPlaying=!1;e.isCasting=!1;e.isAttemptingToCast=!1;e.isConnecting=!1;e.needSetUp=!0;e.player.dispatch({type:"ccInterrupt"})}},stopCastAttempt:function(){var e=this;e.stopCast()},connect:function(){var e=this;e.player.mediaPlayer.pause();e.isConnecting=!0;e.isAttemptingToCast=!0;e.player.mediaPlayer.style.left=HIDDEN_PLAYER_MINIMODE;e.drawCastOverlay();e.player.dispatch({type:"ccConnect"})},playing:function(e){var t=this;t.isAttemptingToCast=!1;t.isCastPlaying=!0;t.player.clearFakeTimer();t.needSetUp&&t.initialSetUp(e);if(e.currentTime){t.fakeTime=e.currentTime;t.player.fakeTimeupdateTimer=setInterval(function(){t.player.dispatch({type:"timeupdate",fake:!0});t.fakeTime++;t.player.ui.updateDisplayedProgress(t.fakeTime,!1)},1e3);t.drawCastOverlay();t.player.dispatch({type:"playingState"})}else t.player.dispatch({type:"ccStopMedia"})},paused:function(){var e=this;e.isCastPlaying=!1;e.player.clearFakeTimer();e.player.ui.updateDisplayedProgress(e.fakeTime,!1);e.drawCastOverlay();e.player.dispatch({type:"notPlayingState"})},buffering:function(){var e=this;e.player.clearFakeTimer();e.removeByClass("p_castIcon");e.player.dispatch({type:"ccBuffering"})},stopped:function(){var e=this;if(!e.postInterrupt)if(e.shortcutToProgramme){e.player.config.startTime=e.fakeTime;e.player.config.suppressItemKind=["ident"];e.player.pauseTimes.splice(0,0,e.player.config.startTime);e.player.loadPlaylist(e.player.playlist);e.player.startPlayback()}else{e.player.time=e.fakeTime;e.player.config.suppressItemKind=[]}e.stopCast()},finished:function(){var e=this;e.player.delayedDispatch({type:"ended",fakeEnded:!0});if(e.player.playlist.queuedPlaylist){e.isCastPlaying=!1;e.isCasting=!1;e.isAttemptingToCast=!1;e.isConnecting=!1;e.needSetUp=!0;e.player.dispatch({type:"notPlayingState"});e.removeByClass("p_castOverlay")}else{e.player.time=0;e.player.clearFakeTimer();e.postInterrupt=!1;e.stopCast()}},setCastPlayState:function(){var e=this;if(e.isCasting){if(e.isCastPlaying){e.isCastPlaying=!1;e.ccPause()}else e.ccPlay();return!0}return!1},initialSetUp:function(e){var t=this,i=t.player.Subtitles,n=1;t.duration=e.castDuration?Math.floor(e.castDuration):t.player.duration;!t.subtitlesEnabled&&!i.showingSubs||e.subtitlesEnabled||t.player.dispatch({type:"ccSubsOn"});t.player.volume=n;t.player.ui.showControlBar();t.needSetUp=!1},drawCastOverlay:function(){var e,t,i,n=this,a=n.player.ui,r=createElement("div","p_castOverlay"),o=createElement("div","p_messageDiv"),s=createElement("div","p_castIcon rippleEffect"),l=n.deviceId;n.removeByClass("p_castOverlay");a.showPoster();if(n.isConnecting){i=Language.ccConnectingTo;Utils.className(document.body,"CCisConnecting","CCisCasting CCisAttemptingToCast")}else if(n.isAttemptingToCast){i=Language.ccSelectDevice;l="";updateExistingSvg(s,"catcast"!==a.config.controls.chromecastMode?"chromecast":"catcast");Utils.className(document.body,"CCisAttemptingToCast","CCisCasting CCisConnecting")}if(n.isCasting){i=Language.ccCastingTo;r.onclick=function(){n.setCastPlayState()};n.isCastPlaying?updateExistingSvg(s,"pause"):updateExistingSvg(s,"play");Utils.className(document.body,"CCisCasting","CCisAttemptingToCast CCisConnecting")}e=createElement("p","p_castMessage",'<span class="p_text" aria-hidden="true"></span>',i);t=createElement("p","p_deviceMessage",'<span class="p_text" aria-hidden="true"></span>',l);o.appendChild(e);o.appendChild(t);r.appendChild(o);r.appendChild(s);a.container.appendChild(r);n.shiftCentralControls?Utils.className(r,"shiftCentralControls",""):Utils.className(r,"","shiftCentralControls")},removeByClass:function(e){var t=this,i=t.player.ui.container.getElementsByClassName(e);i.length&&i[0].parentNode.removeChild(i[0])},externalControlCheck:function(e){var t=this,i=t.player.Subtitles;if(e.subtitlesEnabled&&e.subtitlesEnabled!==t.subtitlesEnabled){t.subtitlesEnabled=e.subtitlesEnabled;t.subtitlesEnabled?i.on():i.off()}if(e.floatVolume&&e.floatVolume!==t.player.volume){t.player.volume=e.floatVolume||.7;t.player.dispatch({type:"volumechange",volume:t.player.volume,muted:t.player.muted})}},stopCast:function(){var e=this;if(!e.postInterrupt){e.isCastPlaying=!1;e.isCasting=!1;e.isAttemptingToCast=!1;e.isConnecting=!1;e.needSetUp=!0;e.player.dispatch({type:"notPlayingState"});e.player.dispatch({type:"ccDisconnected"});e.removeByClass("p_castOverlay");if(e.newPlaylist){e.postInterrupt=!0;return}if(e.player.playlist.allowContinuousCast)return;if(e.shortcutToProgramme){e.shortcutToProgramme=!1;return}e.player.clearFakeTimer();e.player.mediaPlayer.style.left="0px";e.player.ui.hidePoster();Utils.className(document.body,"","CCisCasting CCisConnecting CCisAttemptingToCast")}e.postInterrupt=!1},ccPlay:function(){var e=this;e.isCastPlaying=!0;e.player.dispatch({type:"ccPlay"})},ccPause:function(){var e=this;e.isCastPlaying=!1;e.player.dispatch({type:"ccPause"})},ccSeek:function(e){var t=this;if(t.isCasting){t.fakeTime=e;t.player.dispatch({type:"ccSeek",data:{seekTime:e}});return!0}return!1},ccVolume:function(e){var t=this;t.player.dispatch({type:"ccVolume",data:{floatVolume:e}})},updateConfig:function(e){var t=this;t.shiftCentralControls=e.chromecast&&e.chromecast.shiftCentralControls;var i=document.getElementsByClassName("p_castOverlay")[0];if(i){t.removeByClass("p_castOverlay");t.drawCastOverlay()}}};return e}(),PictureInPicture=function(){var e=function(e,t){var i=this;i.player=e;i.supported=!1;i.func=function(){t.player.dispatch({type:i.isPlayingInPicture()?"picInPicStarted":"picInPicStopped"})};i.addedListeners={};return i};e.prototype={isSupported:function(){var e=this,t=e.player.mediaPlayer;if("audio"==e.player.elType||"unknown"==e.player.elType){Utils.className(document.body,"","picInPic");e.supported=!1;return!1}var i=document.pictureInPictureEnabled&&"function"==typeof t.requestPictureInPicture,n="function"==typeof t.operaRequestDetachedView,a="function"==typeof t.webkitSupportsPresentationMode&&t.webkitSupportsPresentationMode("picture-in-picture"),r=i||a||n;if(r){Utils.className(document.body,"picInPic","");if(!e.addedListeners[t.id]){e.addedListeners[t.id]=!0;Utils.multiAddEventListener(t,"enterpictureinpicture leavepictureinpicture webkitpresentationmodechanged operadetachedviewchange",e.func)}}else Utils.className(document.body,"","picInPic");e.supported=r;return r},toggle:function(){var e=this,t=e.player.mediaPlayer;if(document.pictureInPictureEnabled&&document.exitPictureInPicture)document.pictureInPictureElement?document.exitPictureInPicture():t.requestPictureInPicture();else if(t.webkitSetPresentationMode)t.webkitSetPresentationMode("picture-in-picture"===t.webkitPresentationMode?"inline":"picture-in-picture");else if(t.operaRequestDetachedView)if(t.operaDetachedView)t.operaReleaseDetachedView();else if(e.player.isFullScreen){e.player.minimise();setTimeout(function(){t.operaRequestDetachedView()},1500)}else t.operaRequestDetachedView()},isPlayingInPicture:function(){var e=this;if(document.pictureInPictureEnabled&&document.pictureInPictureElement)return!0;if("function"==typeof e.player.mediaPlayer.operaRequestDetachedView&&e.player.mediaPlayer.operaDetachedView===!0)return!0;var t=e.player.els.video;return t.webkitPresentationMode&&"picture-in-picture"===t.webkitPresentationMode?!0:!1},exitPicInPic:function(){var e=this;if(e.isPlayingInPicture()){document.pictureInPictureElement&&document.exitPictureInPicture&&document.exitPictureInPicture();var t=e.player.els.video;t.webkitSetPresentationMode?t.webkitSetPresentationMode("inline"):t.operaReleaseDetachedView&&t.operaReleaseDetachedView()}}};return e}(),MarkersUI=function(){function e(e,t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=i?parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",":"0,0,0,",a=t?"1":"0.33";return"rgba("+n+a+")"}function t(e,t,i,n){Utils.multiAddEventListener(e,"click mouseup touchend keydown",t);n&&Utils.multiAddEventListener(e,"focus blur",n);i&&Utils.multiAddEventListener(e,"mouseover mouseout",i)
}function i(){return Math.random().toString(36).substr(2,10)}function n(e,t,i){e.trackAction("marker",t,{start:Math.floor(i.start),marker_type:i.type,id:i.identifier})}function a(e,t){return Utils.getActionFn(function(i,a){if("keydown"!=a.type||a.keyCode==KEY_SPACE||a.keyCode==KEY_ENTER){n(e.ui.player,i,t);if("touchend"!=a.type||e.currentlyOver&&e.currentlyOver._id==t._id)e.seekToChapterMarker(t);else{e.markerMouseOut(e.currentlyOver,!0);e.drawMarkerTip(t);e.markerMouseOver(t)}a.preventDefault&&a.preventDefault()}})}function r(e,t){return Utils.getActionFn(function(i){n(e.ui.player,i,t);e.seekToChapterMarker(e.currentlyOver)})}function o(e,t){return function(i){if("mouseover"==i.type){e.drawMarkerTip(t);e.markerMouseOver(t)}else e.markerMouseOut(t)}}function s(e,t){return function(i){var n="focus"==i.type;if(n){e.currentlyOver=t;e.drawMarkerTip(t)}else{e.currentlyOver=null;e.markerTip.style.display="none"}Utils.setOrUnsetClass(t,"p_highlighted",n);l(t.type)&&e.fillChapters()}}function l(e){return"chapter"===e||"programme"===e}function u(e){return"key"===e||"highlight"===e}function c(e){e&&e.length>0&&e.forEach(function(e){e.startFired=!1;e.endFired=!1})}function d(e,t){if(l(t.type)){e.firstChild.textContent=t.text?t.text:t.type;e.available=t.available!==!1;e.end=t.end}e.text=t.text;e.description=t.description;e.start=t.start;e.type=t.type;e.identifier=t.id}var p=5e3,f=73,m=26,g=44,h="rgb(25, 25, 25)",y="rgb(255, 255, 255)",v="rgba(178,178,178,0.6)",b="rgba(255,255,255,0.6)",C=function(e){var t=this;t.chapterLastDrawTime=0;t.ui=e;t.keyTipBottom=f;t.markerDisplayHeight=0;t.storedChapterMarkers=[];t.storedKeyMoments=[];return t};C.prototype={getDefaultLeftMargin:function(){var e=this;return e.ui.player.isFullScreen?0:16},testDrawMarkers:function(e){var t=this;if(t._markerData&&0!==t._markerData.length){if(t.ui.player.isLive){var i=Utils.now();if(e||i-t.chapterLastDrawTime>p){t.chapterLastDrawTime=i;t.updateMarkers()}}t.fillChapters()}},getCurrentChapter:function(){var e=this,t=e.ui.player.timeHelper.time;if(e._markerData){for(var i=e._markerData.length-1;i>=0;i--){var n=e._markerData[i]||{},a=n.start,r=n.end;if(l(n.type)&&t>=a&&(isNaN(r)||r>=t))return n}return null}},reportProgress:function(){for(var e,t,i=this,n=Math.round(2*i.ui.player.time),a=0;i._markerData.length>a;a++){var r=i._markerData[a];e=r.start;if(n==Math.round(2*e)&&!r.startFired){r.startFired=!0;i.ui.player.delayedDispatch({type:"markerStart",id:r.id},!1)}if(i._markerData.length>0&&!isNaN(r.end)){t=r.end;if(n==Math.round(2*t)&&!r.endFired){r.endFired=!0;i.ui.player.delayedDispatch({type:"markerEnd",id:r.id},!1)}}}},resetProgress:function(){c(this._markerData)},setMarkers:function(e){var t=this;t.resetStoredMarkers();if(e&&e.length){e.sort(Utils.sortByStart);for(var n=0;e.length>n;n++){var a=e[n];a.startFired=a.endFired=!1;a._id||(a._id=a.id||i())}}t._markerData=e;Utils.className(t.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");t.updateMarkers()},updateMarkers:function(){var e=this;if(e.markersHolder)if(e.ui.config.markers.hideBelowWidth>e.ui.container.offsetWidth||!e._markerData||0===e._markerData.length||e.ui.progressBar.getSeekBarOffsetWidth()<10||!e.ui.config.markers.enabled){Utils.className(e.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");e.ui.UIinfoObject.markersBarVisible=!1;e.ui.player.Subtitles.updatePositions();e.ui.dispatchUIInfo()}else{for(var t=Utils.getMarkerByType(e._markerData,e.ui.config.markers.suppressMarkerKinds,"chapter"),i=Utils.getMarkerByType(e._markerData,e.ui.config.markers.suppressMarkerKinds,"key"),n=0;e.storedChapterMarkers.length>n;n++)if(e.ui.player.timeHelper.earliestSeek>=e.storedChapterMarkers[n].end){var a=e.storedChapterMarkers.splice(n,1);e.markersHolder.removeChild(a[0])}if(t.length>0){for(var r=0;t.length>r;r++){t.length-1>r?(!t[r].end||t[r].end>t[r+1].start)&&(t[r].end=t[r+1].start):t[r].end||(t[r].end=1/0);e.ui.player.timeHelper.streamEnd>t[r].start&&t[r].end>e.ui.player.timeHelper.earliestSeek&&e.checkChapterMarker(t[r])}if(e.storedChapterMarkers.length>0){e.fillChapters();e.updateItemsDisplayed(e.storedChapterMarkers)}}for(var o=0;e.storedKeyMoments.length>o;o++)if(e.ui.player.timeHelper.earliestSeek>=e.storedKeyMoments[o].start){a=e.storedKeyMoments.splice(o,1);e.markersHolder.removeChild(a[0])}if(i.length>0){for(var s=0;i.length>s;s++)e.ui.player.timeHelper.streamEnd>i[s].start&&i[s].start>e.ui.player.timeHelper.earliestSeek&&e.checkKeyMoment(i[s]);e.storedKeyMoments.length>0&&e.updateItemsDisplayed(e.storedKeyMoments)}e.markerDisplayHeight=0;if(0===e.storedChapterMarkers.length)if(0===e.storedKeyMoments.length)Utils.className(e.ui.container,"","p_hasMarkers p_chapterOnly p_keyMomentOnly");else{e.markerDisplayHeight=m;Utils.className(e.ui.container,"p_hasMarkers p_keyMomentOnly");e.keyTipBottom=m}else if(0===e.storedKeyMoments.length){Utils.className(e.ui.container,"p_hasMarkers p_chapterOnly");e.markerDisplayHeight=g}else{Utils.className(e.ui.container,"p_hasMarkers");e.keyTipBottom=f;e.markerDisplayHeight=f}e.markersHolder.style.height=e.markerDisplayHeight+"px";e.ui.player.Subtitles.updatePositions();e.ui.dispatchUIInfo()}},checkChapterMarker:function(e){var i=this,n=Utils.getItemById(i.storedChapterMarkers,e._id);if(!n){n=createElement("div","p_chapterMarker",'<span class="p_chapterMarkerText"></span>');t(n,a(i,n),o(i,n),s(i,n));n._id=e._id;n.tabIndex="0";n.setAttribute("role","button");d(n,e);i.storedChapterMarkers.push(n)}var r=n,l=i.ui.player.timeHelper.timeToPercent(r.start)*i.ui.progressBar.getSeekBarOffsetWidth()+i.getDefaultLeftMargin(),u=i.ui.player.timeHelper.timeToPercent(r.end)*i.ui.progressBar.getSeekBarOffsetWidth()+i.getDefaultLeftMargin(),c=Math.max(0,u-l-1);r.style.left=l+"px";r.style.width=c+"px"},checkKeyMoment:function(e){var i=this,n=Utils.getItemById(i.storedKeyMoments,e._id);if(!n){n=createElement("div","p_keyMoment");n.appendChild(createElement("div","p_keyMomentSquare"));n.appendChild(createElement("div","p_timeTipTriangle p_keyMomentTipTriangle"));t(n,a(i,n),o(i,n),s(i,n));n._id=e._id;n.tabIndex="0";n.setAttribute("role","button");d(n,e);i.storedKeyMoments.push(n)}var r=i.ui.player.timeHelper.timeToPercent(n.start),l=r*i.ui.progressBar.getSeekBarOffsetWidth()+i.getDefaultLeftMargin()-7;n.style.left=l+"px"},updateItemsDisplayed:function(e){var t,i,n=this;if(e.length>0)for(var a=0;e.length>a;a++)if(!n.markersHolder.contains(e[a])){t=n.markersHolder.querySelectorAll(l(e[a].type)?".p_chapterMarker":".p_keyMoment");if(t.length){i=t[t.length-1];i.parentNode.insertBefore(e[a],i.nextSibling)}else n.markersHolder.appendChild(e[a])}},fillChapters:function(e){var t,i,n=this,a=n.ui.player.timeHelper.latestAllowableSeekTime;(null==e||0===e)&&(e=n.ui.player.timeHelper.time);for(var r=0;n.storedChapterMarkers.length>r;r++){var o=n.storedChapterMarkers[r],s=o==n.currentlyOver;if(r==n.storedChapterMarkers.length-1){t=e>=o.start&&o.end>=e;i=a>=o.start&&o.end>=a}else{t=e>=o.start&&o.end>e;i=a>=o.start&&o.end>a}i?n.fillLiveChapter(o,s):t?n.fillCurrentChapter(o,s):n.fillWholeChapter(o,s)}},fillCurrentChapter:function(t,i){var n,a,r,o,s,l,u=this;r=u.ui.player.timeHelper.time;n=Math.max(t.start,u.ui.player.timeHelper.earliestSeek);a=Math.min(t.end,u.ui.player.timeHelper.streamEnd);var c=(r-n)/(a-n)*100;if(i){o=y;s=b;l=h}else{o=e(u.ui.config.colour,!0);s=e(u.ui.config.colour,!1);l=u.ui.config.foreColour}u.applyBackgroundColor(t,o,s,c,l)},fillWholeChapter:function(e,t){var i=this;if(!e.available||e.start>i.ui.player.timeHelper.latestAllowableSeekTime){e.style.background=v;e.style.color=y}else if(t){e.style.background=y;e.style.color=h}else{e.style.background=h;e.style.color=y}},fillLiveChapter:function(t,i){var n,a,r,o,s,l,u,c,d=this;r=d.ui.player.timeHelper.time;o=d.ui.player.timeHelper.latestAllowableSeekTime;n=Math.max(t.start,d.ui.player.timeHelper.earliestSeek);a=Math.min(t.end,d.ui.player.timeHelper.streamEnd);var p=(o-n)/(a-n)*100;if(r>n&&a>=r){var f=(r-n)/(a-n)*100;if(i){s=y;l=b;u=v;c=h}else{s=e(d.ui.config.colour,!0);l=e(d.ui.config.colour,!1);u=v;c=d.ui.config.foreColour}d.applyBackgroundColorThree(t,s,l,u,f,p,c)}else{if(!t.available){d.fillWholeChapter(t,i);return}if(i){s=y;u=v;c=h}else{s=h;u=v;c=y}d.applyBackgroundColor(t,s,u,p,c)}},applyBackgroundColor:function(e,t,i,n,a){for(var r=["-webkit-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-moz-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-ms-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)","-o-linear-gradient(0deg, "+t+" "+n+"%, "+i+" "+n+"%)"],o=0;r.length>o;o++){var s=r[o];e.style.background=s;e.style.color=a}},applyBackgroundColorThree:function(e,t,i,n,a,r,o){for(var s=["-webkit-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-moz-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-ms-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)","-o-linear-gradient(0deg, "+t+" "+a+"%, "+i+" "+a+"%, "+i+" "+r+"%, "+n+" "+r+"%)"],l=0;s.length>l;l++){var u=s[l];e.style.background=u;e.style.color=o}},markerMouseOver:function(e){var t=this;t.currentlyOver=e;Utils.className(e,"p_highlighted");l(e.type)&&t.fillChapters()},markerMouseOut:function(e,t){var i=this;i.currentlyOver=null;if(e){Utils.className(e,"","p_highlighted");l(e.type)&&i.fillChapters();t||(i.markerTip.style.display="none")}},seekToChapterMarker:function(e){var t=this;if(e.start>t.ui.player.timeHelper.latestAllowableSeekTime){t.ui.player.time=t.ui.player.timeHelper.latestAllowableSeekTime;t.ui.updateDisplayedProgress(t.ui.player.timeHelper.latestAllowableSeekTime,!1)}else{t.ui.player.time=e.start;t.ui.updateDisplayedProgress(e.start,!1)}t.markerTip.style.display="none";t.currentlyOver&&t.markerMouseOut(t.currentlyOver)},drawMarkerTip:function(e){var t,i=this;if(e.description)t=e.description;else{if(!(u(e.type)||e.scrollWidth>e.offsetWidth)){i.markerTip.style.display="none";return}t=e.text||e.type}var n=i.markerTip,a=n.firstChild.textContent;n.style.display="block";n.style.width="auto";n.firstChild.textContent=t;n.start=e.start;n.type=e.type;i.markerTip.style.bottom=(u(n.type)?i.keyTipBottom:g)+"px";var r=parseFloat(e.style.left),o=Math.floor(e.offsetWidth/2),s=o+Math.floor(r),l=Math.floor(n.offsetWidth/2),c=s-l,d=!1;if(1>c){c=1;d=!0}if(!(a==t&&Math.abs(c-parseInt(i.markerTip.style.left,10))<10)){i.markerTip.style.left=c+"px";var p=l-o,f=p+o-Math.floor(i.chapterTipTriangle.offsetWidth/2);1>f?f=1:d&&(f=n.offsetWidth>=s?s-Math.floor(i.chapterTipTriangle.offsetWidth/2):n.offsetWidth-i.chapterTipTriangle.offsetWidth);i.chapterTipTriangle.style.left=f+"px"}},resetStoredMarkers:function(){var e=this;e._markerData=[];e.storedChapterMarkers=[];e.storedKeyMoments=[];if(e.markersHolder){for(;e.markersHolder.firstChild;)e.markersHolder.removeChild(e.markersHolder.firstChild);e.markerTip=createElement("div","p_chapterTip","<span></span>");e.chapterTipTriangle=createElement("div","p_timeTipTriangle");e.markerTip.appendChild(e.chapterTipTriangle);t(e.markerTip,r(e,e.markerTip));e.markersHolder.appendChild(e.markerTip)}},resetMarkerTip:function(){var e=this;e.markerTip&&(e.markerTip.style.display="none")}};return C}(),Language=function(){function e(e,i){var n=function(n){try{i(t(n))}catch(a){Utils.callErrorFunction(window.publicApi,SMPError.LANGUAGE_FAILED,e,!0)}};Utils.getXML(e,n,n,o,!0)}function t(e){for(var t=e.getElementsByTagName("message"),i=t.length,n={},a=0;i>a;a++){var r=t[a];n[r.getAttribute("name")]=r.textContent}return n}function i(e){return o.mappings[e]?o.mappings[e]:e}function n(){var e=o[o.code];if(e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);else r(o.code)}function a(e){return e?/^[\-a-zA-Z]{1,8}$/.test(e):!1}function r(t){if(a(t)){var i=function(e){o[t]=e;n();o.updated()},r=o.path.replace("{lang}",t);e(r,i)}}var o={code:"en",mappings:{"en-GB":"en","en-gb":"en","cy-GB":"cy","cy-gb":"cy","gd-GB":"gd","gd-gb":"gd","ga-GB":"ga","ga-gb":"ga","ru-uk":"ru",zh:"zh-hans","sr-latn":"sr"}};o.en={networkNotAvailable:"It appears your network is not available at this time.",defaultErrorMessage:"This content doesn't seem to be working.",codecErrorMessage:"The content is not available in a compatible codec",contentNotAvailableOnDevice:"This content is not currently available on this device.",contentPostAvailability:"This live stream has ended.",tryAgainLater:"Please try again later.",tryAgain:"Try Again",programmePreAvailability:"This programme is not available to play yet.",programmeRegionRestriction:"This content is not available in your location.",itemRevoked:"This content is no longer available",httpsOnlyFailure:"The content you want to play is not available over a secure connection. It may be available over a non-secure connection. Would you like to try this?",viewThisContentOnTheBBC:"More from the BBC",insufficientBandwidth:"Sorry, you don't have enough bandwidth to play this right now.",guidanceStateOff1Text:"Turn Parental Guidance Lock on",guidanceStateOff2Text:"Visit BBC Guidance to change settings.",guidanceStateOn1Text:"Turn Parental Guidance Lock off",guidanceStateOn2Text:"Visit BBC Guidance to change settings.",volumeControlDescription:"Use the arrow keys to increase and decrease the volume",audioToolTipBuffering:"Buffering",seekBarDescription:"Use the arrow keys to forward and rewind",audioToolTipSeekBarPrefix:"Playback time is",audioToolTipSeekBarSuffix:"of",audioToolTipVolumeMuted:"Muted",audioToolTipVolume1:"Volume level 1",audioToolTipVolume2:"Volume level 2",audioToolTipVolume3:"Volume level 3",audioToolTipVolume4:"Volume level 4",audioToolTipVolume5:"Volume level 5",audioToolTipVolume6:"Volume level 6",audioToolTipVolume7:"Volume level 7",audioToolTipVolume8:"Volume level 8",audioToolTipVolume9:"Volume level 9",audioToolTipVolume10:"Volume level 10",audioToolTipVolume11:"Volume level 11",toolTipEnterFullScreen:"Enter full screen",toolTipExitFullScreen:"Exit full screen",toolTipPause:"Pause",toolTipPlay:"Play",toolTipPlayAgain:"Play this again",toolTipSubtitlesOn:"Turn subtitles on",toolTipSubtitlesOff:"Turn subtitles off",toolTipClosedCaptionsOn:"Turn closed captions on",toolTipClosedCaptionsOff:"Turn closed captions off",toolTipEmbed:"Get embed code",toolTipMute:"Mute",toolTipUnmute:"Unmute",toolTipCTAPlay:"Play {title}",toolTipFrameMedia:"{title} Media",toolTipChromecast:"Cast this programme",toolTipStopChromecast:"Stop casting",seekBarName:"Seek bar",toolTipPicInPic:"Open Picture in Picture mode",toolTipStopPicInPic:"Exit Picture in Picture mode",openSubtitlesMenuAndTurnOnSubs:"Turn subtitles on and open subtitles settings menu",openSubtitlesMenu:"Open subtitles settings menu",closeSubtitlesMenu:"Close subtitles settings menu",subtitles:"Subtitles",openClosedCaptionsMenuAndTurnOnCC:"Turn closed captions on and open closed captions settings menu",openClosedCaptionsMenu:"Open closed captions settings menu",closeClosedCaptionsMenu:"Close closed captions settings menu",closedCaptions:"Closed Captions",off:"OFF",on:"ON",useSmallestFontSize:"Use font size: Smallest",useSmallFontSize:"Use font size: Small",useMediumFontSize:"Use font size: Medium",useLargeFontSize:"Use font size: Large",useLargestFontSize:"Use font size: Largest",aa:"Aa",playbackSettingsHeading:"Playback settings",autoplaySettingHeading:"Autoplay",autoplaySettingSubheading:"Play next item automatically",openPlaybackSettingsMenu:"Open playback settings menu",closePlaybackSettingsMenu:"Close playback settings menu",openPlaybackSettingsMenuNew:"Open playback settings menu for autoplay and video quality settings",qualitySettingHeading:"Video quality",qualityPanelLowRowHeading:"Low",qualityPanelMediumRowHeading:"Medium",qualityPanelHighRowHeading:"Highest available",qualityPanelHighRowSubtitle:"Automatically selects the best quality available",autoplaySettingGenericLabel:"Autoplay. Play next item automatically",qualitySettingOpenHighSelected:"Video quality. Highest available is currently selected. Open video quality settings",qualitySettingOpenMediumSelected:"Video quality. Medium quality is currently selected. Open video quality settings",qualitySettingOpenLowSelected:"Video quality. Low quality is currently selected. Open video quality settings",qualitySettingOpenUnavailable:"Currently unavailable",qualitySettingOpenUnavailableAccessible:"Video quality settings are currently unavailable",qualitySettingInfo:"Video quality options",qualitySettingLowSelect:"Low quality",qualitySettingLowSelected:"Low quality selected",qualitySettingMediumSelect:"Medium quality",qualitySettingMediumSelected:"Medium quality selected",qualitySettingHighSelect:"Highest quality available",qualitySettingHighSelected:"Highest quality available selected",ccSelectDevice:"Select casting device...",ccConnectingTo:"Connecting to",ccCastingTo:"Casting to",errorFlashPlayerNotInstalled:"You need to install Flash Player to play this content.",errorFlashIsNeeded:"Sorry, you need Flash to play this.",enableFlash:"Enable it in your browser or {link}.",enableFlashShort:"Enable it or {link}.",downloadFlashLink:"download Flash Player here",errorUnsupported:"Your device is not currently supported",errorCantPlayInBrowser:"Sorry, this won't play in your web browser.",useMediaPlayerApp:"Use BBC Media Player app",pgHeader:"Parental Guidance Lock",pgAgeConfirmation:"I am aged 16 or over",pgClose:"Close pop up",pgContinue:"Continue",pgPasswordValidationError:"Please confirm your age before continuing",pgAriaAgeConfirmCheckBox:"Age confirmation check box. Checked.",pgAriaAgeConfirmCheckBoxUnchecked:"Age confirmation check box. Check to confirm you are sixteen or over.",pgTurnOnParentalGuidance:"Turn on the Parental Guidance Lock?",pgInfoPlusDownload:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose 'Turn On'. To continue without Parental Guidance choose 'Download'.</p>",pgInfoPlusPlay:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.<p>To set up your PIN choose 'Turn On'. To continue without Parental Guidance choose 'Play'.</p>",pgInfo:"lets you set up a PIN to control access to Guidance-labelled BBC content on your chosen browser.",pgTurnOn:"Turn On",pgEnterPIN:"Please enter a four-digit PIN",pgActivateInfo:"You will need your PIN to play Guidance-labelled content",pgPINValidationError:"Your PIN must be four digits",pgAriaPINEntryDescription:"PIN entry text field",pgAriaPINPrompt:"Please enter a valid four-digit PIN",pgEnterPINPrompt:"Please enter your four-digit PIN to continue",pgManageYourPIN:"Manage your PIN",pgUnlock:"Unlock",pgIncorrectPIN:"Incorrect PIN. Please try again",pgDownload:"Download",pgActivate:"Activate",newPgTurnOnParentalGuidance:"Turn on Parental Guidance Lock?",newPgTurnOnParentalGuidancePINsection:"Turn on Parental Guidance Lock",newPgTurnOnParentalGuidanceInsertPIN:"Parental Guidance Lock",newPgTurnOn:"Turn on PG Lock",newToolTipPlay:"Play without PG Lock",findOutMore:"Find out more",notSuitableForChildMessage:"This programme may not be suitable for children. Turn on PG Lock and we'll ask you to set up a PIN to control who can watch BBC content with a Guidance label on this browser.",newPgAgeConfirmationUnder16:"I've got permission.",newUnder16WithPermission:"You're signed in as someone who's under 16. So you need permission from a parent or guardian to play this.",newPgPlay:"Play",newPgEnterPIN:"Please choose a four-digit PIN.",newPgPINvalidationError:"Your PIN must be four digits long.",newPgIncorrectPIN:"Wrong PIN. Please try again.",newPgManageYourPIN:"Manage your lock",newPgEnterPINprompt:"Please enter your four-digit PIN.",newPgActivateInfo:"You'll need this to play any content with a Guidance label.",newPgEnterPINinfo:"This programme has a Guidance label.",newAgeConfirmationTitle:"Guidance",pgUnder16PermissionValidationError:"Please confirm you have permission before continuing",skipBack:"Skip back {seconds} seconds",skipForward:"Skip forward {seconds} seconds",listenFromStart:"Listen from start",goToLivePoint:"Go to live point",previousItem:"Previous item",nextItem:"Next item",popOutPlayer:"Pop-out player"};o.get=function(e,t){var i=o[e];if(!i)return"";for(var n in t)if(t.hasOwnProperty(n)){var a=t[n]||"";i=i.replace("{"+n+"}",a)}return i};o.init=function(e,t){var a=e.lang;o.path=e.path.replace(/\/\/.*?\//,"/");o.code=i(a);var r=o.en;for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);n();o.updated=t};return o}(),ScreenReader=function(){function e(e){a=document.getElementById("p_alert");a.innerHTML="<p></p>";a.firstChild.textContent=e;a.style.display="block"}function t(t){clearTimeout(n);n=setTimeout(e,r,t)}function i(e){if(e){clearTimeout(n);if(a){a.innerHTML="";a.style.display="none"}}else t(Language.audioToolTipBuffering)}var n,a,r=500,o={alert:t,buffering:i};return o}(),ParentalGuidance=function(){function e(e,t,i){var n=document.getElementById(t),a=function(){n.style.transition="0.3s";i?n.style.backgroundColor=e.player.config.ui.guidance.pgColour:n.style.color=e.player.config.ui.guidance.pgColour},r=function(){n.style.transition="0.3s";i?n.style.backgroundColor=e.player.config.ui.guidance.pgBackgroundColour:n.style.color="#ffffff"};n.onmouseover=n.onfocus=a;n.onmouseout=n.onblur=r}function t(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function n(e,i){L.push(e);e.setAttribute("tabindex","0");e.onkeydown=function(i){i=i||window.event;var n=i.keyCode||i.which;if(9==n||13==n){t(i);if(9==n){var a=L.length-1;A=i.shiftKey?0===A?a:A-1:A===a?0:A+1;setTimeout(function(){L[A].focus()},200)}else setTimeout(function(){x=!0;e.click()},200)}};if(i){A=L.length-1;e.focus()}}function a(){A=0;L=[];n(I)}function r(e,t,i){t&&i&&i.isUnder16&&(N=!1);var n="";if(N){e.style.backgroundPosition="center";n=Language.pgAriaAgeConfirmCheckBox}else{e.style.backgroundPosition="-30px";n=Language.pgAriaAgeConfirmCheckBoxUnchecked}e.setAttribute("aria-label",n);e.textContent=e.innerText=n}function o(e,t,n,a){var r=document.getElementById("pgErrorMessage"),o=document.getElementById("needPINinfo");if(r)i(r);else{r=document.createElement("div");r.id="pgErrorMessage";var s=r.style;s.width=T.style.width;s.backgroundColor=a.player.config.ui.guidance.pgSeparatorColour;s.marginTop="15px";s.marginBottom="5px";s.position="relative"}n?e.insertBefore(r,e.firstChild):o?o.appendChild(r):e.appendChild(r);var l=document.createElement("div"),u=l.style;u.fontSize="14px";u.position="relative";u.width="100%";u.color="#ffffff";u.fontSize="11px";u.textAlign="center";u.paddingTop=u.paddingBottom="10px";u.lineHeight="23px";if(a.ui.config.useHighResIcons){var c=document.createElement("div");c.innerHTML=t;c.style.display="inline-block";c.style.marginLeft="5px";var d=document.createElement("div"),p=d.style;p.width=p.height="18px";p.display="inline-block";var f=Utils.generateSVG(18,18,"guidance-alert","p_guidance-alertIcon");f.style.top="4px";d.appendChild(f);l.appendChild(d);l.appendChild(c)}else l.innerHTML='<span style="display:inline-block;  background-image: url(//emp.bbci.co.uk/emp/assets/2.0.23/alert-color.png); background-repeat: no-repeat; background-size: 100% 100%; margin-right:5px; width:15px; height:13px;"></span>'+t;r.appendChild(l)}function s(e,i){if(P)return!1;e.nowShowing=!0;document.body.style.cursor="default";P=document.createElement("div");P.setAttribute("tabindex","0");P.id="parentalGuidanceBackground";P.className="smpPG p_parentGuidanceBackground";T=document.createElement("div");T.id="guidancePopup";T.style.backgroundColor=e.player.config.ui.guidance.pgBackgroundColour;T.setAttribute("role","alertdialog");T.setAttribute("aria-labelledby","pgHeaderTitle");T.className="smpPG p_parentalGuidancePopup";i.appendChild(P);i.appendChild(T);T.onkeydown=function(t){t=t||window.event;var i=t.keyCode||t.which;27===i&&e.close(!1)};var n=document.createElement("div");n.id="guidanceContainer";T.appendChild(n);var a=document.createElement("div");a.id="pgHeaderTitle";n.appendChild(a);k=document.createElement("span");k.innerHTML=Language.pgHeader;k.id="pgHeader";k.style.color=e.player.config.ui.guidance.pgColour;a.appendChild(k);S=document.createElement("div");S.id="guidanceBody";n.appendChild(S);_=document.createElement("div");_.id="guidanceFooter";T.appendChild(_);I=document.createElement("a");I.setAttribute("aria-label",Language.pgClose);I.id="pgExit";var r=I.style;I.title=Language.pgClose;if(e.ui.config.useHighResIcons){var o=Utils.generateSVG(18,18,"gel-exitLink","p_gel-exitLinkIcon");I.appendChild(o)}else r.backgroundImage="url(//emp.bbci.co.uk/emp/assets/2.0.23/GEL_Remove_icon.png)";r.backgroundRepeat="no-repeat";T.appendChild(I);var s=!1;setTimeout(function(){s=!0},500);I.onclick=function(i){if(s){i=i||window.event;t(i);e.player.trackAction(I,x?"key_press":"click");x=!1;e.close(!1)}};return!0}function l(e,t){var i=document.createElement("div"),n=i.style;n.marginTop="-1px";n.position="absolute";n.width="100%";n.height="1px";n.backgroundColor=e.player.config.ui.guidance.pgSeparatorColour;t.appendChild(i)}function u(t,i){function a(){if(l){t.player.trackAction(r.id,x?"key_press":"click");x=!1;u()}}var r=document.createElement("a");r.id=i.id;r.innerHTML=i.text;r.setAttribute("aria-label",i.text+" button");var o=r.style;o.cursor="pointer";try{o.display="table"}catch(s){o.display="block"}o.lineHeight="3.5";o.width="100%";o.fontSize="14px";o.color="#ffffff";_.appendChild(r);o.backgroundColor=t.player.config.ui.guidance.pgBackgroundColour;e(t,i.id,!0);var l=!1;setTimeout(function(){l=!0},500);var u=i.clickFunction;r.onclick=a;n(r,i.focus);return r}function c(e,t,n){i(_);l(e,_);var a=u(e,t);if(n){a.style.borderBottom="1px solid "+e.player.config.ui.guidance.pgSeparatorColour;u(e,n)}}function d(e,t){i(S);a();var s=document.createElement("div");s.id="guidanceMessage";var l=s.style;l.marginTop=e.ui.config.useHighResIcons?"0":"15px";l.marginBottom="5px";l.width="100%";l.position="relative";l.fontSize="13px";S.appendChild(s);p("newAgeConfirmationTitle");if(e.ui.config.useHighResIcons){var u=document.createElement("div");u.id="guidanceG";u.style.display="inline-block";var d=Utils.generateSVG(44,44,"guidance","p_guidanceIcon");d.style.top="10px";u.appendChild(d);s.appendChild(u)}else{var m=document.createElement("div");m.id="guidanceG";var g=m.style;g.display="inline-block";g.margin="auto";g.borderRadius="50%";g.width=g.height="15px";g.backgroundColor="red";g.position="relative";g.top="-2px";g.fontSize="12px";s.appendChild(m);var h=document.createElement("span");h.innerHTML="G";var y=h.style;y.lineHeight="normal";y.position="relative";y.left="-0.5px";y.top="1px";y.color="#ffffff";m.appendChild(h);s.appendChild(m)}var v=document.createElement("span");v.id="guidanceText";v.innerHTML=e.isUnder16?t+"</br></br>"+Language.newUnder16WithPermission:t;y=v.style;y.left="0px";y.top="16px";y.marginLeft=e.ui.config.useHighResIcons?"0":"5px";y.lineHeight="16px";y.color="#b2b7c4";s.appendChild(v);var b=document.createElement("div");b.id="ageConfirm";var C=b.style;C.width="100%";C.height="57px";C.position="relative";C.fontSize="14px";C.color="#ffffff";C.display="-ms-inline-flexbox";C.justifyContent="center";S.appendChild(b);var E=document.createElement("button");E.id="ageConfirmCheck";var P=E.style;P.background="url(//emp.bbci.co.uk/emp/assets/2.0.23/tick.png) no-repeat center";P.backgroundPosition="-30px";P.position="absolute";P.top="16px";P.height=P.width="25px";P.cursor="pointer";P.backgroundColor="#ffffff";P.borderWidth="0";P.textIndent="-9999px";P.whiteSpace="nowrap";P.overflow="hidden";b.appendChild(E);n(E,!0);r(E,!0,e);var T=document.createElement("span");T.innerHTML=e.isUnder16?Language.newPgAgeConfirmationUnder16:Language.pgAgeConfirmation;T.style.position="relative";T.style.top="20px";T.style.marginLeft="35px";b.appendChild(T);var _=!1;setTimeout(function(){_=!0},500);E.onclick=function(){if(_){N=!N;r(E)}};var I=function(){if(e.isUnder16&&N){e.player.dispatch({type:"setGuidanceSkipped",skipped:!0});e.player.dispatch({type:"setUnder16Permission",hasPermission:!0});e.close(!0)}else if(N)f(e);else{var t=e.isUnder16?Language.pgUnder16PermissionValidationError:Language.pgPasswordValidationError;o(s,t,!1,e)}},k=e.isUnder16?Language.newPgPlay:Language.pgContinue;c(e,{id:"pgAgeContinue",text:k,clickFunction:I})}function p(e){var t=document.getElementById("pgHeader");t.innerHTML=Language[e]}function f(t){i(S);a();var r=document.createElement("div");r.setAttribute("role","alertdialog");r.setAttribute("aria-labelledby","pgInfoHeader");r.setAttribute("aria-describedby","pgInfo");r.style.marginBottom="24px";S.appendChild(r);p("newPgTurnOnParentalGuidance");if(O)var o="pgInfo",s="pgUnlock";else{var l=t._intent;if("download"==l){o="pgInfoPlusDownload";s="pgDownload"}else if("play"==l){o="pgInfoPlusPlay";s="newToolTipPlay"}else{o="pgInfo";s=l}}var u=document.createElement("div");u.id="infoLinkContainer";var d=document.createElement("div");d.style.color="#b2b7c4";var f=Language.notSuitableForChildMessage+'</br> </br>  <a id="pgLink" target="_blank" style="color:#ffffff; text-decoration:none; font-size:0.9em;" href="//www.bbc.co.uk/iplayer/guidance"> <div style="display:inline-block; margin-right: 5px; color:black; font-weight:bold; width:13px; height:13px; background-color:white; border-radius:50px;">i</div>'+Language.findOutMore+"</a> ",m=document.createElement("div");m.id="pgInfo";m.style.fontSize="13px";m.style.color="#868686";m.style.marginTop="35px";r.appendChild(m);m.appendChild(u);u.style.margin=" 0 auto";u.appendChild(d);d.innerHTML=f;var g=document.getElementById("pgLink");g.setAttribute("aria-label",Language.findOutMore);g.style.outline="none";d.style.display="inline-block";u.style.textAlign="center";var y=m.getElementsByTagName("p");if(y)for(var v=0;y.length>v;v++){y[v].style.color="#868686";y[v].style.fontSize="13px"}var b=document.getElementById("pgLink"),C=!1;setTimeout(function(){C=!0},500);b.onclick=function(){return C};n(b,!0);var E=function(){if(C){t.player.dispatch({type:"setGuidanceSkipped",skipped:!0});h(t)}},P=function(){if(C){t.player.dispatch({type:"setGuidanceSkipped",skipped:!0});t.close(!0)}},T={id:"pgTurnOn",text:Language.newPgTurnOn,clickFunction:E},_={id:"toolTipPlay",text:Language[s],clickFunction:P};c(t,T,O?null:_);e(t,"pgLink")}function m(e){var t=document.createElement("div");t.id="pinEntry";t.style.width="100%";t.style.height="40px";t.style.marginBottom="20px";e.appendChild(t);var i=document.createElement("input"),n=i.style;i.setAttribute("maxlength",4);n.letterSpacing="5px";n.display="block";n.margin="0 auto";n.height="100%";n.width="60%";n.padding="0px";n.resize="none";n.color="#868686";n.fontSize="30px";n.textAlign="center";i.setAttribute("type","password");i.pattern="[0-9]*";t.appendChild(i);return i}function g(e,t,i){var n=!1,a=function(a){a=a||window.event;var r=a.keyCode||a.which;if(13===r&&n){i.player.trackAction(e.id,"key_press");setTimeout(t,300)}};setTimeout(function(){n=!0},400);e.addEventListener("keyup",a)}function h(e){i(S);a();p("newPgTurnOnParentalGuidancePINsection");var t=document.createElement("div");t.id="activatePIN";t.style.marginTop="35px";t.style.fontSize="14px";t.style.color="#ffffff";S.appendChild(t);var r=document.createElement("span");r.innerHTML=Language.newPgEnterPIN;r.style.fontSize="14px";r.style.color="#ffffff";t.appendChild(r);var s=document.createElement("div");s.innerHTML='<span style="color:#b2b7c4;">'+Language.newPgActivateInfo+"</span>";s.style.marginTop="10px";s.style.marginBottom="24px";s.style.fontSize="14px";s.style.color="#868686";S.appendChild(s);w=m(S);w.setAttribute("aria-label",Language.pgAriaPINEntryDescription+"."+Language.pgAriaPINPrompt);n(w,!0);var l=function(){if(/^\d{4}$/.test(w.value)){var t=w.value;e.player.dispatch({type:"setPIN",PIN:t});e.close(!O)}else{w.value="";o(s,Language.newPgPINvalidationError,!1,e);w.focus()}},u=C(e._intent,"pgActivate");g(w,l,e);c(e,{id:"pgActivate",text:Language[u],clickFunction:l})}function y(t,i,n){var a=document.createElement("div");a.style.marginBottom="25px";a.style.width="100%";a.style.height="15px";
i.appendChild(a);var r=document.createElement("a");r.setAttribute("target","_blank");r.setAttribute("href","//www.bbc.co.uk/iplayer/guidance");r.id="manageLock";r.innerHTML=n;r.style.color="#ffffff";r.style.textDecoration="none";r.style.fontSize="12px";a.appendChild(r);e(t,"manageLock");return r}function v(e){i(S);a();p("newPgTurnOnParentalGuidanceInsertPIN");var t=document.createElement("div"),r=document.createElement("div"),o=document.createElement("span"),s=document.createElement("div");s.id="needPINinfo";t.id="enterPIN";o.innerHTML=Language.newPgEnterPINprompt;t.style.marginTop=t.style.paddingBottom="16px";t.style.width="100%";t.style.position="relative";t.style.fontSize=o.style.fontSize="14px";o.style.color="#ffffff";t.style.marginTop="5px";S.appendChild(t);t.appendChild(r);r.appendChild(o);t.appendChild(s);s.innerHTML=Language.newPgEnterPINinfo;s.style.color="rgb(134, 134, 134)";s.style.marginTop="15px";w=m(S);w.setAttribute("aria-label",Language.pgAriaPINEntryDescription+"."+Language.newPgEnterPINprompt);n(w,!0);var l=y(e,S,Language.newPgManageYourPIN);n(l);l.onclick=function(){return u};var u=!1;setTimeout(function(){u=!0},500);var d=function(){if(u){var t=w.value;e.isUnder16&&e.player.dispatch({type:"setUnder16Permission",hasPermission:!0});e.player.dispatch({type:"verify",verifyPIN:t,lockClicked:O})}};g(w,d,e);var f=C(e._intent,"pgUnlock");c(e,{id:"pgTurnOff",text:Language[f],clickFunction:d})}function b(){clearTimeout(D);D=setTimeout(E,100)}function C(e,t){return O?t:"download"==e?"pgDownload":"play"==e?"toolTipPlay":e}function E(){if(P){var e=P.style;e.left=e.top="-500px";e.height=e.width="5000px"}if(T){var t=Math.floor(window.innerWidth/2-T.offsetWidth/2);T.style.left=t+"px";var i=window.innerHeight-T.offsetHeight;if(window.innerHeight>=T.offsetHeight)var n=Math.floor(i/2);else n=2;T.style.marginTop=T.style.marginLeft="0px";T.style.top=n+"px"}}var P,T,S,_,I,k,w,A,L,N,O,x,D,M=function(e,t){var i=this;i.ui=e;i.player=t;i.nowShowing=!1;L=[];N=!1;i.isOver16=t.config.over16;i.isUnder16=t.config.under16;i.isOver16&&i.isUnder16&&(i.isOver16=!1);return i};M.prototype={showInPlayerGuidance:function(e,t){var i=this;if(e){O=e.lockClicked;i._intent=e.intent||"play"}var n=i.player.config.guidance,a=n.guidanceSkipped;if(s(i,t)){n.hasGuidancePIN&&n.isGuidanceLocked&&!n.under16permissionConfirmed?v(i):O&&a||i.isOver16?f(i):d(i,e.guidance);window.addEventListener("resize",E);window.addEventListener("orientationchange",b)}},guidanceLock:function(){var e=this;e.player.dispatch({type:"guidanceLocked",locked:!0})},verified:function(e){var t=this;if(e.isCorrect)t.close(!O);else{w.value="";o(k,Language.newPgIncorrectPIN,!1,t);w.focus()}},close:function(e,t){var i=this;i.nowShowing=!1;if(P){P.parentNode.removeChild(P);P=void 0}if(T){T.parentNode.removeChild(T);T=void 0}if(!t){var n=!1;if(i.player.guidanceOk){n=!0;e&&i.player.startPlayback()}i.player.delayedDispatch({type:"guidanceClosed",success:n})}window.removeEventListener("resize",E);window.removeEventListener("orientationchange",b)}};return M}(),ToggleButton=function(){function e(e,i,n,a){var r=e._toggleNode=document.createElement("div");n&&(r.id=n);r.className=a?"p_toggle "+a:"p_toggle";r.setAttribute("role","checkbox");r.setAttribute("aria-checked","false");r.setAttribute("aria-label",i);r.tabIndex=0;var o=e._toggleText=document.createElement("div");o.className="p_toggleText";o.textContent="OFF";var s=document.createElement("div");s.className="p_toggleSlot";var l=document.createElement("div");l.className="p_toggleSlider";var u=document.createElement("div");u.className="p_tick";l.appendChild(u);s.appendChild(l);r.appendChild(o);r.appendChild(s);t(e,r);return r}function t(e,t){t.addEventListener("click",function(){e.disabled||e.flip("click")});t.addEventListener("keyup",function(t){if(!e.disabled){var i=t.keyCode;(32==i||13==i)&&e.flip("keyup")}})}function i(e,t){for(var i=0;e.changeListeners.length>i;i++)e.changeListeners[i](t)}var n=function(t,i,n,a,r){this.ui=t;r&&(this.statsLabels=r);this.changeListeners=[];this.disabled=!1;this._on=!1;e(this,i,n,a)};n.prototype={getDomNodes:function(){return[this._toggleNode]},flip:function(e){if("true"==this._toggleNode.getAttribute("aria-checked")){i(this,"turningOff");this.statsLabels&&this.ui.player.trackAction(this.statsLabels.off,e)}else{i(this,"turningOn");this.statsLabels&&this.ui.player.trackAction(this.statsLabels.on,e)}},setOn:function(e){this._toggleNode.setAttribute("aria-checked","true");Utils.className(this._toggleNode,"p_toggleOn");this._toggleText.textContent=Language.on;this._on=!0;e&&this._toggleNode.setAttribute("aria-label",e)},setOff:function(e){this._toggleNode.setAttribute("aria-checked","false");Utils.className(this._toggleNode,"","p_toggleOn");this._toggleText.textContent=Language.off;this._on=!1;e&&this._toggleNode.setAttribute("aria-label",e)},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},attachChangeListener:function(e){this.changeListeners.push(e)},updateLanguage:function(e){this._toggleNode.setAttribute("aria-label",e);this._toggleText.textContent=this._on?Language.on:Language.off}};return n}(),SubtitleSettingsPanel=function(){function e(e){var i=document.createElement("div");i.id="p_subtitleSettingsContainer";i.className="p_dontCloseSettingsPanel";Utils.multiAddEventListener(i,"focusout blur",function(t){var n=t.relatedTarget;null!==n&&!i.contains(n)&&Utils.hasClass(document.body,"nonPointerFocus")&&e.closePanel();e.hasFocus=!1},!0);Utils.multiAddEventListener(i,"focusin focus",function(){e.hasFocus=!0},!0);var n=document.createElement("div");n.className="p_subtitleSettingsMask";i.appendChild(n);var a=document.createElement("div");a.className="p_subtitleSettingsBox";i.appendChild(a);var o=e.subsToggleLabel=document.createElement("div");o.className="p_subsToggleLabel";o.textContent=e.strings.type;a.appendChild(o);var s=e.subtitleToggle=new ToggleButton(null,e.strings.type,null,"p_subsToggle");s.disable();s.attachChangeListener(function(t){if("turningOff"==t){e.ui.player.Subtitles.off();e.ui.player.trackAction("subtitles_off","subtitles_toggle");setTimeout(function(){e.ui.subtitlesButton.focus();e.closePanel()},500)}else{e.ui.player.Subtitles.on();e.ui.player.trackAction("subtitles_on","subtitles_toggle")}});appendChildren(a,s.getDomNodes());var l=document.createElement("div");l.className="p_downArrow";i.appendChild(l);var u=document.createElement("div");u.className="p_sizingButtonsContainer";a.appendChild(u);for(var c=0;r.length>c;c++){var d=r[c].split(":");d[1]=+d[1];var p=t(e,d[0],d[1]);e.sizeButtons.push(p);u.appendChild(p)}var f=e.sizeIndicator=document.createElement("div");f.id="p_subtitleSizeIndicator";a.appendChild(f);return i}function t(e,t,i){function n(){e.setSize(i);clearTimeout(e.ui.idleTimeoutInterval);var t=Utils.getOffset(e.ui.player.mediaContainer,"width"),n=Utils.getOffset(e.ui.player.mediaContainer,"height");clearTimeout(e.recordSizeTimeout);e.recordSizeTimeout=setTimeout(function(){e.ui.player.trackAction("user_selected_sub_size",i,{player_width:t,player_height:n})},1e4)}var a=document.createElement("button");a.id="p_subtitleSizeButton_"+t;a.className="p_subtitleSizeButton p_button font-family-sans";a.disabled=!0;a.setAttribute("aria-pressed","false");a.setAttribute("data-sizeName",t);a.setAttribute("aria-label",e.strings[t]);a.setAttribute("data-size",i);var r=document.createElement("div");r.textContent=e.strings.aa;a.appendChild(r);a.addEventListener("click",n);return a}function i(e,t){return Utils.getActionFn(function(i,n){if(e.subtitleSettingsPanelShowing)e.closePanel();else{e.showPanel();if(!t.player.Subtitles.showingSubs){setTimeout(function(){e.indicateSubsOn()},100);setTimeout(function(){t.player.Subtitles.on();t.player.trackAction("subtitles_on","control_bar_button")},300);setTimeout(function(){e.subtitleToggle.enable()},1e3)}t.resetIdleTimeout(n)}})}function n(e,t){e.openCloseButton.title=t;e.openCloseButton.setAttribute("aria-label",t);var i=e.openCloseButton.getElementsByClassName("p_hiddenElement")[0];i.innerHTML=t}function a(e){e.subtitleSettingsPanelShowing?n(e,e.strings.closePanel):e.ui.player.Subtitles.showingSubs?n(e,e.strings.openPanel):n(e,e.strings.openPanelAndOn)}var r=["useSmallestFontSize:0.5","useSmallFontSize:0.6","useMediumFontSize:0.67","useLargeFontSize:0.82","useLargestFontSize:1"],o=function(t,n){this.ui=t;this.subtitlesConfig=t.config.subtitles;this.closedCaptions=this.subtitlesConfig.kind&&"closedCaptions"===this.subtitlesConfig.kind;this.setLanguageStrings();this.openCloseButton=n("p_subtitleButton p_dontCloseSettingsPanel",i(this,t),this.strings.openPanelAndOn,this.strings.openPanelAndOn,t,!0,"accessibility");this.sizeButtons=[];this.subtitleSettingsContainer=e(this);if(this.subtitlesConfig.defaultOn){this.indicateSubsOn();this.subtitleToggle.enable()}};o.prototype={getOpenCloseButton:function(){return this.openCloseButton},getSubsSettingsContainer:function(){return this.subtitleSettingsContainer},showPanel:function(){if(!this.subtitleSettingsPanelShowing){this.ui.closeSettingsPanels();this.subtitleSettingsContainer.style.display="block";this.subtitleSettingsPanelShowing=!0;Utils.className(this.openCloseButton,"p_settingsPanelOpen");n(this,this.strings.closePanel);this.ui.player.Subtitles.updatePositions();Utils.className(document.body,"controlsPanelOpen","")}},closePanel:function(){if(this.subtitleSettingsPanelShowing){this.subtitleSettingsContainer.style.display="none";this.subtitleSettingsPanelShowing=!1;Utils.className(this.openCloseButton,"","p_settingsPanelOpen");this.ui.player.Subtitles.showingSubs?n(this,this.strings.openPanel):n(this,this.strings.openPanelAndOn);this.ui.player.Subtitles.updatePositions();Utils.className(document.body,"","controlsPanelOpen")}this.hasFocus=!1},getPanelTop:function(){return Utils.getOffset(this.subtitleSettingsContainer,"top")},isPanelOpen:function(){return this.subtitleSettingsPanelShowing},indicateSubsOn:function(){Utils.className(this.openCloseButton,"p_controlBarButton_on");this.subtitleSettingsPanelShowing||n(this,this.strings.openPanel);this.subtitleToggle.setOn();for(var e=0;this.sizeButtons.length>e;e++)this.sizeButtons[e].disabled=!1;Utils.className(this.subtitleSettingsContainer,"p_subsOn")},indicateSubsOff:function(){Utils.className(this.openCloseButton,"","p_controlBarButton_on");this.subtitleSettingsPanelShowing||n(this,this.strings.openPanelAndOn);this.subtitleToggle.disable();this.subtitleToggle.setOff();for(var e=0;this.sizeButtons.length>e;e++)this.sizeButtons[e].disabled=!0;Utils.className(this.subtitleSettingsContainer,"","p_subsOn")},indicateSize:function(e){for(var t=t,i=0;this.sizeButtons.length>i;i++){this.sizeButtons[i].setAttribute("aria-pressed","false");if(e==this.sizeButtons[i].getAttribute("data-size")){var n=5+45*i;this.sizeIndicator.style.left=n+"px";this.sizeButtons[i].setAttribute("aria-pressed","true");t=!0}}this.sizeIndicator.style.display=t?"block":"none"},setSize:function(e){this.ui.updateConfig({subtitles:{sizeAdjustment:e}});this.indicateSize(e);this.ui.player.Subtitles.persistSizeAdjustment(e)},updateLanguage:function(){this.setLanguageStrings();a(this);this.subsToggleLabel.textContent=this.strings.type;this.subtitleToggle.updateLanguage(this.strings.type);for(var e=0;this.sizeButtons.length>e;e++){var t=this.sizeButtons[e].getAttribute("data-sizeName");this.sizeButtons[e].setAttribute("aria-label",this.strings[t])}},setLanguageStrings:function(){this.strings={openPanelAndOn:this.closedCaptions?Language.openClosedCaptionsMenuAndTurnOnCC:Language.openSubtitlesMenuAndTurnOnSubs,openPanel:this.closedCaptions?Language.openClosedCaptionsMenu:Language.openSubtitlesMenu,closePanel:this.closedCaptions?Language.closeClosedCaptionsMenu:Language.closeSubtitlesMenu,type:this.closedCaptions?Language.closedCaptions:Language.subtitles,off:Language.off,on:Language.on,useFontSize:Language.useFontSize,useSmallestFontSize:Language.useSmallestFontSize,useSmallFontSize:Language.useSmallFontSize,useMediumFontSize:Language.useMediumFontSize,useLargeFontSize:Language.useLargeFontSize,useLargestFontSize:Language.useLargestFontSize,aa:Language.aa}}};return o}(),PlaybackSettingsPanel=function(){function e(e,t,i,n,a){t.onkeydown=function(t){function r(t){t.preventDefault();e.resetMainPage();e.showPanel();i.focus()}var o=t.keyCode||t.which;if(9==o||13==o){var s=9===o,l=t.shiftKey!==!0&&n,u=t.shiftKey===!0&&a;s&&(l||u)&&r(t)}}}function t(e){return("keyup"===e.type||"keydown"===e.type)&&32!==e.keyCode&&13!==e.keyCode}function i(e){var t=Utils.getCookie("ckps_smpSettings"),i={};if(t)try{i=JSON.parse(t);i?i.quality=e:i={quality:e}}catch(n){i={quality:e}}else i={quality:e};Utils.setCookie("ckps_smpSettings",JSON.stringify(i))}function n(e,t,i,n,a){if("low"===e){i.setAttribute("aria-label",Language.qualitySettingLowSelected);n.setAttribute("aria-label",Language.qualitySettingMediumSelect);a.setAttribute("aria-label",Language.qualitySettingHighSelect);t.setAttribute("aria-label",Language.qualitySettingOpenLowSelected)}if("medium"===e){n.setAttribute("aria-label",Language.qualitySettingMediumSelected);i.setAttribute("aria-label",Language.qualitySettingLowSelect);a.setAttribute("aria-label",Language.qualitySettingHighSelect);t.setAttribute("aria-label",Language.qualitySettingOpenMediumSelected)}if("high"===e){a.setAttribute("aria-label",Language.qualitySettingHighSelected);i.setAttribute("aria-label",Language.qualitySettingLowSelect);n.setAttribute("aria-label",Language.qualitySettingMediumSelect);t.setAttribute("aria-label",Language.qualitySettingOpenHighSelected)}}function a(e,t,i,n,a){if("low"==e){Utils.className(t,"p_qualitySettingOn","");Utils.className(i,"","p_qualitySettingOn");Utils.className(n,"","p_qualitySettingOn");a.textContent=Language.qualityPanelLowRowHeading}if("medium"==e){Utils.className(i,"p_qualitySettingOn","");Utils.className(t,"","p_qualitySettingOn");Utils.className(n,"","p_qualitySettingOn");a.textContent=Language.qualityPanelMediumRowHeading}if("high"==e){Utils.className(n,"p_qualitySettingOn","");Utils.className(t,"","p_qualitySettingOn");Utils.className(i,"","p_qualitySettingOn");a.textContent=Language.qualityPanelHighRowHeading}}function r(e){var t={continuousPlay_new:e.newContinuousPlayStatus?"on":"off",continuousPlay_previous:e.previousContinuousPlayStatus?"on":"off",quality_new:e.selectedQuality,quality_previous:e.previousQuality};if(!e.ui.config.playbackSettingsPanel.qualitySetting){delete t.quality_new;delete t.quality_previous}if(!e.ui.config.playbackSettingsPanel.continuousPlaySetting){delete t.continuousPlay_new;delete t.continuousPlay_previous}e.ui.player.trackAction("playback_settings_info","playback_settings_closed",t)}function o(e,t,r,o,s,l,u,c,d,p){a(t,s,l,u,c);n(t,o,s,l,u);if(p&&e){i(t);r.quality=new Quality(t);e.selectedQuality=t}}function s(e,t,i,n,a,r,s){if(e.config&&e.config.quality){"low"===e.config.quality&&o(null,"low",e,t,i,n,a,r,s);"medium"===e.config.quality&&o(null,"medium",e,t,i,n,a,r,s);("high"===e.config.quality||"hd"===e.config.quality)&&o(null,"high",e,t,i,n,a,r,s)}}function l(i){var n=i.player,a=i.settingsContainer=document.createElement("div");a.id="p_playbackSettingsContainer";a.className="p_dontCloseSettingsPanel";Utils.multiAddEventListener(a,"focusout blur",function(e){var t=e.relatedTarget;null!==t&&!a.contains(t)&&Utils.hasClass(document.body,"nonPointerFocus")&&i.closePanel();i.hasFocus=!1},!0);Utils.multiAddEventListener(a,"focusin focus",function(){i.hasFocus=!0},!0);var r=document.createElement("div");r.id="p_playbackSettingsMask";a.appendChild(r);var o=i.settingsBox=document.createElement("div");o.id="p_playbackSettingsBox";a.appendChild(o);var l=i.settingsHeading=document.createElement("div");l.id="p_playbackSettingsHeading";l.textContent=Language.playbackSettingsHeading;o.appendChild(l);var c=document.createElement("div");c.id="p_panel1";o.appendChild(c);var d=i.autoplayRow=document.createElement("div");d.id="p_autoplayRow";d.className="p_settingsRow";c.appendChild(d);i.ui.config.playbackSettingsPanel.continuousPlaySetting&&(d.style.display="block");var p=document.createElement("div");p.id="p_autoplayText";p.className="p_settingsTextBox";d.appendChild(p);var f=i.autoplaySettingHeading=document.createElement("div");f.id="p_autoplayTitle";f.className="p_settingsTitle";f.textContent=Language.autoplaySettingHeading;p.appendChild(f);var m=i.autoplaySettingSubheading=document.createElement("div");m.id="p_autoplaySubtitle";m.className="p_settingsSubtitle";m.textContent=Language.autoplaySettingSubheading;p.appendChild(m);var g={on:"playback_settings_continuous_play_toggle_on",off:"playback_settings_continuous_play_toggle_off"},h=i.autoplayToggle=new ToggleButton(i.ui,Language.autoplaySettingGenericLabel,"p_autoplayToggle",null,g);i.ui.player.config.continuousPlay&&h.setOn();h.attachChangeListener(function(e){if("turningOff"==e){i.previousContinuousPlayStatus=!0;i.newContinuousPlayStatus=!1;i.ui.player.dispatch({type:"continuousPlayToggleSwitched",status:!1});i.ui.player.updateConfig({continuousPlay:!1})}else{i.previousContinuousPlayStatus=!1;i.newContinuousPlayStatus=!0;i.ui.player.dispatch({type:"continuousPlayToggleSwitched",status:!0});i.ui.player.updateConfig({continuousPlay:!0})}});appendChildren(d,h.getDomNodes());var y=i.qualityRow=document.createElement("div");y.id="p_qualityRow";y.className="p_settingsRow";c.appendChild(y);y.setAttribute("aria-label",Language.qualitySettingOpenHighSelected);y.tabIndex="";i.ui.config.playbackSettingsPanel.qualitySetting&&(y.style.display="block");var v=document.createElement("div");v.id="p_qualityText";v.className="p_settingsTextBox";y.appendChild(v);var b=i.qualitySettingHeading=document.createElement("div"),C=i.qualitySettingHeadingText=document.createElement("span");b.id="p_qualityTitle";b.className="p_settingsTitle";C.textContent=Language.qualitySettingHeading;b.appendChild(C);v.appendChild(b);var E=i.qualitySettingSubheading=document.createElement("div");E.id="p_qualitySubtitle";E.className="p_settingsSubtitle";E.textContent=Language.qualityPanelHighRowHeading;v.appendChild(E);var P=i.qualitySettingUnavailableSubheading=document.createElement("div");P.id="p_qualitySubtitleUnavailable";P.className="p_settingsSubtitleUnavailable";P.textContent=Language.qualitySettingOpenUnavailable;v.appendChild(P);var T=i.chevronPlaceholder=document.createElement("div");T.id="p_chevronPlaceholder";T.tabIndex="-1";var S=document.createElement("div");S.className="p_chevronBorder";T.appendChild(S);var _=document.createElement("div");_.className="p_chevronInside";S.appendChild(_);b.appendChild(T);Utils.multiAddEventListener(y,"click keyup",function(e){var n="keyup"===e.type||0===e.screenX&&0===e.screenY;if(!t(e)){i.showingQualityPage=!0;i.switchPageSetting(n);i.ui.player.trackAction("playback_settings_open_quality_option",e.type)}},!0);var I=i.qualityListWrap=document.createElement("ul");I.id="p_qualityListWrap";I.setAttribute("aria-label",Language.qualitySettingInfo);c.appendChild(I);var k=i.qualityPanelLowRow=document.createElement("li");k.id="p_qualityPanelFirstRow";k.className="p_qualityPanelRow";I.appendChild(k);var w=i.qualityPanelLowRowHeading=document.createElement("div"),A=i.qualityPanelLowRowHeadingText=document.createElement("span");w.id="p_qualityPanelLowRowHeading";w.className="p_qualityPanelRowHeading";A.textContent=Language.qualityPanelLowRowHeading;k.setAttribute("aria-label",Language.qualitySettingLowSelect);k.tabIndex="";w.appendChild(A);k.appendChild(w);var L=document.createElement("div");L.className="p_qualityTick";w.appendChild(L);var N=i.qualityPanelMediumRow=document.createElement("li");N.id="p_qualityPanelMediumRow";N.className="p_qualityPanelRow";I.appendChild(N);var O=i.qualityPanelMediumRowHeading=document.createElement("div"),x=i.qualityPanelMediumRowHeadingText=document.createElement("span");O.id="p_qualityPanelMediumRowHeading";O.className="p_qualityPanelRowHeading";x.textContent=Language.qualityPanelMediumRowHeading;N.setAttribute("aria-label",Language.qualitySettingMediumSelect);N.tabIndex="";O.appendChild(x);N.appendChild(O);var D=document.createElement("div");D.className="p_qualityTick";O.appendChild(D);var M=i.qualityPanelHighRow=document.createElement("li");M.id="p_qualityPanelHighRow";M.className="p_qualityPanelRow p_qualitySettingOn";I.appendChild(M);var R=i.qualityPanelHighRowHeading=document.createElement("div"),B=i.qualityPanelHighRowHeadingText=document.createElement("span");R.id="p_qualityPanelHighRowHeading";R.className="p_qualityPanelRowHeading";B.textContent=Language.qualityPanelHighRowHeading;R.appendChild(B);M.appendChild(R);var U=i.qualityPanelHighRowSettingSubheading=document.createElement("div"),F=i.qualityPanelHighRowSubtitleText=document.createElement("span");U.setAttribute("aria-hidden","true");U.id="p_qualityPanelHighRowSubtitle";U.className="p_qualityPanelRowSubtitle";F.textContent=Language.qualityPanelHighRowSubtitle;M.setAttribute("aria-label",Language.qualitySettingOpenHighSelected);M.tabIndex="";U.appendChild(F);M.appendChild(U);var H=i.ui.config.playbackSettingsPanel.highlightMenuColour?i.ui.config.playbackSettingsPanel.highlightMenuColour:null,q=document.createElement("div");q.className="p_qualityTick";R.appendChild(q);var W=document.createElement("div");W.className="p_downArrow";a.appendChild(W);u(i,n,y,k,N,M,E,H);s(n,y,k,N,M,E,H);e(i,M,y,!0);e(i,k,y,null,!0);return a}function u(e,i,n,a,r,s,l,u){Utils.multiAddEventListener(a,"click keyup",function(c){if(!t(c)){o(e,"low",i,n,a,r,s,l,u,!0);e.ui.player.trackAction("playback_settings_low_option",c.type)}},!0);Utils.multiAddEventListener(r,"click keyup",function(c){if(!t(c)){o(e,"medium",i,n,a,r,s,l,u,!0);e.ui.player.trackAction("playback_settings_medium_option",c.type)}},!0);Utils.multiAddEventListener(s,"click keyup",function(c){if(!t(c)){o(e,"high",i,n,a,r,s,l,u,!0);e.ui.player.trackAction("playback_settings_high_option",c.type)}},!0);if(u){Utils.multiAddEventListener(n,"focusin mouseover keyup",function(){n.style.color=u;var e=n.getElementsByClassName("p_chevronBorder")[0];e.style.borderColor="transparent transparent transparent "+u},!0);Utils.multiAddEventListener(n,"focusout mouseout",function(){n.style.color="#FFF";var e=n.getElementsByClassName("p_chevronBorder")[0];e.style.borderColor="transparent transparent transparent white"},!0);Utils.multiAddEventListener(a,"focusin mouseover",function(){a.style.color=u;var e=a.getElementsByClassName("p_qualityTick")[0];e.style.borderColor=u},!0);Utils.multiAddEventListener(a,"focusout mouseout",function(){a.style.color="#FFF";var e=a.getElementsByClassName("p_qualityTick")[0];e.style.borderColor="white"},!0);Utils.multiAddEventListener(r,"focusin mouseover",function(){r.style.color=u;var e=r.getElementsByClassName("p_qualityTick")[0];e.style.borderColor=u},!0);Utils.multiAddEventListener(r,"focusout mouseout",function(){r.style.color="#FFF";var e=r.getElementsByClassName("p_qualityTick")[0];e.style.borderColor="white"},!0);Utils.multiAddEventListener(s,"focusin mouseover",function(){s.style.color=u;var e=s.getElementsByClassName("p_qualityTick")[0];e.style.borderColor=u},!0);Utils.multiAddEventListener(s,"focusout mouseout",function(){s.style.color="#FFF";var e=s.getElementsByClassName("p_qualityTick")[0];e.style.borderColor="white"},!0)}}function c(e,t){return Utils.getActionFn(function(i,n){if(e.playbackSettingsPanelShowing){e.closePanel();e.ui.player.trackAction("playback_settings_closed",i)}else{e.showPanel();e.previousQuality=e.selectedQuality;e.ui.player.trackAction("playback_settings_show",i);t.resetIdleTimeout(n)}})}function d(e,t){e.openCloseButton.title=t;e.openCloseButton.setAttribute("aria-label",t);var i=e.openCloseButton.getElementsByClassName("p_hiddenElement")[0];i.innerHTML=t}var p=function(e,t){this.ui=e;this.playbackSettingsPanelShowing=!1;this.showingQualityPage=!1;this.player=e.player;this.selectedQuality="hd"===e.player.config.quality?"high":e.player.config.quality;this.previousQuality="hd"===e.player.config.quality?"high":e.player.config.quality;this.previousContinuousPlayStatus=e.player.config.continuousPlay;this.newContinuousPlayStatus=e.player.config.continuousPlay;this.openCloseButton=t("p_playbackSettingsButton p_dontCloseSettingsPanel",c(this,e),Language.openPlaybackSettingsMenuNew,Language.openPlaybackSettingsMenuNew,e,!1,"playback-settings");this.playbackSettingsContainer=l(this)};p.prototype={getOpenCloseButton:function(){return this.openCloseButton},getPanel:function(){return this.playbackSettingsContainer},isPanelOpen:function(){return this.playbackSettingsPanelShowing},showPanel:function(){if(!this.playbackSettingsPanelShowing){this.ui.closeSettingsPanels();this.settingsContainer.style.display="block";Utils.className(this.openCloseButton,"p_settingsPanelOpen");this.playbackSettingsPanelShowing=!0;d(this,Language.closePlaybackSettingsMenu);this.ui.player.Subtitles.updatePositions();Utils.className(document.body,"controlsPanelOpen","");this.ui.player.dispatch({type:"controlsPanelOpened"})}},closePanel:function(){this.resetMainPage();if(this.playbackSettingsPanelShowing){this.settingsContainer.style.display="none";Utils.className(this.openCloseButton,"","p_settingsPanelOpen");this.playbackSettingsPanelShowing=!1;d(this,Language.openPlaybackSettingsMenuNew);this.ui.player.Subtitles.updatePositions();Utils.className(document.body,"","controlsPanelOpen");r(this)}this.hasFocus=!1;Utils.className(this.settingsContainer,"","p_qualityPageOpen")},getPanelTop:function(){return Utils.getOffset(this.settingsBox,"top")},setAutoplay:function(e){e?this.autoplayToggle.setOn():this.autoplayToggle.setOff()},showOrHideContinuousPlaySetting:function(e){this.autoplayRow.style.display=e?"block":"none"},updateLanguage:function(){this.settingsHeading.textContent=Language.playbackSettingsHeading;this.autoplaySettingHeading.textContent=Language.autoplaySettingHeading;this.autoplaySettingSubheading.textContent=Language.autoplaySettingSubheading;this.autoplayToggle.updateLanguage(Language.autoplaySettingHeading);this.qualitySettingHeadingText.textContent=Language.qualitySettingHeading;if("high"===this.selectedQuality){this.qualityRow.setAttribute("aria-label",Language.qualitySettingOpenHighSelected);this.qualitySettingSubheading.textContent=Language.qualityPanelHighRowHeading}else if("medium"===this.selectedQuality){this.qualityRow.setAttribute("aria-label",Language.qualitySettingOpenMediumSelected);this.qualitySettingSubheading.textContent=Language.qualityPanelMediumRowHeading}else if("low"===this.selectedQuality){this.qualityRow.setAttribute("aria-label",Language.qualitySettingOpenLowSelected);this.qualitySettingSubheading.textContent=Language.qualityPanelLowRowHeading}this.qualityPanelLowRowHeadingText.textContent=Language.qualityPanelLowRowHeading;this.qualityPanelMediumRowHeadingText.textContent=Language.qualityPanelMediumRowHeading;this.qualityPanelHighRowHeadingText.textContent=Language.qualityPanelHighRowHeading;this.qualityPanelHighRowSubtitleText.textContent=Language.qualityPanelHighRowSubtitle;this.qualitySettingUnavailableSubheading.textContent=Language.qualitySettingOpenUnavailable;this.isPanelOpen()?d(this,Language.closePlaybackSettingsMenu):d(this,Language.openPlaybackSettingsMenuNew)},resetMainPage:function(){this.showingQualityPage=!1;this.settingsHeading.textContent=Language.playbackSettingsHeading;this.qualityListWrap.style.display="none";this.ui.config.playbackSettingsPanel.continuousPlaySetting&&(this.autoplayRow.style.display="block");this.ui.config.playbackSettingsPanel.qualitySetting&&(this.qualityRow.style.display="block");Utils.className(this.settingsContainer,"","p_qualityPageOpen")},switchPageSetting:function(e){clearTimeout(this.ui.idleTimeoutInterval);if(this.showingQualityPage){this.autoplayRow.style.display="none";this.qualityRow.style.display="none"}this.settingsHeading.textContent=Language.qualitySettingHeading;this.qualityListWrap.style.display="block";Utils.className(this.settingsContainer,"p_qualityPageOpen","");e&&this.qualityPanelLowRow.focus()},checkQualityAvailability:function(e,t){var i=this.ui.player,n=i.isPlayingDash,a=i.isPlayingFlash,r=i.isAudio;if(!n&&!a||r||e&&!t){Utils.className(this.qualityRow,"p_qualitySettingUnavailable","");this.qualityRow.setAttribute("aria-hidden","true");this.qualityRow.tabIndex="-1"}else{Utils.className(this.qualityRow,"","p_qualitySettingUnavailable");this.qualityRow.setAttribute("aria-hidden","false");this.qualityRow.tabIndex=""}}};return p}(),ErrorDialog=function(){function e(e,t,i,n){Utils.deleteCssRules(e,t);for(var a=0;t.length>a;a++){var r=t[a];e.insertRule(".p_buttonHover."+r+", .focusEnabled ."+r+":focus { background-color: "+i+"; color: "+n+" }",0)}}function t(e){e.addEventListener("mouseover",function(){Utils.className(e,"p_buttonHover")});e.addEventListener("mouseout",function(){Utils.className(e,"","p_buttonHover")});e.addEventListener("touchstart",function(){Utils.className(e,"p_buttonHover p_buttonTouch")},{passive:!0});e.addEventListener("touchend",function(){Utils.className(e,"","p_buttonHover p_buttonTouch")})}function i(e,t){return function(i){var n=t==SMPError.EMBED_NOT_ALLOWED,a=n?"embed_error_navigate":"error",r=Utils.getActionType(i);if(!n){var o={playlistObject:e.player.playlist,startTime:e.player.timeHelper.time,autoplay:!0};t==SMPError.CANNOT_MAINTAIN_LOCK&&(o.maintainTheLock=!1);var s=e.markerData,l=e.player.webcastData;e.player.api.loadPlaylist2(o);e.player.api.setData({name:"SMP.markers",data:s});e.player.api.setData({name:"SMP.webcastData",data:l})}e.player.trackAction(a,r)}}var n=function(e){this.ui=e;this.player=e.player};n.prototype={shouldShowSmallErrorVersion:function(){return"audio"==this.ui.config.skin||"classic"==this.ui.config.skin&&this.ui.miniModeEnabled?!0:!1},hideErrorDialog:function(){var e=this;if(e.error){e.player.dispatch({type:"beforeErrorHide"});e.error.className="p_none";e.error=null;e.errorWrapper&&e.errorWrapper.parentNode.removeChild(e.errorWrapper);Utils.className(document.body,"","errorShowing")}},createErrorDialog:function(e){var n=this;if(!n.error){var a=n.shouldShowSmallErrorVersion();a?Utils.className(document.body,"p_smallErrorVersion"):Utils.className(document.body,"","p_smallErrorVersion");var r=createElement("div","p_errorDialog"),o=createElement("div","p_errorBackground");r.appendChild(o);n.alertImageContainer=Utils.generateSVG(50.3,44,"alert","p_alertIcon");Utils.className(n.alertImageContainer,a?" alertIconHolder showSmallVersion":" alertIconHolder");n.errorMessageContainer=createElement("div","","<span class='p_errorPrimary'></span>");n.errorMessageContainer.setAttribute("role","alert");if(!a){o.appendChild(n.alertImageContainer);o.appendChild(n.errorMessageContainer)}n.updateErrorDialog();var s=document.createElement("a"),l=document.createElement("a");if(e==SMPError.EMBED_NOT_ALLOWED){s.textContent=Language.viewThisContentOnTheBBC;s.href=n.ui.player.playlist.alternateHref;s.target="new_page"}else s.textContent=Language.tryAgain;var u=Utils.generateSVG(34,34.5,"refresh","p_refreshIcon");l.appendChild(u);t(s);t(l);var c=i(n.ui,e);Utils.multiAddEventListener(s,"touchend click mouseup",c);Utils.multiAddEventListener(l,"touchend click mouseup",c);o.appendChild(s);n.errorLink=s;if(a){o.appendChild(l);o.appendChild(n.alertImageContainer);o.appendChild(n.errorMessageContainer)}n.errorRefreshLink=l;n.errorHelpText=createElement("span","p_errorSecondary p_none");o.appendChild(n.errorHelpText);n.errorWrapper=createElement("div","p_errorWrapper");n.errorWrapper.appendChild(r);n.ui.container.appendChild(n.errorWrapper);n.error=r}},drawErrorDialog:function(e){var t=this;t.player.dispatch({type:"notPlayingState"});t.player.inErrorState=!0;if(t.ui.enabled&&t.ui.config.errorDialog.enabled){var i="";e.secondaryText&&""!==e.secondaryText&&!e.recoverable&&(i=e.secondaryText);t.drawError(e.description,e.secondaryText,e.recoverable,e.code);var n=e.description+" "+i;ScreenReader.alert(n)}},drawError:function(e,t,i,n){var a=this;a.player.dispatch({type:"beforeErrorDisplay"});a.createErrorDialog(n);
var r=a.errorMessageContainer.getElementsByClassName("p_fallbackText");r.length>0&&r[0].parentNode.removeChild(r[0]);var o=a.errorMessageContainer.getElementsByClassName("p_fallbackButton");o.length>0&&o[0].parentNode.removeChild(o[0]);a.errorMessageContainer.firstChild.textContent=e;a.error.className="p_errorDialog";a.errorLink.className=i?"p_errorDialog_a":"p_none";a.errorRefreshLink.className=i?"p_errorRefreshDialog_a":"p_none";if(t){a.errorHelpText.textContent=t;Utils.className(a.errorHelpText,"","p_none")}else Utils.className(a.errorHelpText,"");Utils.className(document.body,"errorShowing")},updateErrorDialog:function(){var t=this;e(t.ui.stylesheet,["p_fallbackButton","p_errorDialog_a","p_errorRefreshDialog_a"],t.ui.config.colour,t.ui.config.foreColour)},flashFallbackDialog:function(e,t,i){var n=this;n.player.inErrorState=!0;n.player.dispatch({type:"notPlayingState"});if(n.ui.enabled&&n.ui.config.errorDialog.enabled){var a=Utils.getOffset(n.ui.player.mediaContainer,"width");if(231>a){n.drawError("","",!1,!1);n.player.dispatch({type:"flashFallbackGoToBump"})}else if(t){n.drawError(e.description,"",!1,!1);Utils.className(n.error,"p_fallbackDialog");var r=document.createElement("div");r.className="p_fallbackButton";r.textContent=Language.useMediaPlayerApp;Utils.multiAddEventListener(r,"touchend click mouseup",function(e){n.player.trackAction(Utils.getActionType(e),"use_media_player_app");i()});n.errorMessageContainer.appendChild(r)}else{n.drawError(e.description,"",!1,!1);Utils.className(n.error,"p_fallbackDialog");var o=document.createElement("span");Utils.className(o,"p_fallbackText");var s=Language.enableFlash;if(n.shouldShowSmallErrorVersion()){s=" "+(320>a?Language.enableFlashShort:s);n.errorMessageContainer.firstChild.appendChild(o)}else{Utils.className(o,"p_errorSecondary");n.errorMessageContainer.appendChild(o)}var l="https://get.adobe.com/flashplayer";o.innerHTML=s.replace("{link}","<a href='"+l+"' target='getFlash'>"+Language.downloadFlashLink+"</a>");var u=o.getElementsByTagName("a")[0];u&&Utils.multiAddEventListener(u,"touchend click mouseup",function(e){n.player.trackAction(Utils.getActionType(e),"download_flash_player")})}}},getEventCallbacks:function(){var e=this;return{playing:function(){e.hideErrorDialog()},playerDisconnected:function(){e.hideErrorDialog()},playlistLoading:function(){e.hideErrorDialog()},playlistLoaded:function(){e.hideErrorDialog()},error:function(t){switch(t.code){case SMPError.FLASH_NOT_CREATED:case SMPError.FLASH_NOT_INITIALISED:case SMPError.FLASH_NOT_INSTALLED:e.flashFallbackDialog(t,!1,null);break;case SMPError.CANT_PLAY_IN_ANDROID_BROWSER:e.flashFallbackDialog(t,!0,function(){e.player.playInBump()});break;default:t.nonPlayer||t.severity!=CRITICAL||e.drawErrorDialog(t)}}}}};return n}(),ProgressBar=function(){function e(e){var t=getComputedStyle(e.seekBar).getPropertyValue("left");return parseInt(t,10)}function t(e,t,i){clearTimeout(e.seekTrackTimer);e.seekTrackTimer=setTimeout(function(){e.player.trackAction("seek_bar",t,{seek_time:i,before_seek_time:e.startingTime});e.startingTime=-1},STATS_TRACK_DELAY)}function i(e,t){return Language.audioToolTipSeekBarPrefix+" "+e+" "+Language.audioToolTipSeekBarSuffix+" "+t}function n(e){var t=function(t){e.player.isSeeking=!0;e.updateProgressBar(t,!0);e.ui.updateTimeDisplay(e.ui.player.timeHelper.percentToTime(t))};return function(i){e.seekDone||(e.seekDone=function(){e.player.isSeeking=!1});e.player.isSeeking||(e.seekToPos=e.player.timeHelper.timeToPercent(e.player.time));var n=i.keyCode;if(n==KEY_DOWN_ARROW||n==KEY_LEFT_ARROW){e.seekToPos=Math.max(0,e.seekToPos-.01);t(e.seekToPos);stopIt(i)}if(n==KEY_UP_ARROW||n==KEY_RIGHT_ARROW){e.seekToPos=Math.min(e.seekToPos+.01,e.player.timeHelper.getLatestAllowableSeekPercent());t(e.seekToPos);stopIt(i)}if(n==KEY_HOME||n==KEY_END){e.seekToPos=n==KEY_HOME?e.player.timeHelper.earliestSeek:e.player.timeHelper.latestAllowableSeekTime;stopIt(i)}if(n==KEY_SPACE){e.ui.togglePlay("shortcut_key_press");stopIt(i)}}}function a(e){return function(n){var a=0/0,r="",o=n.keyCode;if(o==KEY_DOWN_ARROW||o==KEY_LEFT_ARROW||o==KEY_UP_ARROW||o==KEY_RIGHT_ARROW||o==KEY_HOME||o==KEY_END){a=e.player.timeHelper.percentToTime(e.seekToPos);stopIt(n)}(o==KEY_HOME||o==KEY_END)&&(r="shortcut_");if(!isNaN(a)){e.seekDone&&e.seekDone();e.player.time=a;var s=e.player.timeHelper.timeToPercent(a);e.updateProgressBar(s,!0);t(e,r+"key_press",a)}e.seekThumb.setAttribute("aria-valuetext",i(e.player.timeHelper.timeToString(e.player.time),e.player.timeHelper.getDurationOrEndString()))}}function r(e){return function(t){if(9==t.keyCode){var i=e.player.timeHelper.timeToPercent(e.player.time);e.drawTip(i);e.seekThumbHasFocus=!0}}}function o(e){return function(){e.hideTip();e.seekDone&&e.seekDone();e.seekThumbHasFocus=!1}}function s(e){Utils.className(e.progressBar,"","p_progressBarAnimate");Utils.className(e.seekThumb,"","p_seekThumbAnimate");u(e,null);Utils.applyVendorStyles([e.progressBar,e.seekThumb],"transform",null);if(e.progressBar){e.progressBar.style.width=null;e.progressBar.animation.cssApplied=!1;e.progressBar.animation.paused=!1;e.progressBar.animation.animating=!1}}function l(e){var t=getComputedStyle(e.progressBar).getPropertyValue("transform")+"";return parseFloat(t.split(",")[0].split("(")[1])}function u(e,t){Utils.applyVendorStyles([e.progressBar,e.seekThumb],"animationPlayState",t)}function c(e,t){var i=e.seekBar.clientWidth,n=t-Utils.getOffset(e.seekBar),a=Math.max(0,Math.min(n,i))/i,r=e.player.timeHelper.getLatestAllowableSeekPercent();a>r&&(a=r);return a}function d(e){function i(){if(n){o.removeEventListener("mousemove",n,!0);o.removeEventListener("touchmove",n,!0);o.removeEventListener("pointermove",n,!0)}if(a){o.removeEventListener("mouseup",a,!0);o.removeEventListener("touchend",a,!0);o.removeEventListener("pointerup",a,!0)}}function n(t){var i="touch"==t.type.substr(0,5)?t.targetTouches[0].clientX:t.clientX,n=c(e,i);l=e.player.timeHelper.percentToTime(n);if(Math.abs(r-i)>2){e.updateProgressBar(n,!0);e.ui.updateTimeDisplay(l);s=!0}}function a(i){var n="click",a=!0;if(s)n="drag";else{var r="touch"==i.type.substr(0,5)?i.changedTouches[0].clientX:i.clientX,o=c(e,r);l=e.player.timeHelper.percentToTime(o)}l==e.player.timeHelper.time&&(a=!1);if(a){e.player.time=l;t(e,n,Math.floor(l))}var u="touchend"==i.type||"pointerup"==i.type&&"mouse"!=i.pointerType||!e.seekBarHolder.contains(i.target)||Device.ios,d=e.player.timeHelper.timeToPercent(l);e.updateProgressBar(d,!u);u&&e.hideTip();e.seekDone();if(e.player.paused&&e.player.mediaEnded){e.player.mediaEnded=!1;e.player.requestGuidanceAndPlay()}}var r,o=window.document,s=!1,l=0;e.seekDone=function(){i();e.player.isSeeking=!1};return function(t){r="touch"==t.type.substr(0,5)?t.targetTouches[0].clientX:t.clientX;var l=e.player.timeHelper.duration;if(!(1>l||"controlsFadedOut"==e.ui.container.className)){e.startingTime=e.player.time;e.player.isSeeking=!0;s=!1;i();if("mousedown"==t.type){o.addEventListener("mousemove",n,!0);o.addEventListener("mouseup",a,!0)}else if("pointerdown"==t.type){o.addEventListener("pointermove",n,!0);o.addEventListener("pointerup",a,!0)}else{o.addEventListener("touchmove",n,!0);o.addEventListener("touchend",a,!0)}}}}function p(e){var t=!0,i=null;return function(n){if(!e.player.isSeeking){clearTimeout(i);i=setTimeout(function(){t=!0},500);if(t)t=!1;else{var a=e.player.timeHelper.duration;if(1>a||isNaN(a))e.hideTip();else{var r=c(e,n.clientX);e.drawTip(r);e.seekOver=!0}}}}}function f(e){return function(){e.player.isSeeking||e.hideTip();e.seekOver=!1}}function m(e){Utils.deleteCssRules(e.ui.stylesheet,[".p_progressBar",".audioUI .p_seekThumb",".audioUI .p_seekThumbHalo",".classicUI .focusEnabled .p_seekThumb:focus",".classicUI .focusEnabled .p_seekThumb:focus > .p_seekThumbLine"]);e.ui.stylesheet.insertRule(".p_progressBar { background: "+(e.ui.config.controls.seekbarBackground?e.ui.config.controls.seekbarBackground:e.ui.config.colour)+"; }",0);e.ui.stylesheet.insertRule(".audioUI .p_seekThumb { background-color: "+e.ui.config.colour+"; }",0);e.ui.stylesheet.insertRule(".audioUI .p_seekThumbHalo { background-color: "+e.ui.config.colour+"; }",0);e.ui.stylesheet.insertRule(".classicUI .focusEnabled .p_seekThumb:focus { background-color: "+e.ui.config.colour+"; }",0);e.ui.stylesheet.insertRule(".classicUI .focusEnabled .p_seekThumb:focus > .p_seekThumbLine { background-color: "+e.ui.config.foreColour+"; }",0)}var g=6,h=function(e){this.player=e.player;this.ui=e;this.seekThumbHasFocus=!1;this.seekTrackTimer=-1;m(this);this.drawDesktopUI()};h.prototype={getSeekBarOffsetWidth:function(){return this.seekBar.offsetWidth},drawDesktopUI:function(){var e=this.seekBarHolder=createElement("div","p_playerSeekBarHolder"),t=this.seekBar=createElement("div","p_bar p_seekBar");e.appendChild(t);var s=this.seekBarPositionLine=createElement("div","p_seekBarPositionLine");t.appendChild(s);var l=this.progressBar=createElement("div","p_bar p_progressBar");l.animation={cssApplied:!1,paused:!1,animating:!1,supported:Device.scrubAnimation&&Utils.checkCssSupport(e,"transform"),supportsCompensation:Device.animationCompensationSupported};var u=this.progressBarAvailable=createElement("div","p_bar p_progressBar p_progressBarAvailable");e.appendChild(u);e.appendChild(l);var c=this.seekHelpText=document.createElement("div");c.id="p_seekHelpText";c.style.display="none";c.textContent=Language.seekBarDescription;t.appendChild(c);var m=this.seekThumb=createElement("button","p_button p_seekThumb");m.title=Language.seekBarName;m.setAttribute("aria-label",Language.seekBarName);m.style.display="none";m.setAttribute("role","slider");m.setAttribute("aria-control","video");m.setAttribute("aria-valuemin","0");m.setAttribute("aria-valuemax","100");m.setAttribute("aria-valuetext",i("00:00","00:00"));m.setAttribute("aria-describedby",c.id);var g=createElement("div","p_seekThumbLine");m.appendChild(g);var h=this.seekThumbHalo=createElement("div","p_seekThumbHalo");m.appendChild(h);e.appendChild(m);var y=this.tip=createElement("div","p_timeTip",'<span class="p_timeTipText"></span>');y.setAttribute("aria-hidden","true");var v=this.tipTriangle=createElement("div","p_timeTipTriangle");y.appendChild(v);this.thumbnailDiv=createElement("div","p_thumbnail");m.addEventListener("keydown",n(this));m.addEventListener("keyup",a(this));Utils.multiAddEventListener(m,"keyup",r(this));Utils.multiAddEventListener(m,"blur focusout",o(this));Utils.downAction(this.seekBarHolder,d(this),!0);Utils.hoverMoveAction(this.seekBarHolder,p(this),!0);Utils.hoverLeaveAction(this.seekBarHolder,f(this),!1);return e},getDomNodes:function(){return[this.seekBarHolder,this.thumbnailDiv,this.tip]},updateProgressBar:function(t,n){var a=this;if(!(50>a.seekBar.clientWidth)){var r=a.player.timeHelper;if(r.duration&&!isNaN(t))a.seekThumb.style.display="block";else{t=0;a.seekThumb.style.display="none"}var o=function(e){if(v){if(isNaN(e)){e=l(a);1===e&&(e=t)}Utils.className(a.progressBar,"","p_progressBarAnimate");Utils.className(a.seekThumb,"","p_seekThumbAnimate");u(a,null);Utils.applyVendorStyles([a.progressBar,a.seekThumb],"transform",null);a.progressBar.style.right="";a.seekThumb.style.right=f+"px";a.progressBar.style.width=m+"px";Utils.applyVendorStyles([a.progressBar],"transform","scale("+e+", 1)");Utils.applyVendorStyles([a.seekThumb],"transform","translate("+-Math.round(m*(1-e)-a.seekThumb.offsetWidth/2)+"px, 0px)");a.progressBar.animation.cssApplied=!0}else{e=isNaN(e)?t:e;var i=Math.round(m*(1-e))+f;a.progressBar.style.right=i+"px";a.seekThumb.style.right=Math.round(i-a.seekThumb.offsetWidth/2)+"px"}},c=function(e){o(e);var i=1/g*r.duration*(1-t)+"s";Utils.applyVendorStyles([a.progressBar,a.seekThumb],"animationDuration",i);Utils.className(a.progressBar,"p_progressBarAnimate");Utils.className(a.seekThumb,"p_seekThumbAnimate");a.progressBar.animation.animating=!0},d=function(e){o(e);u(a,"paused");a.progressBar.animation.paused=!0},p=function(e){c(e);u(a,"running");a.progressBar.animation.paused=!1},f=e(a),m=a.seekBar.clientWidth,g=void 0===a.player.mediaPlayer.playbackRate?1:a.player.mediaPlayer.playbackRate,h=void 0===a.progressBar.animation.target||a.progressBar.animation.target!=f,y=void 0===a.progressBar.animation.width||a.progressBar.animation.animating&&a.progressBar.animation.width!=m,v=!a.player.isLive&&!a.player.isSeeking&&a.progressBar.animation.supported&&!a.ui.UIinfoObject.markersBarVisible&&m/r.duration>1;if(v)if("playing"==a.player.playingState&&!a.player.waiting&&g>0&&1>t&&(void 0===a.player.mediaPlayer.readyState||a.player.mediaPlayer.readyState>2))if(h||y){o(t);a.progressBar.animation.target=f;a.progressBar.animation.width=m}else if(a.progressBar.animation.paused)p();else if(a.progressBar.animation.animating){var b=l(a)||0,C=Math.abs((t-b)*r.duration);if(C>.5&&!a.progressBar.animation.supportsCompensation){a.progressBar.animation.supported=!1;v=!1;s(a);o(b)}else if(C>.25&&a.progressBar.animation.supportsCompensation){d();p()}}else c(t);else if(a.progressBar.animation.animating&&!a.player.isSeeking&&t>0&&1>t)d();else{s(a);o(t)}else{a.progressBar.animation.cssApplied&&s(a);o(t)}var E=a.player.timeHelper.getLatestAllowableSeekPercent();if(1>E){Utils.setOrUnsetClassOnlyAfterCheck(a.ui.container,"seekingBarNotFullyAvailable",!0,null);if(E>t){var P=Math.round(m*(1-E))+f;a.progressBarAvailable.style.right=P+"px"}}else Utils.setOrUnsetClassOnlyAfterCheck(a.ui.container,"seekingBarNotFullyAvailable",null,!0);if(!a.seekThumbHasFocus){var T=r.percentToTimeString(t);a.seekThumb.setAttribute("aria-valuetext",i(T,a.player.timeHelper.getDurationOrEndString()))}var S=Math.floor(r.time);if(n&&(!v||!a.seekThumbHasFocus||a.progressBar.animation.thumbnail!=S)){a.drawTip(t);a.progressBar.animation.thumbnail=S}}},hideTip:function(){this.tip.style.opacity="0";this.seekBarPositionLine.style.display="none";Utils.className(this.seekThumbHalo,"","p_showing");this.hideThumbnail()},drawTip:function(t){var i=this,n=i.player.timeHelper.getLatestAllowableSeekPercent();t>n&&(t=n);var a=i.seekBarHolder.clientWidth,r=Math.floor(i.seekBar.clientWidth*t);i.tip.firstChild.textContent=i.player.timeHelper.percentToTimeString(t,!0);i.tip.style.opacity=1;var o=Utils.getOffset(i.tip,"width"),s=r-Math.floor(o/2)+e(i),l=Math.floor(o/2)-g;if(!i.player.isFullScreen)if(0>s){l+=s;s=0}else if(s+o>a){l+=s+o-a;s=a-o}i.tip.style.left=s+"px";i.tipTriangle.style.left=l+"px";i.seekBarPositionLine.style.display="block";i.seekBarPositionLine.style.left=r+"px";Utils.className(i.seekThumbHalo,"p_showing");i.drawThumbnail(t)},drawThumbnail:function(t){var i,n,a=this,r=a.player;if(a.ui.config.thumbnail.enabled&&r.thumbScrub.loaded){var o=a.seekBarHolder.clientWidth,s=a.ui.container.clientWidth,l=Math.floor(a.seekBar.clientWidth*t);if(400>s){a.hideThumbnail();return}if(800>s){i=128;n=72}else if(1009>s){i=192;n=108}else{i=224;n=126}var u=i+2,c=o+u>s,d=l-Math.floor(u/2)+e(a),p=a.player.timeHelper.percentToTime(t),f=a.player.thumbScrub.getThumbnailData(p,i,n);if(!f){a.hideThumbnail();return}(!a.player.isFullScreen||c)&&(d=Utils.clamp(d,0,o-u));var m=a.thumbnailDiv.style,g=i+"x"+n+f.storyBoardUrl;if(g!=a.thumbnailData){a.thumbnailData=g;m.width=i+"px";m.height=n+"px";m.backgroundImage="url("+f.storyBoardUrl+")"}m.left=d+"px";m.backgroundPosition=f.x+"px "+f.y+"px";m.visibility="visible";m.opacity=1}},hideThumbnail:function(){this.thumbnailDiv.style.visibility="hidden";this.thumbnailDiv.style.opacity=0},hide:function(){Utils.className(this.seekBarHolder,"hidden");this.seekBarHolder.setAttribute("aria-hidden","true");this.seekThumb.disabled=!0},show:function(){Utils.className(this.seekBarHolder,"","hidden");this.seekBarHolder.setAttribute("aria-hidden","false");this.seekThumb.disabled=!1},isVisible:function(){return!Utils.hasClass(this.seekBarHolder,"hidden")},getEventCallbacks:function(){function e(){i.updateProgressBar(i.player.timeHelper.percent)}function t(){s(i);i.seekDone&&i.seekDone()}var i=this;return{tryingToPlay:e,play:e,playing:e,pause:e,waiting:e,error:e,playlistEnded:e,fixSize:e,playerDisconnected:t,playlistStopped:t,ended:t,mediaItemChanged:function(){t();i.hideThumbnail()},seeked:function(){if(!i.player.isSeeking){s(i);i.updateProgressBar(i.player.timeHelper.percent,i.seekThumbHasFocus&&!i.seekOver)}},seeking:function(){u(i,"paused")},showCta:function(){s(i)},playlistLoading:function(){i.updateProgressBar(0);i.seekDone&&i.seekDone()},timeupdate:function(){!i.player.isSeeking&&i.ui.areControlsVisible()&&i.updateProgressBar(i.player.timeHelper.percent,i.seekThumbHasFocus&&!i.seekOver)},languageUpdated:function(){i.seekHelpText&&(i.seekHelpText.textContent=Language.seekBarDescription)},uiConfigUpdated:function(){m(i)}}}};return h}(),BaseBuffer=function(){function e(e){clearTimeout(e.showBufferTimer);e.player.dispatch({type:"showBuffer"});e.visiblyShowBuffer();this.showing=!0;e.player.isSeeking||ScreenReader.buffering()}function t(e){e.ui.enabled&&(e.showing?e.startBufferTimer():e.hideBuffer())}function i(e){this.ui=e;this.player=e.player;this.config=e.config;this.showing=!1}var n=750;i.prototype={getEventCallbacks:function(){var e=this;return{ccConnect:function(){e.startBufferTimer()},ccBuffering:function(){e.startBufferTimer()},playingState:function(){e.hideBuffer()},playing:function(){e.hideBuffer()},tryingToPlay:function(){e.startBufferTimer()},play:function(){e.startBufferTimer()},pause:function(){e.player.Chromecast.isAttemptingToCast||e.player.Chromecast.isConnecting||e.hideBuffer()},notPlayingState:function(){e.hideBuffer()},losingControl:function(){e.hideBuffer()},waiting:function(){if("playing"==e.player.playingState){e.startBufferTimer();e.player.qos.buffering()}},seeking:function(){e.startBufferTimer()},seeked:function(){e.player.Chromecast.isCasting||e.hideBuffer()},playlistStopped:function(){e.hideBuffer()},playlistLoading:function(){e.startBufferTimer()},fullscreenExit:function(){t(e)},playlistLoaded:function(){e.player.autoPlayNextItem?e.startBufferTimer():e.hideBuffer()}}},startBufferTimer:function(){if(this.config.buffer.enabled){clearTimeout(this.showBufferTimer);this.showBufferTimer=setTimeout(e,n,this)}},hideBuffer:function(e){clearTimeout(this.showBufferTimer);if(!this.config.buffer.forceShow||e){this.visiblyHideBuffer();this.player.dispatch({type:"bufferHidden"});this.showing=!1;ScreenReader.buffering(!0)}this.player.qos.endBuffering()},updateConfig:function(e){var t=this.config.buffer.forceShow;this.config=e;this.applyConfig();this.config.buffer.forceShow!=t&&(this.config.buffer.forceShow?this.startBufferTimer():this.hideBuffer());this.config.buffer.enabled||this.hideBuffer(!0)},resizeFixEnd:function(){t(this)},applyConfig:function(){}};return i}(),Spinner=function(){function e(e){var t=e.buffer=createElement("div","p_spinner"),i=document.createElement("canvas");t.spinner=new Sonic(i);t.appendChild(i);t.style.display="none"}var t=function(t){BaseBuffer.call(this,t);e(this);this.applyConfig()};t.prototype=Utils.object(BaseBuffer.prototype);t.prototype.getDomNodes=function(){return[this.buffer]};t.prototype.visiblyShowBuffer=function(){this.ui.enabled&&(this.buffer.style.display="block")};t.prototype.visiblyHideBuffer=function(){this.buffer.style.display="none"};t.prototype.applyConfig=function(){var e=this,t=e.buffer,i=t.spinner;i.width=e.config.buffer.width;i.colour=e.config.colour;i.thickness=e.config.buffer.thickness;i.colourArray=e.config.buffer.colours?(e.config.buffer.colours+"").split(","):null;i.draw();var n=t.style,a=t.spinner.padding,r=e.config.buffer.width+a;n.width=n.height=r+"px";n.marginTop=n.marginLeft=-(r/2)+"px";n.top=e.config.buffer.top;n.left=e.config.buffer.left};return t}(),AudioSpinner=function(){function e(e){var t,i,n,a=33.5,r=30.5,o=256,s=2*Math.PI/o,l=1,u=l/(o-1),c=[[34,34-a],[34,34-r]],d=Utils.createSVGElement("g",{});d.setAttribute("class","p_fadingRing");for(var p=1;o>=p;p++){n=Utils.createSVGElement("path",{});i=p*s;t=[[34-a*Math.sin(i),34-a*Math.cos(i)],[34-r*Math.sin(i),34-r*Math.cos(i)]];n.setAttribute("d","M "+c[0]+" A "+a+" "+a+", 0, 0, 1, "+t[0]+" L "+t[1]+" A "+r+" "+r+", 0, 0, 0, "+c[1]);n.setAttribute("fill","rgba(255,255,255,"+l+")");c=t;l-=u;d.appendChild(n)}e.angle=0;e.buffer=d;e.buffer.style.opacity=0}function t(e){function t(n){i||(i=n);var a=(n-i)/e.animationDuration*360;e.angle=(e.angle+a)%360;e.buffer.setAttribute("transform","rotate("+e.angle+",34,34)");i=n;e.animationID=requestAnimationFrame(t)}var i;return t}var i=function(t){BaseBuffer.call(this,t);e(this);t.player.pushMediaEventFunctions(this.getEventCallbacks());this.animationDuration=1e3};i.prototype=Utils.object(BaseBuffer.prototype);i.prototype.getDomNodes=function(){return[this.buffer]};i.prototype.visiblyShowBuffer=function(){this.buffer.style.opacity=1;this.animationID&&cancelAnimationFrame(this.animationID);this.animationID=requestAnimationFrame(t(this))};i.prototype.visiblyHideBuffer=function(){this.buffer.style.opacity=0;this.animationID&&cancelAnimationFrame(this.animationID)};i.prototype.applyConfig=function(){};return i}(),VolumeControl=function(){function e(e){return function(t){e.player.muted=!e.player.muted;var i=e.player.mediaPlayer.muted?"mute":"unmute";e.player.trackAction(i,Utils.getActionType(t),P)}}function t(e){return function(){e.closeVolumeControls()}}function i(e){return function(t){if("mouse"==t.pointerType){var i=t.clientX,n=t.clientY;e.volumeControls.contains(document.elementFromPoint(i,n))?e.openVolumeControls(t):e.closeVolumeControls()}}}function n(e,t){return function(i){e.openVolumeControls(i,t)}}function a(e,t){var i=t.changedTouches?t.changedTouches[0].clientX:t.clientX,n=b*v,a=Utils.getOffset(e.sliderContainer)+C,r=Math.max(0,Math.min(i-a,n)/n);return.5/v>r?0:r}function r(e){return function(t){var i,n=t.keyCode,a=Math.round(e.player.mediaPlayer.volume*v);e.openVolumeControls(t,!0);if(n==KEY_DOWN_ARROW||n==KEY_LEFT_ARROW){if(a>1)if(e.player.mediaPlayer.muted)e.player.muted=!1;else{a=Math.max(0,a-1);i=!0}else e.player.muted=!0;stopIt(t)}if(n==KEY_UP_ARROW||n==KEY_RIGHT_ARROW){if(e.player.mediaPlayer.muted)e.player.muted=!1;else{a=Math.min(v,a+1);i=!0}stopIt(t)}if(n==KEY_SPACE||n==KEY_ENTER){e.player.muted=!e.player.muted;stopIt(t)}i&&(e.player.volume=a/v)}}function o(e){return function(t){var i=t.keyCode;if(i==KEY_DOWN_ARROW||i==KEY_LEFT_ARROW||i==KEY_UP_ARROW||i==KEY_RIGHT_ARROW||i==KEY_SPACE||i==KEY_ENTER){clearTimeout(e.volumeTrackTimer);e.volumeTrackTimer=setTimeout(function(){s(e.player,"key_press")},STATS_TRACK_DELAY)}}}function s(e,t){var i=e.muted?"mute":"volume_slider";e.trackAction(i,t,{volume:e.volume,includeVolume:!0})}function l(e){return function(t){var i=a(e,t);g(e,i)}}function u(e,t){var i,n;if(!t)return!1;if("touchmove"==e.type){i=e.changedTouches[0].pageX;n=e.changedTouches[0].pageY}else{i=e.pageX;n=e.pageY}return!t.contains(document.elementFromPoint(i-window.pageXOffset,n-window.pageYOffset))}function c(e){return function(){var t=window.document,i=function(){t.removeEventListener("pointermove",n);t.removeEventListener("pointerup",a)},n=function(t){u(t,e.volumeButton)&&i()},a=function(t){i();e.volumeButton.focus();if("mouse"==t.pointerType||e.controlsOpenComplete){e.player.muted=!e.player.muted;e.player.trackAction(e.player.mediaPlayer.muted?"mute":"unmute","click",P)}};t.addEventListener("pointermove",n);t.addEventListener("pointerup",a)}}function d(e){return function(i){function n(){if(r){l.removeEventListener("mousemove",r);l.removeEventListener("touchmove",r);l.removeEventListener("pointermove",r)}if(o){l.removeEventListener("mouseup",o);l.removeEventListener("touchend",o);l.removeEventListener("pointerup",o)}}function r(i){clearTimeout(e.volumeControlsTimer);c=!0;e.player.volume=a(e,i);if(u(i,e.volumeControls)){n();e.volumeControlsTimer=setTimeout(t(e),100)}}function o(i){e.player.volume=a(e,i);s(e.player,c?"drag":"click");n();clearTimeout(e.volumeControlsTimer);e.volumeControlsTimer=setTimeout(t(e),e.ui.config.controls.volumeDismissTime)}var l=window.document,c=!1;if("mousedown"==i.type){l.addEventListener("mousemove",r);l.addEventListener("mouseup",o)}else if("pointerdown"==i.type){l.addEventListener("pointermove",r);l.addEventListener("pointerup",o)}else if("touchstart"==i.type){l.addEventListener("touchmove",r);l.addEventListener("touchend",o)}e.player.volume=a(e,i)}}function p(e){return Utils.getActionFn(function(t){e.muted=!e.muted;var i=e.mediaPlayer.muted?"mute":"unmute";e.trackAction(i,t,P)})}function f(e){return function(){e.controlsOpenComplete=e.volumeControlsOpen}}function m(a){a.volumeControls=createElement("div","p_closed p_volumeControls");a.volumeControls.addEventListener("transitionend",f(a));var s=createElement("button","p_button",'<span class="p_hiddenElement" aria-hidden="true"></span>',Language.toolTipMute);s.addEventListener("mouseover",function(){Utils.className(s,"p_buttonHover")});s.addEventListener("mouseout",function(){Utils.className(s,"","p_buttonHover")});s.addEventListener("touchstart",function(){Utils.className(s,"p_buttonHover p_buttonTouch")},{passive:!0});s.addEventListener("touchend",function(){Utils.className(s,"","p_buttonHover p_buttonTouch")});a.ui.config.controls.muteButtonOnly&&Utils.multiAddEventListener(s,"touchend click mouseup",p(a.player));s.setAttribute("role","button");s.setAttribute("aria-live","polite");s.setAttribute("aria-label",Language.toolTipMute);s.className="p_button p_controlBarButton p_volumeButton";s.title=Language.toolTipMute;s.addEventListener("focusin",a.ui.showControlBar);a.ui.config.useHighResIcons&&updateExistingSvg(s,"audio");var u=s.getElementsByClassName("p_hiddenElement")[0];u&&(u.innerHTML=Language.toolTipMute);a.volumeButton=s;if(!a.ui.config.controls.muteButtonOnly){Utils.multiAddEventListener(a.volumeButton,"focus focusin",n(a,!0));a.volumeButton.addEventListener("blur",t(a));a.volumeButton.addEventListener("keydown",r(a));a.volumeButton.addEventListener("keyup",o(a));a.volumeButton.addEventListener("click",function(e){if(!Utils.isKeyboardClick(e)){clearTimeout(a.volumeControlsTimer);a.volumeControlsTimer=setTimeout(t(a),a.ui.config.controls.volumeDismissTime)}});if(window.PointerEvent){a.volumeButton.addEventListener("pointerdown",c(a));a.volumeControls.addEventListener("pointerout",i(a))}else{a.volumeButton.addEventListener("click",e(a));a.volumeControls.addEventListener("mouseout",t(a));a.volumeButton.addEventListener("touchstart",n(a))}a.volumeControls.addEventListener("mousemove",n(a,!0));a.sliderContainer=createElement("div","p_sliderContainer");a.sliderContainer.tabIndex="-1";a.volumeControls.appendChild(a.sliderContainer);Utils.multiAddEventListener(a.sliderContainer,"focus focusin",function(){a.volumeButton.focus()});a.sliderContainer.addEventListener("mouseover",l(a));var m=d(a);window.PointerEvent?a.sliderContainer.addEventListener("pointerdown",m):Utils.multiAddEventListener(a.sliderContainer,"mousedown touchstart",m);a.sliderControls=createElement("div","p_sliderControls");a.sliderContainer.appendChild(a.sliderControls);for(var h=0;v>h;h++){var E=createElement("div","p_volumeBarHolder"),P=createElement("div","p_volumeBar");E.style.left=C+h*b+Math.ceil(b/2)+"px";E.appendChild(P);a.sliderControls.appendChild(E)}a.volumeLevelIndicator=createElement("div","p_volumeLevel");a.volumeLevelIndicator.setAttribute("aria-hidden","true");a.sliderControls.appendChild(a.volumeLevelIndicator);var T=document.createElement("div");T.id="p_volumeHelpText";T.innerHTML=Language.volumeControlDescription;T.style.display="none";a.sliderContainer.appendChild(T);a.volumeButton.setAttribute("aria-describedby",T.id);a.volumeButton.setAttribute("aria-valuemin","0");a.volumeButton.setAttribute("aria-valuemax",v);a.volumeButton.setAttribute("role","slider");g(a)}y(a);a.volumeControls.appendChild(a.volumeButton)}function g(e,t){if(e.sliderContainer){t="undefined"!=typeof t?Math.min(v,Math.ceil(v*t)):e.player.muted?0:Math.ceil(e.player.volume*v);var i=e.sliderControls.childNodes;t>i.length-1&&(t=i.length-1);for(var n=i.length-2;n>=t;n--)i[n].childNodes[0].className="p_volumeBar p_afterVolume";n>=0&&(i[n].childNodes[0].className="p_volumeBar p_selectedVolume");for(--n;n>=0;n--)i[n].childNodes[0].className="p_volumeBar p_beforeVolume";e.volumeLevelIndicator.textContent=t;t>0?e.volumeButton.setAttribute("aria-valuetext",Language.get("audioToolTipVolume"+t)):e.volumeButton.setAttribute("aria-valuetext",Language.get("audioToolTipVolumeMuted"));e.volumeButton.setAttribute("aria-valuenow",t)}}function h(e){Utils.deleteCssRules(e.ui.stylesheet,[".audioUI.nonPointerFocus.svg .p_volumeButton:focus .p_svg, .audioUI.svg .p_volumeButton.p_buttonHover .p_svg, .audioUI.svg .p_volumeControls.p_open .p_svg","p_beforeVolume",".p_sliderControls:hover .p_selectedVolume","p_sliderContainer"]);e.ui.stylesheet.insertRule(".audioUI.nonPointerFocus.svg .p_volumeButton:focus .p_svg, .audioUI.svg .p_volumeButton.p_buttonHover .p_svg, .audioUI.svg .p_volumeControls.p_open .p_svg { fill: "+e.ui.config.colour+";}",e.ui.stylesheet.cssRules.length);e.ui.stylesheet.insertRule(".p_beforeVolume { background-color: "+e.ui.config.colour+" !important; }",0);e.ui.stylesheet.insertRule(".p_sliderControls:hover .p_selectedVolume { background-color: "+e.ui.config.foreColour+" !important; }",0);e.ui.stylesheet.insertRule(".p_sliderContainer { display: "+Utils.noneOrBlock(!e.ui.config.controls.muteButtonOnly)+"; }",0);e.ui.config.controls.volumeSlider?e.restore():e.remove()}function y(e){var t=e.player.muted,i=t?"p_volumeButton mute":"p_volumeButton audio",n=t?Language.toolTipUnmute:Language.toolTipMute,a=t?"mute":"audio";Utils.hasClass(e.volumeButton,"p_buttonHover")&&(i+=" p_buttonHover");Utils.hasClass(e.volumeButton,"p_buttonTouch")&&(i+=" p_buttonTouch");e.volumeButton.setAttribute("aria-label",n);e.volumeButton.className="p_button p_controlBarButton "+i;e.volumeButton.title=n;e.ui.config.useHighResIcons&&updateExistingSvg(e.volumeButton,a);var r=e.volumeButton.getElementsByClassName("p_hiddenElement")[0];r&&(r.innerHTML=n)}var v=11,b=9,C=6,E=220,P={includeVolume:!0},T=function(e){this.ui=e;"audio"==e.type&&(C=0);this.player=e.player;this.volumeControlsTimer=-1;this.volumeTrackTimer=-1;this.volumeControlsOpen=!1;m(this);h(this)};T.prototype={show:function(){Utils.className(this.volumeControls,"","hidden");if(!Utils.hasClass(this.volumeControls,"removed")){this.volumeControls.setAttribute("aria-hidden","false");this.volumeButton.disabled=!1}},hide:function(){Utils.className(this.volumeControls,"hidden");this.volumeControls.setAttribute("aria-hidden","true");this.volumeButton.disabled=!0},remove:function(){Utils.className(this.volumeControls,"removed");this.volumeControls.setAttribute("aria-hidden","true");this.volumeButton.disabled=!0},restore:function(){Utils.className(this.volumeControls,"","removed");if(!Utils.hasClass(this.volumeControls,"hidden")){this.volumeControls.setAttribute("aria-hidden","false");this.volumeButton.disabled=!1}},getDomNodes:function(){return[this.volumeControls]},openVolumeControls:function(e,i){clearTimeout(this.volumeControlsTimer);if(this.volumeControlsOpen)"touchstart"==e.type&&(this.player.muted=!this.player.muted);else{this.player.dispatch({type:"volumeOpening"});this.volumeControlsOpen=!0;Utils.className(this.volumeControls,"p_open","p_closed")}i||(this.volumeControlsTimer=setTimeout(t(this),this.ui.config.controls.volumeDismissTime))},closeVolumeControls:function(){clearTimeout(this.volumeControlsTimer);if(this.volumeControlsOpen){this.volumeControlsOpen=!1;this.controlsOpenComplete=!1;Utils.className(this.volumeControls,"p_closed","p_open");g(this);this.player.dispatch({type:"volumeClosed"})}},getRight:function(){return Utils.getOffset(this.volumeControls)+E},isOpen:function(){return this.volumeControlsOpen},getEventCallbacks:function(){var e=this;return{volumechange:function(){g(e);y(e)},languageUpdated:function(){y(e)},uiConfigUpdated:function(){h(e)}}}};return T}(),AudioButton=function(){function e(){Device.ios||Utils.className(this.button,"hovering")}function t(){Utils.className(this.button,"","hovering")}function i(){Utils.className(this.button,"pressed")
}function n(){Utils.className(this.button,"","pressed")}function a(a){var r=a.button=document.createElement("button"),o=a.buttonInner=document.createElement("div");o.className="p_audioButton_buttonInner";r.appendChild(o);var s=i.bind(a),l=n.bind(a);r.className="audioButton";Utils.hoverMoveAction(r,e.bind(a));Utils.hoverLeaveAction(r,t.bind(a));Utils.downAction(r,s);Utils.upAction(document,l,!0);Utils.multiAddEventListener(r,"focus focusin",Utils.getActionFn(function(){Utils.className(r,"focused")}));Utils.multiAddEventListener(r,"blur focusout",Utils.getActionFn(function(){Utils.className(r,"","focused")}));r.addEventListener("keydown",function(e){(e.keyCode==KEY_ENTER||e.keyCode==KEY_SPACE)&&s()});r.addEventListener("keyup",function(){l()})}function r(){a(this)}r.prototype={getDomNodes:function(){return this.button},show:function(){Utils.className(this.button,"","hidden");if(!Utils.hasClass(this.button,"removed")){this.button.setAttribute("aria-hidden","false");Utils.hasClass(this.button,"disabled")||(this.button.disabled=!1)}},hide:function(){Utils.className(this.button,"hidden");this.button.setAttribute("aria-hidden","true");this.button.disabled=!0;n.bind(this)();t.bind(this)()},remove:function(){Utils.className(this.button,"removed");this.button.setAttribute("aria-hidden","true");this.button.disabled=!0;n.bind(this)();t.bind(this)()},restore:function(){Utils.className(this.button,"","removed");if(!Utils.hasClass(this.button,"hidden")){this.button.setAttribute("aria-hidden","false");Utils.hasClass(this.button,"disabled")||(this.button.disabled=!1)}},setActionFunction:function(e){Utils.multiAddEventListener(this.button,"mouseup touchend click",Utils.getActionFn(e,!1,!0))},disable:function(){Utils.className(this.button,"disabled");this.button.disabled=!0;n.bind(this)();t.bind(this)()},enable:function(){Utils.className(this.button,"","disabled");Utils.hasClass(this.button,"hidden")||Utils.hasClass(this.button,"removed")||(this.button.disabled=!1)}};return r}(),AudioPlayButton=function(){function e(e){e.button.id="p_audioui_playpause";e.button.setAttribute("aria-label",Language.toolTipPlay);var t=Utils.createSVGElement("svg",{width:68,height:68,viewbox:"0 0 68 68"}),i=e.surroundingCircle=Utils.createSVGElement("circle",{id:"p_audioui_playpause_circle",cx:34,cy:34,r:32}),n=e.highlightCircle=Utils.createSVGElement("circle",{id:"p_audioui_playpause_highlightCircle",cx:34,cy:34,r:34}),a=e.playIcon=Utils.createSVGElement("polygon",{id:"p_audioui_playpause_playIcon",points:"27 46 46 34 27 22"}),r=e.pauseIcon=Utils.createSVGElement("g",{id:"p_audioui_playpause_pauseIcon"}),o=Utils.createSVGElement("rect",{x:26,y:24,width:6,height:20}),s=Utils.createSVGElement("rect",{x:36,y:24,width:6,height:20});r.appendChild(o);r.appendChild(s);t.appendChild(i);t.appendChild(n);t.appendChild(e.spinner.getDomNodes()[0]);t.appendChild(a);t.appendChild(r);e.buttonInner.appendChild(t)}function t(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_playpause_highlightCircle"]);e.ui.stylesheet.insertRule("#p_audioui_playpause_highlightCircle { fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function i(i){this.ui=i;this.state="play";AudioButton.call(this);this.spinner=new AudioSpinner(i);e(this);t(this)}i.prototype=Utils.object(AudioButton.prototype);i.prototype.getEventCallbacks=function(){var e=this;return{notPlayingState:function(){e.state="play";e.playIcon.style.opacity=1;e.pauseIcon.style.opacity=0;e.button.setAttribute("aria-label",Language.toolTipPlay)},playingState:function(){e.state="pause";e.playIcon.style.opacity=0;e.pauseIcon.style.opacity=1;e.button.setAttribute("aria-label",Language.toolTipPause)},uiConfigUpdated:function(){t(e)},showBuffer:function(){e.surroundingCircle.style.opacity=0},bufferHidden:function(){e.surroundingCircle.style.opacity=1},languageUpdated:function(){"play"==e.state?e.button.setAttribute("aria-label",Language.toolTipPlay):e.button.setAttribute("aria-label",Language.toolTipPause)}}};return i}(),BackIntervalButton=function(){function e(e){e.button.setAttribute("aria-label",Language.skipBack.replace("{seconds}",e.ui.player.config.skipInterval))}function t(t){t.button.id="p_audioui_backInterval";Utils.className(t.button,"p_audioui_intervalButton");e(t);var i=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),n=Utils.createSVGElement("path",{id:"p_audioui_backInterval_backArrow","class":"p_audioui_intervalArrow",d:"M23.9785895,8.59327393 C23.926122,8.59327393 23.8224363,8.59327393 23.8224363,8.59327393 L22.3845769,8.5920247 L25.6962756,5.28657205 L23.9298697,3.52391381 L17.3039737,10.1348191 L23.9298697,16.7457244 L25.6962756,14.9830662 L22.4158075,11.7088442 L23.8224363,11.7113426 C23.8224363,11.7113426 23.926122,11.7100934 23.9785895,11.7100934 C31.9124254,11.7100934 38.3446914,18.1286179 38.3446914,26.0462138 C38.3446914,33.9638098 31.9124254,40.3823343 23.9785895,40.3823343 C16.0435044,40.3823343 9.61248769,33.9638098 9.61248769,26.0462138 C9.61248769,26.0299739 9.61498614,26.0149832 9.61498614,25.9987433 L6.49192052,25.9987433 C6.49192052,26.0149832 6.48942206,26.0299739 6.48942206,26.0462138 C6.48942206,35.6852436 14.3195722,43.4991538 23.9785895,43.4991538 C33.6376069,43.4991538 41.467757,35.6852436 41.467757,26.0462138 C41.467757,16.4071841 33.6376069,8.59327393 23.9785895,8.59327393"}),a=document.createElement("div");a.className="p_audioui_intervalNumber";var r=document.createElement("span");r.className="p_audioui_intervalNumber_sign";r.textContent="-";var o=t.intervalNumber=document.createElement("span");o.className="p_audioui_intervalNumber_number";o.textContent=t.ui.player.config.skipInterval;a.appendChild(r);a.appendChild(o);i.appendChild(n);t.buttonInner.appendChild(i);t.buttonInner.appendChild(a)}function i(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_backInterval:not([disabled]).hovering, #p_audioui_backInterval:not([disabled]).pressed, .nonPointerFocus #p_audioui_backInterval:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_backInterval:not([disabled]).hovering, #p_audioui_backInterval:not([disabled]).pressed, .nonPointerFocus #p_audioui_backInterval:not([disabled]).focused { color: "+e.ui.config.colour+"; fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function n(e,t){t._.timeHelper.earliestSeek>=t._.timeHelper.time&&"playing"!=t._.playingState?e.disable():e.enable()}function a(e){this.ui=e;AudioButton.call(this);t(this);i(this)}a.prototype=Utils.object(AudioButton.prototype);a.prototype.getEventCallbacks=function(){var t=this;return{uiConfigUpdated:function(){i(t)},seeked:function(e){n(t,e)},timeupdate:function(e){n(t,e)},playing:function(e){n(t,e)},languageUpdated:function(){e(t)},configUpdated:function(){e(t);t.intervalNumber.textContent=t.ui.player.config.skipInterval}}};return a}(),ForwardIntervalButton=function(){function e(e){e.button.setAttribute("aria-label",Language.skipForward.replace("{seconds}",e.ui.player.config.skipInterval))}function t(t){t.button.id="p_audioui_forwardInterval";Utils.className(t.button,"p_audioui_intervalButton");e(t);var i=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),n=Utils.createSVGElement("path",{id:"p_audioui_forwardInterval_forwardArrow","class":"p_audioui_intervalArrow",d:"M23.9911839,8.58201848 C24.043535,8.58201848 24.1469905,8.58201848 24.1469905,8.58201848 L25.5816575,8.58077203 L22.2773116,5.28265844 L24.0397956,3.52391381 L30.6509802,10.120141 L28.8872498,11.8801321 L24.0397956,16.7176146 L22.2773116,14.9576235 L25.5504962,11.6919177 L24.1469905,11.6931642 C24.1469905,11.6931642 24.043535,11.6919177 23.9911839,11.6919177 C16.0749635,11.6919177 9.656979,18.0961912 9.656979,25.9962078 C9.656979,33.8962244 16.073717,40.3004979 23.9911839,40.3004979 C31.9074044,40.3004979 38.3253889,33.8962244 38.3253889,25.9962078 C38.3253889,25.9800039 38.322896,25.9650465 38.322896,25.9488426 L41.4390275,25.9488426 C41.4390275,25.9650465 41.4415204,25.9800039 41.4415204,25.9962078 C41.4415204,35.6138361 33.6287555,43.4103971 23.9911839,43.4103971 C14.3536124,43.4103971 6.54084749,35.6138361 6.54084749,25.9962078 C6.54084749,16.3785795 14.3536124,8.58201848 23.9911839,8.58201848"}),a=document.createElement("div");a.className="p_audioui_intervalNumber";var r=document.createElement("span");r.className="p_audioui_intervalNumber_sign";r.textContent="+";var o=t.intervalNumber=document.createElement("span");o.className="p_audioui_intervalNumber_number";o.textContent=t.ui.player.config.skipInterval;a.appendChild(r);a.appendChild(o);i.appendChild(n);t.buttonInner.appendChild(i);t.buttonInner.appendChild(a)}function i(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_forwardInterval:not([disabled]).hovering, #p_audioui_forwardInterval:not([disabled]).pressed, .nonPointerFocus #p_audioui_forwardInterval:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_forwardInterval:not([disabled]).hovering, #p_audioui_forwardInterval:not([disabled]).pressed, .nonPointerFocus #p_audioui_forwardInterval:not([disabled]).focused { color: "+e.ui.config.colour+"; fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function n(e,t){t._.timeHelper.time-t._.timeHelper.latestSeek>-.002?e.disable():e.enable()}function a(e){this.ui=e;AudioButton.call(this);t(this);i(this)}a.prototype=Utils.object(AudioButton.prototype);a.prototype.getEventCallbacks=function(){var t=this;return{uiConfigUpdated:function(){i(t)},seeked:function(e){n(t,e)},timeupdate:function(e){n(t,e)},playing:function(e){n(t,e)},languageUpdated:function(){e(t)},configUpdated:function(){e(t);t.intervalNumber.textContent=t.ui.player.config.skipInterval}}};return a}(),PreviousButton=function(){function e(e){e.button.id="p_audioui_previousButton";Utils.className(e.button,"p_audioui_playlistButton");e.button.setAttribute("aria-label",Language.previousItem);var t=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),i=Utils.createSVGElement("path",{id:"p_audioui_previousButton_chevron","class":"p_audioui_playlistChevron",d:"M16.9954676,31.996911 L16.9954676,16.0004999 L18.495178,16.0004999 L18.495178,31.996911 L16.9954676,31.996911 Z M18.495178,23.9984555 L30.9927648,16 L30.9927648,20.0792123 L24.3585458,23.9984555 L30.9927648,27.9181986 L30.9927648,31.996911 L18.495178,23.9984555 Z"});t.appendChild(i);e.buttonInner.appendChild(t)}function t(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_previousButton:not([disabled]).hovering, #p_audioui_previousButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_previousButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_previousButton:not([disabled]).hovering, #p_audioui_previousButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_previousButton:not([disabled]).focused { fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function i(e,t){t._.mediaItem&&!t._.mediaItem.live&&t._.ui.config.controls.includePreviousButton?e.restore():e.remove()}function n(i){this.ui=i;AudioButton.call(this);e(this);t(this)}n.prototype=Utils.object(AudioButton.prototype);n.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(n){t(e);i(e,n)},mediaItemChanged:function(t){i(e,t)},languageUpdated:function(){e.button.setAttribute("aria-label",Language.previousItem)},seeked:function(){},playing:function(){},timeupdate:function(t){t._.timeHelper.time>5||t._.hasPrevious?e.enable():e.disable()}}};return n}(),NextButton=function(){function e(e){e.button.id="p_audioui_nextButton";Utils.className(e.button,"p_audioui_playlistButton");e.button.setAttribute("aria-label",Language.nextItem);var t=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),i=Utils.createSVGElement("path",{id:"p_audioui_nextButton_chevron","class":"p_audioui_playlistChevron",d:"M29.5034828,32 L29.5034828,16 L31.0034828,16 L31.0034828,32 L29.5034828,32 Z M17.0034828,20.0803 L17.0034828,16.0003 L29.5034828,23.9998 L17.0034828,31.9998 L17.0034828,27.9203 L23.6399828,23.9998 L17.0034828,20.0803 Z"});t.appendChild(i);e.buttonInner.appendChild(t)}function t(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_nextButton:not([disabled]).hovering, #p_audioui_nextButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_nextButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_nextButton:not([disabled]).hovering, #p_audioui_nextButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_nextButton:not([disabled]).focused { fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function i(e,t){t._.mediaItem&&!t._.mediaItem.live&&t._.ui.config.controls.includeNextButton?e.restore():e.remove()}function n(i){this.ui=i;AudioButton.call(this);e(this);t(this)}n.prototype=Utils.object(AudioButton.prototype);n.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(n){t(e);i(e,n)},mediaItemChanged:function(t){i(e,t);t._.hasNext?e.enable():e.disable()},languageUpdated:function(){e.button.setAttribute("aria-label",Language.nextItem)}}};return n}(),BackToStartButton=function(){function e(e){return function(){function t(n){if(void 0===i){i=n;e.textholder.style.opacity=0}var a=(n-i)/e.animationDuration*360;e.angle=e.angle-a;-360>e.angle&&(e.angle=-360);e.startArrow.setAttribute("transform","rotate("+e.angle+",26,26)");i=n;if(e.angle>-360)e.animationID=requestAnimationFrame(t);else{e.angle=0;e.textholder.style.opacity=1}}var i;e.animationID&&cancelAnimationFrame(e.animationID);e.animationID=requestAnimationFrame(t)}}function t(t){t.button.id="p_audioui_backToStartButton";Utils.className(t.button,"p_audioui_jumpButton");t.button.setAttribute("aria-label",Language.listenFromStart);t.setActionFunction(e(t));var i=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),n=t.startArrow=Utils.createSVGElement("g",{id:"p_audioui_backToStartButton_arrow","class":"p_audioui_jumpButtonArrow"}),a=Utils.createSVGElement("polygon",{points:"20.185946 9.0716033 15.2310161 14.0162552 16.5522061 15.3346422 20.185946 18.9599727 21.5080704 17.6415858 17.8743305 14.0162552 21.5080704 10.3899903"}),r=Utils.createSVGElement("path",{d:"M16.6028486,35.1420282 C18.9705259,37.5078367 22.2436014,38.9719843 25.8595883,38.9719843 C33.0840873,38.9719843 38.940678,33.1275403 38.940678,25.9198599 C38.940678,18.7112452 33.0840873,12.8677355 25.8595883,12.8677355 C25.820345,12.8677355 25.7427929,12.8677355 25.7427929,12.8677355 L24.666406,12.8668012 L27.1443382,10.3944752 L25.8231481,9.07608824 L20.8672839,14.0207401 L25.8231481,18.9644577 L27.1443382,17.6460707 L24.6906995,15.1980382 L25.7418585,15.1989726 C25.7418585,15.1989726 25.820345,15.1980382 25.8595883,15.1980382 C31.7937312,15.1980382 36.6047691,19.9978638 36.6047691,25.9198599 C36.6047691,31.8409217 31.7937312,36.6407473 25.8595883,36.6407473 C22.8864435,36.6407473 20.1954765,35.4363527 18.2501316,33.489139"}),o=t.textholder=document.createElement("div");o.id="p_audioui_backToStartButton_text";o.innerHTML="START";n.appendChild(r);n.appendChild(a);i.appendChild(n);t.buttonInner.appendChild(i);t.buttonInner.appendChild(o)}function i(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_backToStartButton:not([disabled]).hovering, #p_audioui_backToStartButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_backToStartButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_backToStartButton:not([disabled]).hovering, #p_audioui_backToStartButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_backToStartButton:not([disabled]).focused { color: "+e.ui.config.colour+"; fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function n(e,t){t._.timeHelper.earliestSeek>=t._.timeHelper.time&&"playing"!=t._.playingState?e.disable():e.enable()}function a(e){this.ui=e;this.angle=0;this.animationDuration=600;AudioButton.call(this);t(this);i(this)}a.prototype=Utils.object(AudioButton.prototype);a.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(){i(e)},mediaItemChanged:function(t){t._.mediaItem.live?e.restore():e.remove()},seeked:function(t){n(e,t)},timeupdate:function(t){n(e,t)},playing:function(t){n(e,t)},languageUpdated:function(){e.button.setAttribute("aria-label",Language.listenFromStart)}}};return a}(),ToLiveButton=function(){function e(e){return function(){function t(n){if(void 0===i){i=n;e.textholder.style.opacity=0}var a=(n-i)/e.animationDuration*360;e.angle=e.angle+a;e.angle>360&&(e.angle=360);e.startArrow.setAttribute("transform","rotate("+e.angle+",22,26)");i=n;if(360>e.angle)e.animationID=requestAnimationFrame(t);else{e.angle=0;e.textholder.style.opacity=1}}var i;e.animationID&&cancelAnimationFrame(e.animationID);e.animationID=requestAnimationFrame(t)}}function t(t){t.button.id="p_audioui_toLiveButton";Utils.className(t.button,"p_audioui_jumpButton");t.button.setAttribute("aria-label",Language.goToLivePoint);t.setActionFunction(e(t));var i=Utils.createSVGElement("svg",{width:48,height:48,viewbox:"0 0 48 48"}),n=t.startArrow=Utils.createSVGElement("g",{id:"p_audioui_toLiveButton_arrow","class":"p_audioui_jumpButtonArrow"}),a=Utils.createSVGElement("polygon",{points:"31.413028 15.2730478 27.7728902 18.9047616 26.4493738 17.5840533 30.0895117 13.9523395 26.4493738 10.3196897 27.7728902 8.99898137 32.7374804 13.9523395"}),r=Utils.createSVGElement("path",{d:"M31.3627644,35.1147477 C28.9909183,37.4847218 25.7120798,38.9514474 22.089726,38.9514474 C14.8525067,38.9514474 8.98560405,33.0976489 8.98560405,25.8763417 C8.98560405,18.6550345 14.8525067,12.801236 22.089726,12.801236 C22.1290384,12.801236 22.2067271,12.802172 22.2067271,12.802172 L23.2850092,12.8003 L20.8027141,10.3245569 L22.1262304,9.00384862 L27.0908206,13.9562707 L22.1262304,18.9096288 L20.8027141,17.5879845 L23.2606729,15.1356417 L22.2076631,15.1365777 C22.2076631,15.1365777 22.1290384,15.1356417 22.089726,15.1356417 C16.1451347,15.1356417 11.3256258,19.9439185 11.3256258,25.8763417 C11.3256258,31.8078289 16.1451347,36.6161057 22.089726,36.6161057 C25.0681058,36.6161057 27.7638109,35.4095904 29.712581,33.4589483"}),o=t.textholder=document.createElement("div");o.id="p_audioui_toLiveButton_text";o.innerHTML="LIVE";n.appendChild(r);n.appendChild(a);i.appendChild(n);t.buttonInner.appendChild(i);t.buttonInner.appendChild(o)}function i(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_toLiveButton:not([disabled]).hovering, #p_audioui_toLiveButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_toLiveButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_toLiveButton:not([disabled]).hovering, #p_audioui_toLiveButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_toLiveButton:not([disabled]).focused { color: "+e.ui.config.colour+"; fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length)}function n(e,t){t._.timeHelper.time-t._.timeHelper.latestSeek>-.002?e.disable():e.enable()}function a(e){this.ui=e;this.angle=0;this.animationDuration=600;AudioButton.call(this);t(this);i(this)}a.prototype=Utils.object(AudioButton.prototype);a.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(){i(e)},mediaItemChanged:function(t){t._.mediaItem.live?e.restore():e.remove()},seeked:function(t){n(e,t)},timeupdate:function(t){n(e,t)},playing:function(t){n(e,t)},languageUpdated:function(){e.button.setAttribute("aria-label",Language.goToLivePoint)}}};return a}(),PopOutPlayerButton=function(){function e(e){e.button.id="p_audioui_popOutPlayerButton";var t=Utils.createSVGElement("svg",{width:20,height:20,viewBox:"0 0 20 20"}),i=Utils.createSVGElement("path",{d:"M17.5,2.5v8.75H8.75V2.5H17.5M20,0H6.25V13.75H20V0Z"}),n=Utils.createSVGElement("polygon",{points:"12.5 18.75 1.25 18.75 1.25 7.5 5 7.5 5 6.25 0 6.25 0 20 13.75 20 13.75 15 12.5 15 12.5 18.75"});t.appendChild(n);t.appendChild(i);var a=e.buttonText=document.createElement("div");Utils.className(a,"p_audioui_popOutPlayerButton_text");a.textContent=Language.popOutPlayer;e.buttonInner.appendChild(a);e.buttonInner.appendChild(t)}function t(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_popOutPlayerButton:not([disabled]).hovering, #p_audioui_popOutPlayerButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_popOutPlayerButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_popOutPlayerButton:not([disabled]).hovering, #p_audioui_popOutPlayerButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_popOutPlayerButton:not([disabled]).focused { color: "+e.ui.config.colour+"; fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length);e.ui.config.controls.popout?e.restore():e.remove()}function i(i){this.ui=i;AudioButton.call(this);e(this);t(this)}i.prototype=Utils.object(AudioButton.prototype);i.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(){t(e)},languageUpdated:function(){e.buttonText.textContent=Language.popOutPlayer}}};return i}(),PlaybackSettingsButton=function(){function e(e){e.button.id="p_audioui_playbackSettingsButton";e.button.setAttribute("aria-label",Language.openPlaybackSettingsMenu);var t=Utils.createSVGElement("svg",{width:48,height:48,viewBox:"0 0 44 44"}),i=Utils.createSVGElement("path",{d:"M22.76522,23.847576 C21.7467559,24.2695688 20.5757973,23.785077 20.1528122,22.7645945 C19.7303271,21.744612 20.21531,20.575132 21.234774,20.1521393 C22.254238,19.7306465 23.4246967,20.2146382 23.8476818,21.2341207 C24.2706668,22.2546033 23.784184,23.4260832 22.76522,23.847576 M29.8439701,23.8605758 L28.0525333,23.1185885 C28.1885285,22.3896009 28.1955283,21.6326139 28.0560332,20.8801268 L29.8439701,20.1396395 C29.9724655,20.0861404 30.0339634,19.9376429 29.9809652,19.8096451 L29.1919931,17.9051777 C29.139495,17.7776799 28.9910002,17.715681 28.8630047,17.7691801 L27.0735679,18.5101674 C26.6400832,17.8791782 26.0996023,17.3481873 25.4891238,16.9286945 L26.2310976,15.1377251 C26.2840957,15.0092273 26.2225979,14.8607299 26.0941025,14.8077308 L24.1906696,14.0192443 C24.0626742,13.9657452 23.9146794,14.0277441 23.8611813,14.1562419 L23.1192075,15.9472113 C22.3902332,15.8122136 21.6327599,15.8047137 20.8807865,15.9442113 L20.1393127,14.1562419 C20.0863145,14.0277441 19.9378198,13.9657452 19.8093243,14.0192443 L17.9058915,14.8077308 C17.777396,14.8617299 17.7153982,15.0102273 17.7693963,15.1377251 L18.5098702,16.9271945 C17.8798924,17.3596871 17.3489112,17.9001778 16.929926,18.5106674 L15.1384892,17.7686801 C15.0104937,17.715681 14.861499,17.7776799 14.8090008,17.9051777 L14.0200287,19.8096451 C13.9670305,19.9376429 14.0280284,20.0861404 14.1570238,20.1396395 L15.9479606,20.8816268 C15.8129654,21.6091143 15.8049657,22.3666013 15.9444607,23.1190885 L14.1560239,23.8605758 C14.0275284,23.9135748 13.9655306,24.0620723 14.0195287,24.1905701 L14.8090008,26.0945375 C14.8619989,26.2225353 15.0104937,26.2845342 15.1384892,26.2315352 L16.927426,25.4900479 C17.3609107,26.121037 17.9008917,26.651528 18.5113701,27.0700208 L17.7698963,28.8619901 C17.7163982,28.9899879 17.777896,29.1384854 17.9063915,29.1919845 L19.8103243,29.980471 C19.9388197,30.03447 20.0868145,29.9724711 20.1398126,29.8439733 L20.8817865,28.052504 C21.6102607,28.1875017 22.367234,28.1955015 23.1207074,28.0555039 L23.8616813,29.8439733 C23.9151794,29.9724711 24.0636741,30.03347 24.1916696,29.980471 L26.0951024,29.1914845 C26.2235979,29.1384854 26.2850957,28.9899879 26.2320976,28.8619901 L25.4901238,27.0730207 C26.1216015,26.6395282 26.6515828,26.0995374 27.071068,25.4890479 L28.8625047,26.2310352 C28.9900002,26.2845342 29.139495,26.2225353 29.1919931,26.0945375 L29.9809652,24.1905701 C30.0339634,24.0620723 29.9724655,23.9130749 29.8439701,23.8605758"});t.appendChild(i);e.buttonInner.appendChild(t)}function t(e){Utils.deleteCssRules(e.ui.stylesheet,["#p_audioui_playbackSettingsButton:not([disabled]).hovering, #p_audioui_playbackSettingsButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_playbackSettingsButton:not([disabled]).focused"]);e.ui.stylesheet.insertRule("#p_audioui_playbackSettingsButton:not([disabled]).hovering, #p_audioui_playbackSettingsButton:not([disabled]).pressed, .nonPointerFocus #p_audioui_playbackSettingsButton:not([disabled]).focused { fill: "+e.ui.config.colour+"; }",e.ui.stylesheet.cssRules.length);e.ui.config.playbackSettingsPanel&&e.ui.config.playbackSettingsPanel.enabled?e.restore():e.remove()}function i(i){this.ui=i;AudioButton.call(this);e(this);t(this)}i.prototype=Utils.object(AudioButton.prototype);i.prototype.getEventCallbacks=function(){var e=this;return{uiConfigUpdated:function(){t(e)},languageUpdated:function(){}}};return i}(),BaseUI=function(){function e(e,t){e=(e+"").replace("0x","#");return e.match(/^#[a-z0-9]{3,6}$/i)||"transparent"==e?e:t}function t(){return{markerData:{get:function(){return null},set:function(){},configurable:!0}}}function i(){function e(){clearTimeout(i);a=!0;Utils.hasClass(document.body,"nonPointerFocus")&&Utils.className(document.body,"","nonPointerFocus");i=setTimeout(t,250)}function t(){a=!1}var i,n,a=!1,r=!1;Utils.hasClass(document.body,"nonPointerFocus")||Utils.className(document.body,"nonPointerFocus");if(window.PointerEvent)document.addEventListener("pointerdown",e,!0);else{document.addEventListener("touchstart",e,!0);document.addEventListener("mousedown",e,!0)}window.addEventListener("focus",function(){clearTimeout(n);r=!0;n=setTimeout(function(){r=!1},250)});document.addEventListener("focus",function(){a||r||Utils.hasClass(document.body,"nonPointerFocus")||Utils.className(document.body,"nonPointerFocus")},!0)}function n(e){return function(t){Utils.className(document.body,"focusEnabled");if(!t.metaKey&&!t.ctrlKey){if((t.keyCode==KEY_SPACE&&e.config.controls.spaceControlsPlayback||t.keyCode===KEY_K&&e.config.controls.experimentalShortcuts)&&(t.target==document.body||Utils.hasClass(t.target,"p_accessibleHitArea"))){e.togglePlay("shortcut_key_press");stopIt(t)}if(!t.shiftKey&&t.keyCode>=KEY_0&&KEY_9>=t.keyCode){if(e.config.controls.experimentalShortcuts)if(e.canDisplayRemoteInput()){e.displayRemoteInput();var i=(t.keyCode-KEY_0).toString();e.appendRemoteInputContent(i)}else{var n=t.keyCode-KEY_0;e.player.seekToPercent(n/10);e.player.trackAction("seek_numberkey_"+n.toString(),"shortcut_key_press")}if(!e.config.controls.experimentalShortcuts&&t.keyCode===KEY_8&&e.canDisplayRemoteInput()){e.displayRemoteInput();e.appendRemoteInputContent("8")}stopIt(t)}if(t.keyCode==KEY_M){e.player.trackAction(e.player.mediaPlayer.muted?"unmute":"mute","shortcut_key_press");e.player.muted=!e.player.muted}if(t.keyCode===KEY_J&&e.config.controls.experimentalShortcuts){e.player.trackAction("seekbackward","shortcut_key_press");e.player.seekBackward(e.player.config.skipInterval);stopIt(t)}if(t.keyCode===KEY_L&&e.config.controls.experimentalShortcuts){e.player.trackAction("seekforward","shortcut_key_press");e.player.seekForward(e.player.config.skipInterval);stopIt(t)}if("MediaPlayPause"==t.code||"MediaPlayPause"==t.key){e.togglePlay("shortcut_key_press");stopIt(t)}else if("MediaTrackNext"==t.code||"MediaTrackNext"==t.key){e.player.next();stopIt(t)}else if("MediaTrackPrevious"==t.code||"MediaTrackPrevious"==t.key){e.player.previous();stopIt(t)}}}}var a=function(a,r,o){var s=this;s.player=a;s.container=null;s.UIinfoObject={};s.enabled=!0;s.config=Utils.merge(r,o);i();Utils.className(document.body,"font-family-sans");if(!s.config.disableReithFonts){Utils.loadFontFile(s.player,"ReithSans");s.config.useFontSalt&&Utils.className(document.body,"font-feature-salt")}s.togglePlay=function(e){if((a.paused||a.ended)&&"notplaying"===a.playingState){a.requestGuidanceAndPlay();a.trackAction("play",e)}else if("playing"===a.playingState){a.pause();a.trackAction("pause",e)}};s.config.colour=e(s.config.colour,r.colour);s.config.foreColour=e(s.config.foreColour,r.foreColour);s.config.alternateColour=e(s.config.alternateColour,r.colour);s.config.alternateForeColour=e(s.config.alternateForeColour,r.foreColour);s.config.miniMode.backgroundColour=e(s.config.miniMode.backgroundColour,r.miniMode.backgroundColour);s.config.cta.backgroundColour=e(s.config.cta.backgroundColour,r.cta.backgroundColour);s.config.useHighResIcons=s.config.useHighResIcons&&!Device.disallowHighResIcons;s.config.useHighResIcons&&Device.loadSVGForHighResIcon(s);Utils.defineProperties(s,t(s));document.addEventListener("keydown",n(s))};a.prototype={initialise:function(){var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e);this.stylesheet=e.sheet;Device.iPhoneIos10&&Utils.className(document.body,"iPhoneIos10","");Device.iPhoneIos11orGreater&&Utils.className(document.body,"iPhoneIos11orGreater","");this.config.useHighResIcons&&Utils.className(document.body,"svg")},updateConfig:function(e){this.config=Utils.merge(this.config,e);this.player.config.ui=this.config;var t=JSON.stringify(this.config);if(t==this.lastConfigUpdate)return!1;this.lastConfigUpdate=t;this.updateStyles();this.player.dispatch({type:"uiConfigUpdated"});return!0},timeUpdate:emptyFunction,updateStyles:emptyFunction,fadeInNewPosterImage:emptyFunction,slideInNewPosterImage:emptyFunction,zoomInPosterImage:emptyFunction,showPoster:emptyFunction,updatePoster:emptyFunction,hidePoster:emptyFunction,hideEffects:emptyFunction,updateLayout:emptyFunction,hideControlBar:emptyFunction,showControlBar:emptyFunction,updateDisplayedProgress:emptyFunction,displayCover:emptyFunction,checkIfCanDisplaySeekBar:emptyFunction,showCta:function(){this.inPrePlayState=!0},hideCta:function(){this.inPrePlayState=!1},hideAllControls:emptyFunction,dispatchUIInfo:emptyFunction,getBackgroundImageUrl:emptyFunction,resizeFixEnd:emptyFunction,resetGuidance:emptyFunction,updateTimeDisplay:emptyFunction,updateGuidance:emptyFunction,canDisplayRemoteInput:function(){return!1},displayRemoteInput:emptyFunction,appendRemoteInputContent:emptyFunction,getRemoteInputContent:emptyFunction,clearRemoteInput:emptyFunction,ensureRemoteInput:emptyFunction};return a}(),AudioTimeDisplays=function(){function e(e){var t=e.leftTimeDisplay=document.createElement("div");t.id="p_audioui_leftTimeDisplay";n(t);var i=e.rightTimeDisplay=document.createElement("div");i.id="p_audioui_rightTimeDisplay";n(i);var a=e.liveIcon=Utils.createSVGElement("svg",{width:12,height:12}),r=Utils.createSVGElement("path",{d:"M5.96681502,10.3410568 C8.38342771,10.3410568 10.3424794,8.38388329 10.3424794,5.96958745 C10.3424794,3.5552916 8.38342771,1.59811812 5.96681502,1.59811812 C3.55020233,1.59811812 1.59115067,3.5552916 1.59115067,5.96958745 C1.59115067,8.38388329 3.55020233,10.3410568 5.96681502,10.3410568 Z M5.96681502,11.930682 C2.67143408,11.930682 0,9.26180906 0,5.96958745 C0,2.67736584 2.67143408,0.00849290887 5.96681502,0.00849290887 C9.26219596,0.00849290887 11.93363,2.67736584 11.93363,5.96958745 C11.93363,9.26180906 9.26219596,11.930682 5.96681502,11.930682 Z"}),o=Utils.createSVGElement("circle",{"class":"p_audioui_liveIconCentre",cx:6,cy:6,r:3});a.appendChild(o);a.appendChild(r);a.style.display="none";var s=e.rightText=document.createElement("span");i.appendChild(s);i.appendChild(a)}function t(e){if(e.player.mediaItem&&e.player.mediaItem.live)if(e.player.timeHelper.latestSeek==e.player.timeHelper.time){e.rightText.textContent="LIVE";e.liveIcon.style.display="block";i(e.rightTimeDisplay)}else if(e.player.timeHelper.time&&e.player.timeHelper.latestSeek){e.rightText.textContent=e.ui.config.timesRelativeToLive?e.player.timeHelper.secondsToHMS(e.player.timeHelper.time-e.player.timeHelper.latestSeek):e.player.timeHelper.getTimeString();e.liveIcon.style.display="none";i(e.rightTimeDisplay)}else n(e.rightTimeDisplay);else if(e.player.mediaItem){var t=e.player.timeHelper.getDurationOrEndString();if(t){e.rightText.textContent=t;e.liveIcon.style.display="none";i(e.rightTimeDisplay)}else n(e.rightTimeDisplay)}else n(e.rightTimeDisplay);if(e.player.mediaItem&&!e.player.mediaItem.live){var a=e.player.timeHelper.getTimeString();if(a){e.leftTimeDisplay.textContent=a;i(e.leftTimeDisplay)}else n(e.leftTimeDisplay)}else n(e.leftTimeDisplay)}function i(e){if(1!==e.style.opacity){e.style.opacity=1;
e.setAttribute("aria-hidden","false")}}function n(e){if(0!==e.style.opacity){e.style.opacity=0;e.setAttribute("aria-hidden","true")}}function a(t){this.ui=t;this.player=t.player;e(this)}a.prototype={getDomNodes:function(){return[this.leftTimeDisplay,this.rightTimeDisplay]},getEventCallbacks:function(){var e=this;return{timeupdate:function(){t(e)},showCta:function(){e.player.playlist&&e.player.playlist.hasLive?e.setLive():e.reset()}}},setLive:function(){this.rightText.textContent="LIVE";this.liveIcon.style.display="block";i(this.rightTimeDisplay);n(this.leftTimeDisplay)},reset:function(){n(this.rightTimeDisplay);n(this.leftTimeDisplay)}};return a}(),AudioCtaDuration=function(){function e(e){this.ui=e;var t=this.component=document.createElement("div");t.id="p_audioui_ctaDuration";e.player.pushMediaEventFunctions(this.getEventCallbacks())}e.prototype={show:function(){Utils.className(this.component,"","hidden");Utils.hasClass(this.component,"removed")||this.component.setAttribute("aria-hidden","false")},hide:function(){Utils.className(this.component,"hidden");this.component.setAttribute("aria-hidden","true")},remove:function(){Utils.className(this.component,"removed");this.component.setAttribute("aria-hidden","true")},restore:function(){Utils.className(this.component,"","removed");Utils.hasClass(this.component,"hidden")||this.component.setAttribute("aria-hidden","false")},getDomNodes:function(){return this.component},getEventCallbacks:function(){var e=this;return{playlistLoaded:function(t){if(t.playlist.hasLive||"duration"!=e.ui.config.cta.mode||""===t.playlist.programmeDuration)e.remove();else{e.component.textContent=t.playlist.programmeDuration;e.restore()}}}}};return e}(),UI=function(){function e(e){return(e+"").toLowerCase()}function t(e){return e&&"block"===e.style.display}function i(e){if(e.controls.parentElement){var t=e.controls.parentElement.querySelector(":hover");if(!t)return!1;if(t==e.controls)return!0;var i=document.getElementById("p_pluginContainer");if(i==t){var n=i.querySelectorAll(":hover");if(n.length>0&&!Utils.hasClass(n[n.length-1],"notInteractiveContent"))return!0}return!1}}function n(e,t,i){var n=t||Utils.getOffset(e)-i<=0;Utils.setOrUnsetClass(e,"p_covered",n);return n}function a(e){e.forcedInactive=!0;Device.requiresFullscreenResizeDelay&&e.hideControlBar()}function r(e){var t=e.pIp.supported,i=e.pIp.isSupported();t!=i&&e.updateLayout()}function o(e,t){if(e){Utils.className(document.body,t);return 1}Utils.className(document.body,"",t);return 0}function s(e,t,i){e.stylesheet.insertRule(".zoomEffectTransition {-webkit-transition-duration: "+t+"s; -moz-transition-duration: "+t+"s; transition-duration: "+t+"s;}",0);e.stylesheet.insertRule(".zoomEffectScale {transform: scale("+i+"); -webkit-transform: scale("+i+"); -ms-transform: scale("+i+"); -moz-transform: scale("+i+");}",0)}function l(e,t){clearTimeout(R);R=setTimeout(function(){e.stylesheet.insertRule(".fadeEffect {-webkit-transition: opacity "+t+"s ease-out; -moz-transition: opacity "+t+"s ease-out; transition: opacity "+t+"s ease-out; opacity: 0;}",0)},5)}function u(e,t){clearTimeout(B);B=setTimeout(function(){Utils.className(t,"p_onScreen","p_offScreenLeft p_offScreenRight")},5)}function c(e){e.showControlBar();e.disallowFade=!0;setTimeout(function(){e.disallowFade=!1;e.isControlsInteraction=!1;e.resetIdleTimeout({type:"mouse"})},250)}function d(e){function t(){if(e.player.isAudio||e.player.isThreeSixty){e.showPoster();e.pIp.exitPicInPic()}else e.hidePoster();e.hideCta();e.dispatchUIInfo();e.updateLayout();e.playbackSettingsPanel.checkQualityAvailability()}function i(){e.player.isAudio||e.config.poster.availableWhenSettingUp||e.hidePoster();e.hideCta();e.updateLayout();if(!Device.iPhoneOutOfPagePlayback||e.player.isAudio){e.showControlBar(!0);e.config.thumbnail.enabled&&e.player.thumbScrub.extractManifestData()}}function n(t){e.readyToPlay=!0;var i=e.player.playlist.mediaType;e.setCta(i);e.hitAreaUpdate();if(e.player.autoPlayNextItem){e.guidancePopUp(t.fromQueue);("audio"==i||e.config.poster.availableWhenSettingUp)&&e.showPoster()}else{e.showPoster();e.resetGuidance();e.hideAllControls();Utils.asyncDelay(function(){if(!e.player.tryingToPlay){e.player.dispatch({type:"notPlayingState"});e.showCta()}})}}return{notPlayingState:function(){var t="play";e.config.controls.iplayerPlay&&(t="play-iplayer");f(e.playPauseButton,e.playClassName,Language.toolTipPlay,Language.toolTipPlay,e.config.useHighResIcons&&t)},playingState:function(){f(e.playPauseButton,"p_pauseButton",Language.toolTipPause,Language.toolTipPause,e.config.useHighResIcons&&"pause")},blockUnwanted:!0,tryingToPlay:i,play:i,losingControl:function(){e.hideCta();e.hidePoster();e.hideControlBar(!0)},mediaItemChanged:function(){M(e);e.setCta(e.player.mediaItem&&e.player.mediaItem.type);e.timeUpdate();e.pIp.isSupported();e.checkIfCanDisplaySeekBar();e.dispatchUIInfo()},playing:t,pause:function(){e.updateLayout();if(e.config.poster.availableWhenPaused){e.showPoster();e.player.hidePlayer()}},waiting:function(){"playing"==e.player.playingState&&e.updateLayout()},seeking:function(){e.markersUI.resetProgress()},seeked:function(){e.player.isSeeking||this.timeupdate()},playerDisconnected:function(){e.hideAllControls();e.active&&e.showCta();e.showPoster()},playlistStopped:function(){e.hideAllControls();e.showCta();e.showPoster();e.player.hidePlayer()},canPauseChange:function(){e.markersUI.testDrawMarkers(!0)},ended:function(){e.resetGuidance();e.markersUI.resetProgress()},playlistEnded:function(t){var i=e.player.playlist&&!e.player.playlist.queuedOptions||e.player.playlist&&e.player.playlist.queuedOptions&&!e.player.playlist.queuedOptions.autoplay;if(!t.willAutomaticPlayQueuedItem||i){e.showPoster();if(e.active)if(e.config.controls.availableOnMediaEnded||e.player.isFullScreen||e.player.mediaPlayer.webkitIsFullscreen)e.showControlBar();else{e.hideAllControls();e.showCta()}Device.iPhoneOutOfPagePlayback&&e.player.mediaPlayer.webkitExitFullscreen&&e.player.mediaPlayer.webkitExitFullscreen()}},error:function(t){if(t.code==SMPError.SUBS_FAILED){e.UIinfoObject.subtitles=!1;e.updateLayout()}},beforeErrorDisplay:function(){e.resetGuidance();e.hideCta();e.hideAllControls(!0);e.showPoster();e.player.minimise()},playlistLoading:function(){e.readyToPlay=!1;e.hideCta();e.updateTimeDisplay();e.hidePoster();e.container.style.backgroundImage="";e.markersUI.resetStoredMarkers()},resetUiToPlaylistLoaded:function(){n({})},playlistLoaded:n,beforeFullscreenEnter:function(){a(e);e.pIp.exitPicInPic()},beforeFullscreenExit:function(){a(e);Utils.className(document.body,"","fullscreen");f(e.fullscreenButton,"p_fullscreenButton",Language.toolTipEnterFullScreen,Language.toolTipEnterFullScreen,e.config.useHighResIcons&&"fullscreen-enter")},fullscreenEnter:function(){Utils.className(document.body,"fullscreen");f(e.fullscreenButton,"p_fullscreenButtonReturn",Language.toolTipExitFullScreen,Language.toolTipExitFullScreen,e.config.useHighResIcons&&"fullscreen-return");e.UIinfoObject.isFullscreen=!0;e.forcedInactive=!1;S();setTimeout(S,200);e.enabled?c(e):e.showControlBarRequired=!0},fullscreenExit:function(){e.UIinfoObject.isFullscreen=!1;Utils.deleteCssRules(e.stylesheet,[".updatedFullscreenPosition",".p_gradientBottomfiller"]);Utils.className(e.controls,"","updatedFullscreenPosition");Utils.className(e.gradientLayer,"","updatedFullscreenPosition");if(e.player.mediaEnded&&!e.config.controls.availableOnMediaEnded||e.inPrePlayState){e.enabled=!0;e.showPoster();e.hideAllControls();e.showCta();e.enabled=!1}clearTimeout(e.updateLayoutTimer);e.updateLayoutTimer=setTimeout(function(){e.updateLayout();e.player.Subtitles.updatePositions();S()},500);e.forcedInactive=!1;S()},picInPicStarted:function(){p(e.pIpButton,"p_picInPicButton p_controlBarButton_on","p_picInPicButton",Language.toolTipStopPicInPic,Language.toolTipPicInPic,!0,"picInPic-stop","picInPic");e.player.isFullScreen&&e.player.minimise()},picInPicStopped:function(){p(e.pIpButton,"p_picInPicButton p_controlBarButton_on","p_picInPicButton",Language.toolTipStopPicInPic,Language.toolTipPicInPic,!1,"picInPic-stop","picInPic")},timeupdate:function(){e.timeUpdate()},languageUpdated:function(){p(e.pIpButton,"p_picInPicButton p_controlBarButton_on","p_picInPicButton",Language.toolTipStopPicInPic,Language.toolTipPicInPic,e.pIp.isPlayingInPicture(),"picInPic-stop","picInPic");p(e.chromecastButton,"p_chromecastButton p_controlBarButton_on","p_chromecastButton",Language.toolTipStopChromecast,Language.toolTipChromecast,e.player.Chromecast.isCasting||e.player.Chromecast.isAttemptingToCast);p(e.playPauseButton,"p_pauseButton",e.playClassName,Language.toolTipPause,Language.toolTipPlay,"playing"==e.player.playingState);p(e.embedButton,"p_embedButton","p_embedButton",Language.toolTipEmbed,Language.toolTipEmbed,e.config.embed.enabled);e.subtitleSettingsPanel&&e.subtitleSettingsPanel.updateLanguage();e.playbackSettingsPanel.updateLanguage();e.ctaUpdate();e.hitAreaUpdate();e.updateGuidance();p(e.fullscreenButton,"p_fullscreenButton","p_fullscreenButtonReturn",Language.toolTipEnterFullScreen,Language.toolTipExitFullScreen,!e.player.isFullScreen)},durationchange:function(){e.dispatchUIInfo();e.checkIfCanDisplaySeekBar();e.markersUI.updateMarkers();r(e)},subtitles:function(t){e.subtitleSettingsPanel&&(t.active?e.subtitleSettingsPanel.indicateSubsOn():e.subtitleSettingsPanel.indicateSubsOff())},guidanceHide:function(){e.resetGuidance();Utils.className(document.body,"","p_continuousGuidanceOrWarning")},chromecast:function(t){e.pIp.exitPicInPic();p(e.chromecastButton,"p_chromecastButton p_controlBarButton_on","p_chromecastButton",Language.toolTipStopChromecast,Language.toolTipChromecast,t.active)},ccConnect:function(){e.playbackSettingsPanel.checkQualityAvailability(!0)},ccDisconnected:function(){e.playbackSettingsPanel.checkQualityAvailability(null,!0)},configUpdated:function(){e.playbackSettingsPanel.setAutoplay(e.player.config.continuousPlay)},volumeOpening:function(){e.updateControlBarDisplayForOpenVolume()},volumeClosed:function(){Utils.className(e.fullscreenButton,"","p_covered");Utils.className(e.subtitlesButton,"","p_covered");Utils.className(e.playbackSettingsButton,"","p_covered");Utils.className(e.pIpButton,"","p_covered");Utils.className(e.chromecastButton,"","p_covered");Utils.className(e.embedButton,"","p_covered");Utils.className(e.timeDisplay,"","p_covered")}}}function p(e,t,i,n,a,r,o,s){r?f(e,t,n,n,o):f(e,i,a,a,s)}function f(e,t,i,n,a){if(e){Utils.hasClass(e,"p_buttonHover")&&(t+=" p_buttonHover");e.setAttribute("aria-label",n);e.className="p_button p_controlBarButton "+t;a&&updateExistingSvg(e,a);if(e.title!=i){e.title=i;var r=e.getElementsByClassName("p_hiddenElement")[0];r&&(r.innerHTML=i)}}}function m(e){e.addEventListener("mouseover",function(){Utils.className(e,"p_buttonHover")});e.addEventListener("mouseout",function(){Utils.className(e,"","p_buttonHover")});e.addEventListener("touchstart",function(){Utils.className(e,"p_buttonHover p_buttonTouch")},{passive:!0});e.addEventListener("touchend",function(){Utils.className(e,"","p_buttonHover p_buttonTouch")})}function g(e,t,i,n,a,r,o){var s=createElement("button","p_button",'<span class="p_hiddenElement" aria-hidden="true"></span>',i);if(r){var l=createElement("div","p_selected_background");l.appendChild(createElement("div","p_selected_indicator"));s.appendChild(l)}m(s);Utils.multiAddEventListener(s,"touchend click mouseup",y(t));s.setAttribute("role","button");s.setAttribute("aria-live","polite");s.addEventListener("focusin",a.focusInButton);f(s,e,i,n,a.config.useHighResIcons&&o);return s}function h(e){if(Utils.hasClass(e,"p_chapterMarker")||Utils.hasClass(e,"p_keyMoment"))return!0;if(e&&"checkbox"==e.getAttribute("role"))return!0;var t=e&&(e.tagName+"").toLowerCase();return W[t]}function y(e){return function(t){e&&e(t);stopIt(t);return!1}}function v(e){return{active:{get:function(){return e.inError||e.forcedInactive||e.player.destroying?!1:e.readyToPlay}},inError:{get:function(){return e.player.inErrorState||e.error&&e.error.className.indexOf("p_errorDialog")>=0?!0:!1}},playClassName:{get:function(){var t="";e.config.controls.iplayerPlay&&(t="p_iplayerPlay ");return t+"p_playButton"}},markerData:{get:function(){return e.markersUI._markerData},set:function(t){e.markersUI.setMarkers(t)}},miniModeEnabled:{get:function(){if(e.config.miniMode&&e.config.miniMode.enabled)return!0;var t=Utils.getOffset(e.container,"width"),i=Utils.getOffset(e.container,"height");return e.player.isAudio&&200>i&&t/i>2.5?!0:!1}}}}function b(e,t){e.config.cta.ignoreAudio&&(t=!1);return e.config.cta.iplayer?t?"play-iplayer-audio":"play-iplayer":t?"audio":"play"}function C(e){return function(t){e.player.isFullScreen||"webkitfullscreenchange"==t.type&&e.player.mediaPlayer.webkitisfullscreen||e.player.dispatch({type:"playlistStopped"})}}function E(e){return function(){if(e.player.isFullScreen&&!h(document.activeElement)&&!e.pGuidance.nowShowing){if(!e.controls.visible){e.forcedControlsInteraction=!0;setTimeout(function(){e.forcedControlsInteraction=!1},DUPLICATE_EVENT_TIMEOUT+50)}Utils.asyncDelay(e.focusPlayPauseButton)}}}function P(e,t){return function(i){e.player.isFullScreen&&Device.canTabbing?document.body.contains(i.relatedTarget)&&i.relatedTarget!=document.body||(t?Utils.asyncDelay(e.focusPlayPauseButton):e.focusPlayPauseButton()):document.body.contains(i.relatedTarget)&&i.relatedTarget!=document.body||e.fadeControlBar(i)}}function T(e){return function(t){if(!t.metaKey&&!t.ctrlKey&&t.keyCode==KEY_F){e.player.trackAction(e.player.isFullScreen?"exit_full_screen":"enter_full_screen","shortcut_key_press");e.player.toggleFullscreen()}}}function S(){Utils.className(document.body,"","focusEnabled");Utils.className(document.body,"","nonPointerFocus")}function _(e,t){for(var i=document.querySelectorAll(".p_dontCloseSettingsPanel"),n=0;i.length>n;n++)if(i[n]==t.target||i[n].contains(t.target))return!1;return e.isSettingsPanelOpen()}function I(e){var t,i,n,a=!1,r=function(){a=!1},o=!1,s=function(t){if(!a){e.showControlBar();e.player.isPlaying360&&e.player.threeSixty.showCompass();e.resetIdleTimeout(t);a=!0;setTimeout(r,DUPLICATE_EVENT_TIMEOUT)}},l=function(){if(!a){e.hideControlBar();a=!0;setTimeout(r,DUPLICATE_EVENT_TIMEOUT)}};return function(a){e.isControlsInteraction=!(a.target==e.player.mediaPlayer||Utils.hasClass(a.target,"notInteractiveContent"));if("keyup"!=a.type)if(e.isControlsInteraction||e.inPrePlayState||e.miniModeEnabled||!e.config.fullscreen.dblclick||"dblclick"!=a.type){if(!e.inPrePlayState&&!e.player.outOfControl||e.inPrePlayState&&e.player.isFullScreen){if("pointerdown"==a.type||"mousedown"==a.type||"touchstart"==a.type){if(e.player.isPlaying360){o=!0;t="touchstart"==a.type?a.changedTouches[0].clientX:a.clientX;i="touchstart"==a.type?a.changedTouches[0].clientY:a.clientY}return}if(!o&&("mousemove"==a.type||"pointermove"==a.type&&"mouse"==a.pointerType)){if(n&&n.clientX==a.clientX&&n.clientY==a.clientY)return;n=a;if(e.config.controls.activeStartsAt||e.player.isPlaying360){var r=a.clientY/e.container.clientHeight,u=e.config.controls.activeStartsAt?e.config.controls.activeStartsAt:.8;if(u>r)return}s(a);return}if("pointerup"==a.type||"mouseup"==a.type||"touchend"==a.type){o=!1;if(_(e,a)){e.closeSettingsPanels();return}var c="touchend"==a.type?a.changedTouches[0].clientX:a.clientX,d="touchend"==a.type?a.changedTouches[0].clientY:a.clientY;(!e.player.isPlaying360||Math.abs(c-t)<10&&Math.abs(d-i)<10)&&(!e.controls.visible||e.isControlsInteraction||e.forcedControlsInteraction?e.isControlsInteraction||s(a):l())}}}else e.player.toggleFullscreen(a.type);else{Utils.className(document.body,"focusEnabled");Utils.hasClass(a.target,"p_noShowOnKey")||s(a)}}}function k(e){return Utils.getActionFn(e.togglePlay)}function w(e){return Utils.getActionFn(function(t){e.player.trackAction("call_to_action",t,{time:!1});e.player.requestGuidanceAndPlay(!1,!0);Device.trident&&setTimeout(function(){e.playPauseButton.focus();e.hideControlBar();S()},100)})}function A(e){return Utils.getActionFn(function(){e.eventCallbacks.guidanceHide()})}function L(e){return Utils.getActionFn(function(t){var i=e.player.config.guidance;if(!i.isGuidanceLocked&&i.hasGuidancePIN){e.player.trackAction("padlock_lock_guidance",t);e.pGuidance.guidanceLock()}else{e.player.trackAction("padlock_show_guidance",t);e.player.guidanceShow(!0)}})}function N(e){return Utils.getActionFn(function(t){var i=e.player.isFullScreen?"exit_full_screen":"enter_full_screen";e.player.toggleFullscreen(t);setTimeout(e.focusPlayPauseButton,20);e.player.trackAction(i,t)})}function O(e){return Utils.getActionFn(function(t){e.player.Chromecast.toggle();var i=e.player.Chromecast.isAttemptingToCast?"attempt_cast_mode":"exit_cast_mode";e.player.trackAction(i,t);p(e.chromecastButton,"p_chromecastButton p_controlBarButton_on","p_chromecastButton",Language.toolTipStopChromecast,Language.toolTipChromecast,e.player.Chromecast.isCasting||e.player.Chromecast.isAttemptingToCast)})}function x(e){return Utils.getActionFn(function(t){var i=e.pIp.isPlayingInPicture()?"exit_picture_in_picture_mode":"enter_picture_in_picture_mode";e.pIp.toggle();e.player.trackAction(i,t);p(e.pIpButton,"p_picInPicButton p_controlBarButton_on","p_picInPicButton",Language.toolTipStopPicInPic,Language.toolTipPicInPic)})}function D(e){return Utils.getActionFn(function(t){e.player.dispatch({type:"embed"});e.player.pause();e.player.minimise();e.player.trackAction("embed",t)})}function M(e){var t="";e.miniModeEnabled?t="minimode nofullscreen":e.config.fullscreen.enabled||(t="nofullscreen");Utils.className(document.body,t,"minimode nofullscreen")}var R,B,U=45,F="-9999px 0px",H=1e3,q={buffer:{enabled:!0,colour:"",foreColour:"#ffffff",width:50,thickness:10,top:"50%",left:"50%",forceShow:!1},poster:{enabled:!0,effects:!1},cta:{enabled:!0,visiblyHidden:!1,ignoreAudio:!1,backgroundColour:"#808080"},errorDialog:{enabled:!0},controls:{enabled:!0,mode:"default",always:!1,availableOnMediaEnded:!1,enableLiveRewind:!0,iplayerPlay:!1,spaceControlsPlayback:!1,experimentalShortcuts:!1,muteButtonOnly:!1,volumeSlider:!0,volumeDismissTime:2e3,timeout:2e3,timeoutTouch:5e3},markers:{enabled:!0,suppressMarkerKinds:[],hideBelowWidth:600},subtitles:{enabled:!0,desnakeLiveSubtitles:!0,reformatLiveSubtitles:!0,supportLiveSubtitles:!0,defaultOn:!1,yOffset:0/0,kind:"subtitles",margins:[],useNarrative:!1},guidance:{enabled:!0,pinRequired:!1,displayContinuousGuidanceInQueuePlaylist:!0,displayGuidanceInAutoplay:!0},fullscreen:{enabled:!0,dblclick:!0},embed:{enabled:!0},embedded:{enabled:!1},miniMode:{enabled:!1,backgroundColour:"#ffffff"},locale:{lang:"en",path:"/emp/translations/smp/{lang}.xml"},chromecast:{enabled:!0,shiftCentralControls:!1},thumbnail:{enabled:!0},pictureInPicture:{enabled:!0},useInPlayerGuidance:!0,mediaSessionAPI:{enabled:!0},colour:"#f54997",foreColour:"#ffffff",playbackSettingsPanel:{enabled:!1,continuousPlaySetting:!1,highlightMenuColour:"#ffffff"},skin:"classic"},W={a:!0,button:!0},G=function(e,t){var i=this;BaseUI.call(this,e,q,t);Utils.defineProperties(i,v(i));Device.trident&&document.addEventListener("focusin",E(i));document.addEventListener("keyup",function(e){9==e.keyCode&&Utils.className(document.body,"focusEnabled")});window.addEventListener("blur",P(i,!1));document.addEventListener("touchend",S);document.addEventListener("keydown",T(i));i.UIinfoObject={subtitles:!1,controlBarVisible:!1,seekBarVisible:!1,controlsTop:0,controlsLeft:0,controlsHeight:0,controlsWidth:0,seekBarLeft:0,seekBarRight:0,markersBarVisible:!1,isFullscreen:!1,videoX:0,videoY:0,videoWidth:0,videoHeight:0};i.markersUI=new MarkersUI(i);i.pGuidance=new ParentalGuidance(i,i.player);i.pIp=new PictureInPicture(i.player,i);i.settingsPanels=[];i.controlbarTimer=-1;i.needStopTouch=!1;i.focusPlayPauseButton=function(){i.inPrePlayState&&i.cta?i.cta.focus():i.playPauseButton.focus()};i.fadeControlBar=function(t){i.disallowFade||"pointerout"==t.type&&"mouse"!=t.pointerType||document.body.contains(t.relatedTarget)||e.Chromecast.isCasting||e.mediaEnded||i.hideControlBar()};i.focusInButton=function(){i.controls&&!i.controls.visible&&i.showControlBar()};return i};G.prototype=Utils.object(BaseUI.prototype);G.prototype.initialised=!1;G.prototype.resetIdleTimeout=function(e){var t=this;clearTimeout(t.idleTimeoutInterval);var i=e&&e.type.substring(0,5),n=e&&("point"==i&&"mouse"!=e.pointerType||"touch"==i)?t.config.controls.timeoutTouch:t.config.controls.timeout;t.player.Chromecast.isCasting||t.player.mediaEnded||(t.idleTimeoutInterval=setTimeout(function(){t.hideControlBar(!1,i,e)},n))};G.prototype.showPoster=function(){var e=this;if(e.enabled&&e.config.poster.enabled)if(e.config.poster.video&&e.player.playlist&&e.player.playlist.videoHoldingImage){e.container.style.backgroundPosition="";e.container.style.backgroundImage="";if(!e.videoHoldingImage){e.videoHoldingImage=document.createElement("video");e.videoHoldingImage.autoplay=!0;e.videoHoldingImage.muted=!0;e.videoHoldingImage.loop=!0;e.container.insertBefore(e.videoHoldingImage,e.container.firstChild)}e.videoHoldingImage.poster=Utils.holdingImage(e.player.playlist,e.container,e.config.poster);e.videoHoldingImage.src=e.player.playlist.videoHoldingImage;e.videoHoldingImage.style.display="block";e.videoHoldingImage.play()}else{if(e.videoHoldingImage){e.container.removeChild(e.videoHoldingImage);e.videoHoldingImage=null}e.container.style.backgroundPosition="";e.container.style.backgroundImage=Utils.holdingImage(e.player.playlist,e.container,e.config.poster)}};G.prototype.hidePoster=function(){var e=this;e.container.style.backgroundPosition=F;if(e.videoHoldingImage){e.videoHoldingImage.pause();e.videoHoldingImage.style.display="none"}};G.prototype.isSettingsPanelOpen=function(){for(var e=0;this.settingsPanels.length>e;e++)if(this.settingsPanels[e].isPanelOpen())return!0;return!1};G.prototype.closeSettingsPanels=function(){for(var e=0;this.settingsPanels.length>e;e++)this.settingsPanels[e].isPanelOpen()&&this.settingsPanels[e].closePanel()};G.prototype.resizeFixEnd=function(e){var t=this;void 0===e||e===t.lastResizeWidth&&!Device.android||t.updateLayout(e);t.lastResizeWidth=e;clearTimeout(t.posterResizeTimer);t.posterResizeTimer=setTimeout(function(){t.container.style.backgroundImage=Utils.holdingImage(t.player.playlist,t.container,t.config.poster)},H);t.player.Subtitles.resizeFixEnd();t.spinner.resizeFixEnd();if(t.showControlBarRequired){t.showControlBarRequired=!1;c(t)}M(t)};G.prototype.showCta=function(){var e=this;BaseUI.prototype.showCta.call(this);(e.player.isAudio||e.player.isThreeSixty)&&e.pIp.exitPicInPic();if(e.player.isFullScreen){e.showControlBar();e.guidancePopUp()}else{if(e.controls){e.closeSettingsPanels();e.controls.visible=!1;e.controls.style.clip="rect(1px,1px,1px,1px)";e.controls.style.display="none";Utils.className(e.container,"controlsFadedOut","controlsFadedIn")}if(e.cta){if(e.enabled&&e.config.cta.enabled&&!e.inError){e.ctaVisible=!0;e.cta.style.display="block";e.guidanceOrWarning();e.ctaUpdate()}else{e.cta.style.display="none";e.guidance.style.display="none"}e.cta.style.visibility=e.config.cta.visiblyHidden?"hidden":"visible";e.guidance.style.visibility=e.config.cta.visiblyHidden?"hidden":"visible";e.hitArea.setAttribute("aria-hidden","false")}e.hideAllControls();document.body.style.cursor="default";Utils.className(document.body,"cta");e.inError||e.player.dispatch({type:"showCta"})}};G.prototype.ctaUpdate=function(){var e=this;if(e.player.playlist){var t=Language.get("toolTipCTAPlay",{title:e.player.playlist.title});e.player.playlist.guidance&&(t+=", "+e.player.playlist.guidance)}else t=Language.toolTipPlay;e.cta.title=t;e.cta.setAttribute("aria-label",t)};G.prototype.hideCta=function(){var e=this;BaseUI.prototype.hideCta.call(this);e.ctaVisible=!1;if(e.cta){e.guidanceTimeout||(e.guidance.style.display="none");e.cta.style.display="none";e.hitArea.setAttribute("aria-hidden","true")}(e.config.controls.always||e.player.isAudio&&!e.config.allowAudioControlsToHide)&&e.showControlBar();Utils.className(document.body,"","cta")};G.prototype.hitAreaUpdate=function(){var e=this;e.hitArea&&e.player.playlist&&e.hitArea.setAttribute("aria-label",Language.get("toolTipFrameMedia",{title:e.player.playlist.title}))};G.prototype.updatePoster=function(){var e=this;if(e.container.style.backgroundPosition!==F){e.hidePoster();e.showPoster()}};G.prototype.hideEffects=function(){clearTimeout(B);clearTimeout(R);this.setSlideEffectVisibility(!1);this.setZoomEffectVisibility(!1)};G.prototype.setZoomEffectVisibility=function(e){var t=this.posterZoomImage;t&&(t.style.display=Utils.noneOrBlock(e))};G.prototype.setSlideEffectVisibility=function(e){var t=this.slideEffectImageContainer;t&&(t.style.display=Utils.noneOrBlock(e))};G.prototype.zoomInPosterImage=function(e){var t=this,i="undefined"!=typeof e.scale?e.scale:1.5,n="undefined"!=typeof e.time?e.time:1;t.setSlideEffectVisibility(!1);t.updatePoster();t.posterZoomImage.src=t.getBackgroundImageUrl();Utils.deleteCssRules(t.stylesheet,[".zoomEffectTransition",".zoomEffectScale"]);t.setZoomEffectVisibility(!0);Utils.asyncDelay(s,[t,n,i])};G.prototype.fadeInNewPosterImage=function(e){var t=this,i=void 0!==e.time?e.time:1;t.posterFadeEffectImage.src=t.getBackgroundImageUrl();"block"==t.posterZoomImage.style.display?Utils.className(t.posterFadeEffectImage,"zoomEffectScale","noScale"):Utils.className(t.posterFadeEffectImage,"noScale","zoomEffectScale");Utils.deleteCssRules(t.stylesheet,["fadeEffect"]);t.setSlideEffectVisibility(!1);t.setZoomEffectVisibility(!1);t.updatePoster();Utils.asyncDelay(l,[t,i])};G.prototype.slideInNewPosterImage=function(e){var t=this;Utils.deleteCssRules(t.stylesheet,[".slidingEffect"]);var i=t.slideEffectImageContainer.firstChild,n=t.slideEffectImageContainer.lastChild;i.src=t.getBackgroundImageUrl();Utils.className(i,"p_onScreen","p_offScreenLeft p_offScreenRight");var a=void 0!==e.time?e.time:1;t.stylesheet.insertRule(".slidingEffect {-webkit-transition: "+a+"s; -moz-transition-duration: "+a+"s; transition-duration: "+a+"s;}",0);Utils.className(n,e.leftToRight?"p_offScreenLeft":"p_offScreenRight","p_onScreen");"block"==t.posterZoomImage.style.display?Utils.className(i,"zoomEffectScale","noScale"):Utils.className(i,"noScale","zoomEffectScale");t.updatePoster();n.src=t.getBackgroundImageUrl();t.setSlideEffectVisibility(!0);Utils.asyncDelay(u,[t,n])};G.prototype.setCta=function(e){var t=this,i="video"===e?"audio":"video";Utils.className(document.body,e,i);t.updateCta(e)};G.prototype.updateCta=function(e){var t=this;if(t.config.cta.enabled){var i="duration"==t.config.cta.mode&&t.player.playlist&&""!==t.player.playlist.programmeDuration;t.cta||t.drawCta();if(t.cta)if(t.config.cta.custom){t.cta.style.backgroundImage="url("+t.config.cta.custom+")";updateExistingSvg(t.cta)}else t.cta.style.backgroundImage="";Utils.deleteCssRules(t.stylesheet,["p_cta","p_padlock"]);t.stylesheet.insertRule(".p_cta:hover, .p_cta:focus, .mediaContainer:hover .p_cta { background-color: "+t.config.colour+"; }",0);"rtl"===t.config.cta.direction&&Utils.className(document.body,"rtlCta");if(t.config.useHighResIcons&&!t.config.cta.custom){if(t.cta){var n=b(this,"audio"===e),a="p_ctaIcon";i&&(a+=" p_hasDuration");updateExistingSvg(t.cta,n,a)}t.stylesheet.insertRule(".svg .p_cta:hover .p_ctaIcon, .focusEnabled.svg .p_cta:focus .p_ctaIcon { fill: "+t.config.foreColour+"; }",0);t.stylesheet.insertRule(".svg .mediaContainer:hover .p_cta .p_svg, .svg .p_cta:focus .p_svg { fill: "+t.config.foreColour+"; }",0)}if(i){t.ctaDuration.textContent=t.player.playlist.programmeDuration;Utils.className(t.cta,"p_hasDuration font-family-sans");if(t.config.useHighResIcons){t.stylesheet.insertRule(".p_cta:hover .p_ctaDuration, .focusEnabled .p_cta:focus .p_ctaDuration { color: "+t.config.foreColour+"; }",0);t.stylesheet.insertRule(".mediaContainer:hover .p_ctaDuration, .p_cta:focus .p_ctaDuration { color: "+t.config.foreColour+"; }",0)}}else{t.ctaDuration.textContent="";Utils.className(t.cta,"","p_hasDuration")}Utils.setOrUnsetClass(t.cta,"p_iplayerIcon",t.config.cta.iplayer)}};G.prototype.updateGuidance=function(){var e=this;if(e.padlock&&e.player.config&&e.config.guidance.pinRequired)if(e.player.config.guidance&&e.player.config.guidance.isGuidanceLocked){e.padlock.className="p_padlock p_button";e.padlock.title=Language.guidanceStateOn1Text;e.config.useHighResIcons&&updateExistingSvg(e.padlock,"padlock-locked")}else{e.player.config.guidance&&e.player.config.guidance.canPlay&&e.player.config.guidance.guidanceSkipped&&!e.player.config.under16&&(e.padlock.style.display="block");e.padlock.className="p_padlock p_button p_padlock_unlocked";e.padlock.title=Language.guidanceStateOff1Text;e.config.useHighResIcons&&updateExistingSvg(e.padlock,"padlock-unlocked")}};G.prototype.updateControlBarDisplayForOpenVolume=function(){var e=this;e.closeSettingsPanels();var t=Utils.getOffset(e.timeDisplay)<e.volumeControl.getRight();if(t){var i=!1,a=e.volumeControl.getRight();i=n(e.fullscreenButton,i,a);i=n(e.subtitlesButton,i,a);i=n(e.playbackSettingsButton,i,a);i=n(e.pIpButton,i,a);i=n(e.chromecastButton,i,a);n(e.embedButton,i,a);Utils.setOrUnsetClass(e.timeDisplay,"p_covered",t)}};G.prototype.updateEffectsContainer=function(){var e=this,t=e.posterEffectsContainer;if(e.config.poster.effects)t||e.createPosterEffectsContainer();else if(t){t.parentNode.removeChild(t);e.posterEffectsContainer=null}};G.prototype.drawCta=function(){var e=this;if(e.enabled&&e.config.cta.enabled&&!e.cta){var t=createElement("button","p_button p_cta",'<span class="p_hiddenElement"></span>',Language.toolTipPlay);e.ctaDuration=createElement("span","p_ctaDuration");t.appendChild(e.ctaDuration);e.container.appendChild(t);Utils.multiAddEventListener(t,"click mouseup",w(e));t.style.display="none";e.cta=t;e.drawHitArea();e.updateCta()}};G.prototype.drawGuidance=function(){var e=this;e.guidance=createElement("div","p_ctaGuidance p_guidance");e.guidance.style.display="none";var t=createElement("div","p_guidanceContainer");e.guidanceBox=createElement("span","p_guidanceText");e.guidanceBox.style.marginLeft="25px";var i=createElement("div","p_guidanceHolder"),n=createElement("span","p_guidanceFallback"),a=createElement("span","p_guidanceFallbackText");n.appendChild(a);a.textContent="G";i.appendChild(n);if(e.config.useHighResIcons){var r=Utils.generateSVG(44,44,"guidance","p_guidanceIcon");i.appendChild(r)}t.appendChild(i);i.appendChild(e.guidanceBox);e.guidance.appendChild(t);e.padlock=document.createElement("button");Utils.multiAddEventListener(e.padlock,"mouseup touchend click",L(e));e.guidance.appendChild(e.padlock);e.guidanceClose=createElement("span","guidanceClose");Utils.multiAddEventListener(e.guidanceClose,"mouseup touchend click",A(e));e.guidanceClose.style.display="none";e.guidance.appendChild(e.guidanceClose);if(e.config.useHighResIcons){r=Utils.generateSVG(44,44,"cross","p_crossIcon");e.guidanceClose.appendChild(r)}e.container.parentNode.appendChild(e.guidance);e.updateGuidance()};G.prototype.checkIfCanDisplaySeekBar=function(){var t=this;if(t.progressBar){var i=t.progressBar.isVisible(),n=t.player.timeHelper.drawSeekBar&&"controls"!=e(t.config.controls.mode);if(i!=n){t.progressBar.show();t.markersUI.updateMarkers();t.updateGradientAndControlsPosition();t.dispatchUIInfo()}Utils.setOrUnsetClassOnlyAfterCheck(t.container,"noSeekingBar",!n,n)}};G.prototype.displayCover=function(){var e=this;if(e.player.els){var t=e.player.els.video.videoWidth/e.player.els.video.videoHeight;isNaN(t)&&(t=16/9);var i=Math.abs(1-window.innerWidth/(window.innerHeight*t))<.05||0===window.innerWidth&&0===window.innerHeight&&Utils.hasClass(document.body,"displayCover")}Utils.className(document.body,"","videoPositionTop videoPositionBottom");if(i||e.config.displayCover)Utils.className(document.body,"displayCover");else{Utils.className(document.body,"","displayCover");"top"==e.config.videoPosition?Utils.className(document.body,"videoPositionTop"):"bottom"==e.config.videoPosition&&Utils.className(document.body,"videoPositionBottom")
}};G.prototype.initialise=function(){var e=this;BaseUI.prototype.initialise.call(this);e.markersUI.container=e.container=e.player.mediaContainer;e.playbackSettingsPanel={checkQualityAvailability:emptyFunction,updateLanguage:emptyFunction,showOrHideContinuousPlaySetting:emptyFunction,setAutoplay:emptyFunction};e.progressBar=new ProgressBar(e);e.spinner=new Spinner(e);e.errorDialog=new ErrorDialog(e);e.volumeControl=new VolumeControl(e);e.enabled=!0;e.previousPosterWidth=0;e.eventCallbacks=d(e);e.eventArray=[e.eventCallbacks,e.progressBar.getEventCallbacks(),e.spinner.getEventCallbacks(),e.errorDialog.getEventCallbacks(),this.volumeControl.getEventCallbacks()];Device.iPhoneOutOfPagePlayback&&Utils.multiAddEventListener(e.player.els.video,"webkitfullscreenchange webkitendfullscreen",C(e));Device.iPhoneIos10&&Utils.className(document.body,"iPhoneIos10","");Device.iPhoneIos11orGreater&&Utils.className(document.body,"iPhoneIos11orGreater","");Device.preferHls&&Utils.className(document.body,"preferHls","");window.addEventListener("touchstart",function t(){e.needStopTouch=!0;window.removeEventListener("touchstart",t)},{passive:!0,once:!0});appendChildren(e.container,e.spinner.getDomNodes());if(e.container){e.showPoster();e.config.buffer.forceShow&&e.spinner.startBufferTimer();e.drawCta();e.drawGuidance();e.drawControlBar();e.addControlBarListeners();e.displayCover();M(e);e.config.poster.effects&&e.createPosterEffectsContainer()}e.player.Subtitles.updateConfig(e.config);e.initialised=!0};G.prototype.updateStyles=function(){BaseUI.prototype.updateStyles.call(this)};G.prototype.updateControls=function(){var t=this;Utils.deleteCssRules(t.stylesheet,[".nonPointerFocus .p_toggle:focus",".nonPointerFocus #p_subtitleSettingsContainer .p_subtitleSizeButton:focus",".p_toggleOn .p_toggleSlot",".p_toggleSlider .p_tick","p_selected_indicator","p_controlBarButton","p_sliderControls:hover",".minimode .mediaContainer",".cta.minimode .mediaContainer"]);t.stylesheet.insertRule(".p_controlBarButton.p_buttonHover, .p_controlBarButton.p_settingsPanelOpen, .nonPointerFocus .p_controlBarButton:focus, .p_selected_indicator { background-color: "+t.config.colour+"; }",0);t.config.useHighResIcons&&t.stylesheet.insertRule(".svg .p_controlBarButton.p_buttonHover .p_svg, .svg .p_controlBarButton.p_settingsPanelOpen .p_svg, .nonPointerFocus.svg .p_controlBarButton:focus .p_svg { fill: "+t.config.foreColour+"; }",0);t.stylesheet.insertRule(".minimode .mediaContainer { background-color: "+t.config.miniMode.backgroundColour+"; }",0);t.stylesheet.insertRule(".cta.minimode .mediaContainer { background-color: "+t.config.cta.backgroundColour+"; }",0);"#222222"==t.config.colour?t.stylesheet.insertRule(".p_toggleOn .p_toggleSlot { background-color: #000; border-color: #fff; }",0):t.stylesheet.insertRule(".p_toggleOn .p_toggleSlot { background-color: "+t.config.colour+"; border-color: "+t.config.colour+"; }",0);t.stylesheet.insertRule(".p_toggleSlider .p_tick { border-color: "+t.config.colour+"; }",0);t.stylesheet.insertRule(".nonPointerFocus #p_subtitleSettingsContainer .p_subtitleSizeButton:focus { background-color: "+t.config.colour+"; }",0);t.stylesheet.insertRule(".nonPointerFocus .p_toggle:focus { -webkit-box-shadow: inset 0 0 0 2px "+t.config.colour+"; box-shadow: inset 0 0 0 2px "+t.config.colour+";}",0);t.stylesheet.insertRule(".nonPointerFocus #p_qualityPanelFirstRow:focus, .nonPointerFocus #p_qualityPanelMediumRow:focus, .nonPointerFocus #p_qualityPanelHighRow:focus { -webkit-box-shadow: inset 0 0 0 2px "+t.config.playbackSettingsPanel.highlightMenuColour+"; box-shadow: inset 0 0 0 2px "+t.config.playbackSettingsPanel.highlightMenuColour+";}",0);t.stylesheet.insertRule(".nonPointerFocus #p_qualityRow:focus { -webkit-box-shadow: inset 0 0 0 2px "+t.config.playbackSettingsPanel.highlightMenuColour+"; box-shadow: inset 0 0 0 2px "+t.config.playbackSettingsPanel.highlightMenuColour+";}",0);if("seekbar"==e(t.config.controls.mode)){if(t.controlsHolder){t.closeSettingsPanels();t.controlsHolder.style.display="none";Utils.className(t.controls,"p_noControlBar")}}else{if(t.controlsHolder){t.controlsHolder.style.display="block";Utils.className(t.controls,"","p_noControlBar")}t.progressBar&&("controls"==e(t.config.controls.mode)?t.progressBar.hide():t.progressBar.show())}Utils.setOrUnsetClass(t.controlsHolder,"p_noVolume",!t.config.controls.volumeSlider);p(t.playPauseButton,"p_pauseButton",t.playClassName,Language.toolTipPause,Language.toolTipPlay,"playing"==t.player.playingState)};G.prototype.createPosterEffectsContainer=function(){var e=this;if(!e.posterEffectsContainer){e.posterEffectsContainer=createElement("div","p_posterEffectsContainer");e.posterZoomImage=createElement("img","zoomEffectScale zoomEffectTransition");e.posterEffectsContainer.appendChild(e.posterZoomImage);e.slideEffectImageContainer=document.createElement("div");e.slideEffectImageContainer.appendChild(createElement("img","slidingEffect .p_oldSlideImage"));e.slideEffectImageContainer.appendChild(createElement("img","slidingEffect .p_newSlideImage"));e.posterEffectsContainer.appendChild(e.slideEffectImageContainer);e.posterFadeEffectImage=createElement("img","fadeEffect");e.posterEffectsContainer.appendChild(e.posterFadeEffectImage);e.container.insertBefore(e.posterEffectsContainer,e.hitArea)}};G.prototype.updateConfig=function(e,t){var i,n=this,a={},r=0,o=!1,s=n.config.subtitles.yOffset;for(var l in e)if(e.hasOwnProperty(l)){r++;if("subtitles"==l)for(var u in e.subtitles)if("yOffset"!=u)r++;else{o=!0;i=!(e.subtitles.yOffset==s||isNaN(s)&&isNaN(e.subtitles.yOffset))}}if(0===r||1==r&&o){if(i){n.config.subtitles.yOffset=e.subtitles.yOffset;n.player.Subtitles.updateConfig(n.config)}}else{e.subtitles&&n.config.subtitles.sizeAdjustment!=e.subtitles.sizeAdjustment&&(a.subtitles={sizeAdjustment:e.subtitles.sizeAdjustment});var c=n.player.playlistHasAudio?"audio":"video",d=n.config.controls.always,p=BaseUI.prototype.updateConfig.call(this,e);if(p){n.player.Subtitles.updateConfig(n.config);n.spinner.updateConfig(n.config);n.player.Chromecast.updateConfig(n.config);n.updatePoster();n.errorDialog.updateErrorDialog();n.updateControls();n.updateCta(c);n.updateGuidance();n.updateEffectsContainer();n.displayCover();if(n.inPrePlayState)n.showCta();else{n.hideCta();d&&n.config.controls.always===!1&&(n.config.allowAudioControlsToHide||!n.miniModeEnabled&&!n.player.isAudio)&&n.hideControlBar(!0)}if(n.controls)if(n.config.controls.enabled){n.gradientLayer.style.display="block";n.gradientBottomFiller.style.display="block"}else{n.closeSettingsPanels();n.controls.visible=!1;n.controls.style.display="none";n.gradientLayer.style.display="none";n.gradientBottomFiller.style.display="none";Utils.className(n.container,"controlsFadedOut","controlsFadedIn")}M(n);n.miniModeEnabled?n.player.mediaPlayer&&"0px"==n.player.mediaPlayer.style.left&&(n.player.mediaPlayer.style.left=HIDDEN_PLAYER_MINIMODE):n.player.mediaPlayer&&n.player.mediaPlayer.style.left==HIDDEN_PLAYER_MINIMODE&&(n.player.mediaPlayer.style.left="0px");n.checkIfCanDisplaySeekBar();n.updateLayout();n.playbackSettingsPanel.showOrHideContinuousPlaySetting(n.config.playbackSettingsPanel.continuousPlaySetting);n.dispatchUIInfo();t||Utils.isObjectEmpty(a)||n.player.dispatch({type:"distributeUiConfig",uiConfigToDistribute:a})}}};G.prototype.addControlBarListeners=function(){var e=this;if(!e.listenersAdded){var t=I(e);if(window.PointerEvent){Utils.multiAddEventListener(e.container,"pointerdown pointermove pointerup dblclick",t);e.container.addEventListener("pointerout",e.fadeControlBar)}else{Utils.multiAddEventListener(e.container,"mousedown mouseleave touchmove touchstart touchend dblclick",t,!0);Utils.multiAddEventListener(document,"mousemove mouseup",t,!0);Device.windowsPhone||e.container.addEventListener("mouseout",e.fadeControlBar)}document.addEventListener("keyup",t,!0);e.listenersAdded=!0}};G.prototype.updateTimeDisplay=function(e){var t=this;if(t.currentTime&&t.duration){var i=t.player.timeHelper.getTimeInfoToDisplay(e),n=t.duration.textContent=i.duration;t.currentTime.textContent=i.currentTime;t.timeDisplaySeparator.style.display=""===n?"none":""}};G.prototype.updateDisplayedProgress=function(e,t){var i=this,n=i.player.timeHelper.timeToPercent(e);i.progressBar.updateProgressBar(n,t);i.updateTimeDisplay(e);i.markersUI.fillChapters(e)};G.prototype.timeUpdate=function(e){var t=this;if(e||!t.player.isSeeking&&t.controls&&t.controls.visible){t.updateTimeDisplay();t.markersUI.testDrawMarkers(e)}t.config.markers.reportProgress&&t.markersUI.reportProgress()};G.prototype.drawHitArea=function(){var e=this,t=!1,i=function(){t=!0},n=function(n){var a="touchend"==n.type&&!t||"pointerup"==n.type&&"touch"==n.pointerType,r="touchstart"===n.type&&3===n.targetTouches.length;if("touchstart"==n.type||"pointerdown"==n.type&&"mouse"!==n.pointerType){e.hitArea.addEventListener("pointermove",i);e.hitArea.addEventListener("touchmove",i);t=r}if("touchend"==n.type&&0===n.touches.length||"pointerup"==n.type||"pointerout"==n.type){e.hitArea.removeEventListener("pointermove",i);e.hitArea.removeEventListener("touchmove",i);t=!1}if(e.ctaVisible&&e.config.cta.enabled&&(a||"mouseup"==n.type||"click"==n.type||"pointerup"==n.type&&"mouse"==n.pointerType)){if(n.button&&0!==n.button)return;e.player.requestGuidanceAndPlay()}};e.hitArea=document.createElement("div");e.hitArea.className="p_accessibleHitArea notInteractiveContent";e.hitArea.setAttribute("role","img");e.container.appendChild(e.hitArea);window.PointerEvent?Utils.multiAddEventListener(e.hitArea,"pointerup pointerdown",n):Utils.multiAddEventListener(e.hitArea,"mouseup touchstart touchend touchmove",n)};G.prototype.drawControlBar=function(){var e=this;if(e.enabled&&e.config.controls.enabled&&!e.controls){e.gradientLayer=createElement("div","p_gradientLayer");e.gradientBottomFiller=createElement("div","p_gradientBottomfiller");e.container.insertBefore(e.gradientLayer,e.container.childNodes[2]);e.container.insertBefore(e.gradientBottomFiller,e.container.childNodes[3]);e.controls=createElement("div","p_playerControls");e.controlsHolder=createElement("div","p_playerControlBarHolder");e.controls.appendChild(e.controlsHolder);e.chapterMarkersHolder=createElement("div","p_chapterMarkersHolder");e.controls.appendChild(e.chapterMarkersHolder);e.markersUI.markersHolder=e.chapterMarkersHolder;appendChildren(e.controls,e.progressBar.getDomNodes());e.timeDisplay=createElement("div","p_timeDisplay");e.timeDisplay.setAttribute("aria-hidden",!0);e.timeDisplay.setAttribute("aria-live","off");e.timeDisplay.setAttribute("aria-role","timer");e.timeDisplaySeparator=createElement("span","p_timeSeparator","/");e.currentTime=createElement("span","p_time");e.duration=createElement("span","p_time p_duration");e.timeDisplay.appendChild(e.currentTime);e.timeDisplay.appendChild(e.timeDisplaySeparator);e.timeDisplay.appendChild(e.duration);e.playPauseButton=g(e.playClassName,k(e),Language.toolTipPlay,Language.toolTipPlay,e,!1,"play");e.pIpButton=g("p_picInPicButton",x(e),Language.toolTipPicInPic,Language.toolTipPicInPic,e,!0,"picInPic");e.chromecastButton=g("p_chromecastButton",O(e),Language.toolTipChromecast,Language.toolTipChromecast,e,!0,"catcast"!==e.config.controls.chromecastMode?"chromecast":"catcast");e.subtitleSettingsPanel=new SubtitleSettingsPanel(e,g);e.settingsPanels.push(e.subtitleSettingsPanel);e.subtitlesButton=e.subtitleSettingsPanel.getOpenCloseButton();e.playbackSettingsPanel=new PlaybackSettingsPanel(e,g);e.settingsPanels.push(e.playbackSettingsPanel);e.playbackSettingsButton=e.playbackSettingsPanel.getOpenCloseButton();e.embedButton=g("p_embedButton",D(e),Language.toolTipEmbed,Language.toolTipEmbed,e,!1,"embed");e.updateControls();e.controlBarFiller=createElement("div","p_controlBarFiller");e.config.controls.volumeSlider||Utils.className(e.controlBarFiller,"p_noVolume");e.controlsHolder.appendChild(e.playPauseButton);appendChildren(e.controlsHolder,e.volumeControl.getDomNodes());e.controlsHolder.appendChild(e.controlBarFiller);e.controlBarFiller.appendChild(e.timeDisplay);e.fullscreenButton=g("p_fullscreenButton",N(e),Language.toolTipEnterFullScreen,Language.toolTipEnterFullScreen,e,!1,"fullscreen-enter");e.controlsHolder.appendChild(e.fullscreenButton);e.controlsHolder.appendChild(e.subtitlesButton);e.controlsHolder.appendChild(e.subtitleSettingsPanel.getSubsSettingsContainer());e.controlsHolder.appendChild(e.playbackSettingsButton);e.controlsHolder.appendChild(e.playbackSettingsPanel.getPanel());e.controlsHolder.appendChild(e.chromecastButton);e.controlsHolder.appendChild(e.pIpButton);e.controlsHolder.appendChild(e.embedButton);e.container.appendChild(e.controls);e.hideControlBar();e.controls.style.display="none";Utils.className(e.container,"controlsFadedOut","controlsFadedIn");e.updateLayout(e.container.clientWidth)}};G.prototype.updateGradientAndControlsPosition=function(){var e=this;if(e.player.isFullScreen&&e.controls.visible&&e.enabled){var t=window.innerWidth,i=window.innerHeight,n=i/t,a=.5625,r=148,o="3.5625%",s="3.5625%",l=Device.iPhoneOutOfPagePlayback||Device.iPhoneNeedFullScreenMarginButton;if(a>=n||e.player.isPlaying360){if(l){s="14%";o="14%"}}else{var u=Math.ceil(.035625*i),c=t*a,d=Math.floor((i-c)/2),p=u+r>d;if(p||l){o=d+1+"px";s=d+1+"px"}}Utils.className(e.controls,"updatedFullscreenPosition");Utils.className(e.gradientLayer,"updatedFullscreenPosition");e.stylesheet.insertRule(" .p_gradientBottomfiller { height:"+o+"; }",e.stylesheet.cssRules.length);e.stylesheet.insertRule(" .updatedFullscreenPosition { bottom:"+s+"; }",e.stylesheet.cssRules.length)}};G.prototype.hideAllControls=function(e,t){var i=this;i.player.isPlaying360&&i.player.threeSixty.hideCompass();i.hideControlBar(e,t)};G.prototype.hideControlBar=function(e,t,n){var a=this;if(a.controls){if(!e){if(!a.controls.visible||a.config.controls.always||!a.config.allowAudioControlsToHide&&(a.miniModeEnabled||a.player.isAudio)||a.player.isSeeking||a.player.mediaEnded&&a.config.controls.availableOnMediaEnded)return;var r=!1;n&&"touch"===n.pointerType&&(r=!0);if((i(a)||a.subtitleSettingsPanel.hasFocus||a.playbackSettingsPanel.hasFocus)&&(!t||"touch"!=t.substring(0,5))&&!r||a.isControlsInteraction&&t&&"mouse"==t.substring(0,5))return}!a.player.isPlaying360&&a.player.isFullScreen&&Device.hideCursorInFullscreen&&(document.body.style.cursor="none");a.volumeControl.closeVolumeControls();a.controls.visible=!1;Utils.asyncDelay(function(){Utils.className(a.container,"controlsFadedOut","controlsFadedIn")});a.closeSettingsPanels();S();clearTimeout(a.controlbarTimer);a.controlbarTimer=setTimeout(function(){a.controls.style.clip="rect(1px,1px,1px,1px)";a.player.Subtitles.updatePositions()},800)}a.markersUI.resetMarkerTip();a.player.dispatch({type:"uiControlBarHidden"},!0);a.needStopTouch&&Utils.className(a.container,"stopTouch","")};G.prototype.showControlBar=function(e){var t=this;if(t.active&&(!Device.iPhoneOutOfPagePlayback||t.player.isAudio)&&!t.player.Chromecast.isAttemptingToCast){e||clearTimeout(t.idleTimeoutInterval);clearTimeout(t.controlbarTimer);if(!t.controls||t.controls.visible)return;if(t.enabled&&t.config.controls.enabled&&(!t.inPrePlayState||t.player.isFullScreen)){document.body.style.cursor="default";t.controls.style.display="block";t.timeUpdate(!0);if(e&&!t.miniModeEnabled){t.controls.visible=!1;Utils.className(t.container,"controlsFadedOut","controlsFadedIn");t.player.Subtitles.updatePositions()}else{t.controls.visible=!0;t.updateGradientAndControlsPosition();Utils.asyncDelay(function(){t.controls.style.clip="";t.player.Subtitles.updatePositions();Utils.className(t.container,"controlsFadedIn","controlsFadedOut")});t.player.dispatch({type:"uiControlBarShown"},!0);t.needStopTouch&&setTimeout(function(){Utils.className(t.container,"","stopTouch")},150)}}t.markersUI.updateMarkers()}};G.prototype.updateLayout=function(e){var t=this;if(t.controlsHolder&&(t.container.clientWidth>0||e)){var i=t.config.controls.volumeSlider?2:1,n=t.controlsHolder.clientWidth||t.container.clientWidth;0>=n&&(n=e||0);var a=n-i*U;i+=t.checkFullScreenButton(a);a=n-i*U;i+=t.checkSubtitlesButton(a);a=n-i*U;i+=t.checkPlaybackSettingsButton(a);a=n-i*U;i+=t.checkPiPButton(a);a=n-i*U;i+=t.checkChromecastButton(a);a=n-i*U;i+=t.checkEmbedButton(a);t.controlBarFillerWidth=n-i*U;t.timeDisplay.style.display=90>t.controlBarFillerWidth?"none":"block";t.controlBarFiller.style.width=t.controlBarFillerWidth+"px";t.markersUI.updateMarkers();t.volumeControl.isOpen()&&t.updateControlBarDisplayForOpenVolume();t.updateGradientAndControlsPosition();t.progressBar.updateProgressBar(t.player.timeHelper.percent);t.dispatchUIInfo()}};G.prototype.checkFullScreenButton=function(e){var t=this,i=t.miniModeEnabled||!t.config.fullscreen.enabled||U>e;return Math.abs(o(i,"nofullscreen")-1)};G.prototype.checkPiPButton=function(e){var t=this,i=!t.player.isPlaying360&&t.pIp.supported&&t.config.pictureInPicture.enabled&&e>=U;return o(i,"picInPic")};G.prototype.checkChromecastButton=function(e){var t=this,i=!t.player.isPlaying360&&t.config.chromecast.enabled&&t.player.Chromecast.isAvailable&&(t.player.config.supportLiveChromecast||!t.player.isLive)&&e>=U;return o(i,"chromecast")};G.prototype.checkSubtitlesButton=function(e){var t=this,i=t.config.subtitles.enabled&&t.player.Subtitles.subsAvailable()&&e>=U;!i&&t.subtitleSettingsPanel&&t.subtitleSettingsPanel.isPanelOpen()&&t.subtitleSettingsPanel.closePanel();return o(i,"subtitles")};G.prototype.checkEmbedButton=function(e){var t=this,i=t.player.playlist&&t.config.embed.enabled&&t.player.playlist.embedRight&&e>=U;return o(i,"embed")};G.prototype.checkPlaybackSettingsButton=function(e){var t=this,i=t.config.playbackSettingsPanel.enabled&&(t.config.playbackSettingsPanel.continuousPlaySetting||t.config.playbackSettingsPanel.qualitySetting)&&t.container.clientWidth>=320&&e>=U&&!(!t.config.playbackSettingsPanel.continuousPlaySetting&&t.config.playbackSettingsPanel.qualitySetting&&(Device.preferHls||295>t.container.clientHeight));!i&&t.playbackSettingsPanel&&t.playbackSettingsPanel.isPanelOpen()&&t.playbackSettingsPanel.closePanel();return o(i,"playbackSettings")};G.prototype.resetGuidance=function(){var e=this;clearTimeout(e.guidanceTimeout);e.guidanceTimeout=!1;if(e.padlock&&e.player.config){var t=e.player.config.guidance;if(t){var i=e.config.guidance.pinRequired,n=!i||i&&!t.hasGuidancePIN&&!t.guidanceSkipped||e.player.config.under16&&!e.player.config.guidance.hasGuidancePIN;e.padlock.style.display=Utils.noneOrBlock(!n);e.guidanceClose.style.display="none";e.guidance.style.display="none";e.guidance.className="p_ctaGuidance p_guidance";Utils.className(document.body,"","p_continuousGuidanceOrWarning");if("rtl"===e.config.cta.direction&&!n){Utils.className(e.guidance,"rtlPadlock");e.guidanceBox.style.marginLeft="40px"}}}Utils.setOrUnsetClassOnlyAfterCheck(e.guidance,"p_warning",null,!0);Utils.setOrUnsetClassOnlyAfterCheck(e.guidance,"p_warningCta",null,!0)};G.prototype.guidanceOrWarning=function(){var e=this;if(e.config.guidance.enabled&&e.player.playlist){var t="";if(""!==e.player.playlist.guidance)t=e.player.playlist.guidance;else if(""!==e.player.playlist.warning){t=e.player.playlist.warning;e.padlock&&(e.padlock.style.display="none");e.guidance.className="p_ctaGuidance p_guidance p_warningCta"}if(""!==t){e.guidance.style.display="table";e.guidanceBox.textContent=t}else e.guidance.style.display="none"}else e.guidance.style.display="none"};G.prototype.dispatchUIInfo=function(){var e=this,i=this.UIinfoObject,n=e.player.mediaContainer.clientWidth,a=e.player.mediaContainer.clientHeight;if(!(0>=a||0>=n)){i.referenceHeight=U-1;i.seekBarVisible=e.progressBar.isVisible();i.controlBarVisible=t(e.controlsHolder);i.markersBarVisible=Utils.hasClass(e.container,"p_hasMarkers");i.controlsHeight=i.referenceHeight*((i.seekBarVisible?1:0)+(i.controlBarVisible?1:0))+(i.markersBarVisible?e.markersUI.markerDisplayHeight:0);if(e.controls){var r=Utils.getOffsets(e.controls);if(r.width>0){i.controlsWidth=r.width;i.controlsTop=r.top;i.controlsLeft=r.left}if(e.progressBar){var o=Utils.getOffsets(e.progressBar.seekBar);if(o.width>0){i.seekBarLeft=o.left;i.seekBarRight=o.right}}}var s=e.player.mediaPlayer.videoWidth,l=e.player.mediaPlayer.videoHeight;if(0!==l){var u=s/l,c=n/a;if(c>u){i.videoWidth=Math.round(s*a/l);i.videoHeight=a;i.videoX=Math.round((n-i.videoWidth)/2);i.videoY=0}else{i.videoHeight=Math.round(l*n/s);i.videoWidth=n;i.videoX=0;i.videoY=Math.round((a-i.videoHeight)/2)}}if(e.initialised&&(!e.controls||i.controlsWidth>0)){var d=JSON.stringify(i);if(d!=e.lastUIinfoDispatch){var p={type:"uiinfo",properties:i};for(var f in i)i.hasOwnProperty(f)&&(p[f]=i[f]);e.player.delayedDispatch(p);e.lastUIinfoDispatch=d}}}};G.prototype.getBackgroundImageUrl=function(){var e=this,t=e.container.style.backgroundImage,i=/url\(([^)]+)\)/,n=i.exec(t);return n&&n.length>=2?n[1].replace(/^"+|"+$/g,""):t};G.prototype.guidancePopUp=function(e){var t=this;if(t.config.guidance.enabled)if(!t.config.guidance.displayContinuousGuidanceInQueuePlaylist&&e||!t.config.guidance.displayGuidanceInAutoplay)t.guidance.style.display="none";else{var i="",n="p_guidance p_continuous";if(""!==t.player.playlist.guidance)i=t.player.playlist.guidance;else if(""!==t.player.playlist.warning){n="p_warning p_guidance p_continuous";i=t.player.playlist.warning}if(""!==i){t.padlock.style.display="none";t.guidance.style.visibility="visible";t.guidanceBox.textContent=i;t.guidance.style.display="table";t.guidance.className=n;t.guidanceClose.style.display="block";Utils.className(document.body,"p_continuousGuidanceOrWarning");clearTimeout(t.guidanceTimeout);t.guidanceTimeout=setTimeout(t.eventCallbacks.guidanceHide,1e4)}else t.guidance.style.display="none"}};G.prototype.areControlsVisible=function(){return this.controls&&this.controls.visible};G.prototype.canDisplayRemoteInput=function(){return!0};G.prototype.displayRemoteInput=function(){var e=this;e.ensureRemoteInput();e.remoteInput.style.display="block"};G.prototype.appendRemoteInputContent=function(e){var t=this;t.ensureRemoteInput();3===t.remoteInput.textContent.length&&(t.remoteInput.textContent="");t.remoteInput.textContent+=e;t.remoteInput.timeout&&clearTimeout(t.remoteInput.timeout);if(3===t.remoteInput.textContent.length){z(t);t.remoteInput.timeout=setTimeout(t.clearRemoteInput.bind(t),2e3)}else t.remoteInput.timeout=setTimeout(V,2e3,t)};var V=function(e){z(e);e.clearRemoteInput()},z=function(e){var t=e.getRemoteInputContent(),i=parseInt(t,10),n=e.player.Subtitles,a={type:"keyup"},r=I(e);r(a);if(e.config.controls.experimentalShortcuts&&i>=0&&9>=i){e.player.seekToPercent(i/10);e.player.trackAction("seek_numberkey_"+i,"shortcut_key_press")}if(888===i&&n.subsAvailable())if(n.showingSubs){n.off();e.player.trackAction("subtitles_off","shortcut_key_press")}else{n.on();e.player.trackAction("subtitles_on","shortcut_key_press")}};G.prototype.getRemoteInputContent=function(){var e=this;return e.remoteInput?e.remoteInput.textContent:""};G.prototype.clearRemoteInput=function(){var e=this;if(e.remoteInput){e.remoteInput.style.display="none";e.remoteInput.textContent=""}};G.prototype.ensureRemoteInput=function(){var e=this;if(!e.remoteInput){e.remoteInput=document.createElement("div");e.remoteInput.id="p_remoteInput";e.remoteInput.style.display="none";e.player.mediaContainer.appendChild(e.remoteInput)}};return G}(),AudioUI=function(){function e(e){var t=e.audioUiContainer=document.createElement("div");t.id="p_audioui_container";var i=document.createElement("div");i.id="p_audioui_coreControls";var n=document.createElement("div");n.id="p_audioui_rightRegionControls";i.appendChild(e.playPauseButton.getDomNodes());i.appendChild(e.backIntervalButton.getDomNodes());i.appendChild(e.forwardIntervalButton.getDomNodes());i.appendChild(e.previousButton.getDomNodes());i.appendChild(e.backToStartButton.getDomNodes());i.appendChild(e.nextButton.getDomNodes());i.appendChild(e.toLiveButton.getDomNodes());i.appendChild(e.audioCtaDuration.getDomNodes());t.appendChild(i);t.appendChild(e.volumeControl.getDomNodes()[0]);n.appendChild(e.playbackSettingsButton.getDomNodes());n.appendChild(e.popOutPlayerButton.getDomNodes());t.appendChild(n);appendChildren(t,e.progressBar.getDomNodes());t.appendChild(e.audioTimeDisplays.getDomNodes()[0]);t.appendChild(e.audioTimeDisplays.getDomNodes()[1]);e.container.appendChild(t)}function t(e){return{notPlayingState:function(){},playingState:function(){e.showControls()},losingControl:function(){e.hideControls()},tryingToPlay:function(){},play:function(){},playerDisconnected:function(){e.showCta()},playlistStopped:function(){e.showCta()},playlistEnded:function(t){t.willAutomaticPlayQueuedItem||e.config.controls.availableOnMediaEnded||e.showCta()},playlistLoaded:function(){Utils.asyncDelay(function(){e.player.tryingToPlay||e.showCta()})},durationchange:function(){},beforeErrorDisplay:function(){e.hideControls()}}}var i={buffer:{enabled:!0,colour:"",foreColour:"#ffffff",width:50,thickness:10,top:"50%",left:"50%",forceShow:!1},poster:{enabled:!0,effects:!1},cta:{enabled:!0,visiblyHidden:!1,ignoreAudio:!1,backgroundColour:"#808080"},errorDialog:{enabled:!0},controls:{enableLiveRewind:!0,spaceControlsPlayback:!1,experimentalShortcuts:!1,volumeSlider:!0,volumeDismissTime:2e3,includeNextButton:!1,includePreviousButton:!1,popout:!1},markers:{enabled:!0,suppressMarkerKinds:[],hideBelowWidth:600},subtitles:{enabled:!0,desnakeLiveSubtitles:!0,supportLiveSubtitles:!0,defaultOn:!1,yOffset:0/0,kind:"subtitles",margins:[]},guidance:{enabled:!0,pinRequired:!1,displayContinuousGuidanceInQueuePlaylist:!0,displayGuidanceInAutoplay:!0},embedded:{enabled:!1},miniMode:{enabled:!1,backgroundColour:"#ffffff"},locale:{lang:"en",path:"/emp/translations/smp/{lang}.xml"},useInPlayerGuidance:!1,mediaSessionAPI:{enabled:!0},colour:"#f54997",foreColour:"#ffffff",timesRelativeToLive:!1},n=function(e,t){BaseUI.call(this,e,i,t);this.type="audio";this.container=e.mediaContainer;this.pGuidance=new ParentalGuidance(this,e)};n.prototype=Utils.object(BaseUI.prototype);n.prototype.initialise=function(){var i=this,n=i.player;BaseUI.prototype.initialise.call(this);this.playPauseButton=new AudioPlayButton(this);this.playPauseButton.setActionFunction(i.togglePlay);this.backIntervalButton=new BackIntervalButton(this);this.backIntervalButton.setActionFunction(function(e){n.time=n.time-n.config.skipInterval;n.trackAction("back_interval_button",e)});this.forwardIntervalButton=new ForwardIntervalButton(this);this.forwardIntervalButton.setActionFunction(function(e){n.time=n.time+n.config.skipInterval;n.trackAction("forward_interval_button",e)});this.previousButton=new PreviousButton(this);this.previousButton.setActionFunction(function(e){5>n.time&&n.hasPrevious?n.previous("playing"==n.playingState):n.time=0;n.trackAction("previous_button",e)});this.nextButton=new NextButton(this);this.nextButton.setActionFunction(function(e){n.next("playing"==n.playingState);n.trackAction("next_button",e)});this.backToStartButton=new BackToStartButton(this);this.backToStartButton.setActionFunction(function(e){n.time=n.timeHelper.earliestSeek;"playing"!==n.playingState&&n.requestGuidanceAndPlay();n.trackAction("back_to_start_button",e)});this.toLiveButton=new ToLiveButton(this);this.toLiveButton.setActionFunction(function(e){n.time=n.timeHelper.latestSeek;"playing"!==n.playingState&&n.requestGuidanceAndPlay();n.trackAction("to_live_button",e)});this.popOutPlayerButton=new PopOutPlayerButton(this);this.popOutPlayerButton.setActionFunction(function(e){n.dispatch({type:"popoutrequest"});n.trackAction("pop_out_player_button",e)});this.playbackSettingsButton=new PlaybackSettingsButton(this);this.progressBar=new ProgressBar(this);this.errorDialog=new ErrorDialog(this);this.volumeControl=new VolumeControl(this);this.audioTimeDisplays=new AudioTimeDisplays(this);this.audioCtaDuration=new AudioCtaDuration(this);this.playPauseButton.hide();this.audioCtaDuration.hide();this.audioCtaDuration.remove();this.backIntervalButton.hide();this.forwardIntervalButton.hide();this.previousButton.remove();this.nextButton.remove();this.backToStartButton.remove();this.toLiveButton.remove();this.volumeControl.hide();this.progressBar.hide();this.progressBar.seekBarHolder.style.opacity=0;this.popOutPlayerButton.hide();this.playbackSettingsButton.hide();e(this);this.eventArray=[t(this),this.playPauseButton.getEventCallbacks(),this.backIntervalButton.getEventCallbacks(),this.forwardIntervalButton.getEventCallbacks(),this.previousButton.getEventCallbacks(),this.nextButton.getEventCallbacks(),this.backToStartButton.getEventCallbacks(),this.toLiveButton.getEventCallbacks(),this.progressBar.getEventCallbacks(),this.errorDialog.getEventCallbacks(),this.volumeControl.getEventCallbacks(),this.audioTimeDisplays.getEventCallbacks(),this.popOutPlayerButton.getEventCallbacks(),this.playbackSettingsButton.getEventCallbacks()]};n.prototype.showCta=function(){BaseUI.prototype.showCta.call(this);this.audioUiContainer.style.display="block";this.playPauseButton.show();this.audioCtaDuration.show();this.backIntervalButton.hide();this.forwardIntervalButton.hide();this.nextButton.hide();this.previousButton.hide();this.backToStartButton.hide();this.toLiveButton.hide();this.volumeControl.hide();this.progressBar.hide();this.progressBar.seekBarHolder.style.opacity=1;this.popOutPlayerButton.hide();this.playbackSettingsButton.hide();this.player.dispatch({type:"showCta"})};n.prototype.showControls=function(){BaseUI.prototype.hideCta.call(this);this.audioUiContainer.style.display="block";this.playPauseButton.show();this.audioCtaDuration.hide();this.backIntervalButton.show();this.forwardIntervalButton.show();this.nextButton.show();this.previousButton.show();this.backToStartButton.show();this.toLiveButton.show();this.volumeControl.show();this.progressBar.show();this.progressBar.seekBarHolder.style.opacity=1;this.popOutPlayerButton.show();this.playbackSettingsButton.show()};n.prototype.hideControls=function(){this.audioUiContainer.style.display="none"};n.prototype.areControlsVisible=function(){return!0};return n}(),API=function(){function e(e){var t=e.ui;this.onAdsProcessed=function(t){e.onAdsProcessed(t)};this.updateQuality=function(t){e.updateQuality(t)};this.updateUiConfig=function(e){t.updateConfig(e)};this.captureIntent=function(t,i){if(!i){var n=t?t.type:null;e.captureIntent(n)}};this.dispatch=function(t,i){e.dispatch(t,i)};this.updateGuidance=function(t){e.config.guidance=Utils.merge(e.config.guidance||{},t);e.ui.updateGuidance();e.dispatch({type:"guidanceUpdated"},!0)};this.next=function(t){e.next(t)};this.previous=function(t){e.previous(t)};this.queuePlaylist=function(t){if(e.playlist){try{t=JSON.parse(JSON.stringify(t))}catch(i){}e.setQueuedItem(t)}};this.setPreviousPlaylist=function(t){if(e.playlist){try{t=JSON.parse(JSON.stringify(t))}catch(i){}e.setPreviousItem(t)}};this.updateConfig=function(t){e.updateConfig(t)};this.distributedConfig=function(i){"ui"==i.type?t.updateConfig(i.config.ui,!0):e.updateConfig(i.config,!1,!0)};this.loadPlaylist2=function(t,i){e.loadingPlaylistURL=null;i=i||t.nonUserBypass;try{var n=JSON.parse(JSON.stringify(t.playlistObject))}catch(a){n=t.playlistObject}var r=function(){e.reset();e.resetStatsObject();e.updateConfig(t);n?e.loadPlaylistObject(n,i):t.playlist&&e.loadPlaylistUrl(t.playlist+"",i)},o="video";if(n&&n.items){var s=n.items[0];!s||"audio"!=s.kind&&"radioProgramme"!=s.kind||(o="audio")}i||!t.autoplay||e.willAutoplayWhenPlayCalled[o]||e.captureIntent(o);Utils.asyncDelay(r)};this.play=function(t,i){e.playWithUserCheck(!t||i)};this.pause=function(){e.pause()};this.stop=function(t){t&&t.destroy&&(e.destroying=!0);e.stop()};this.suspend=function(){e.suspend()};this.volume=function(t){"undefined"==typeof t||isNaN(t)||(e.volume=t);return e.volume};this.muted=function(t){e.muted=t;return e.muted};this.showSubtitles=function(t){var i=e.Subtitles;t?i.on():i.off();return i.showingSubs};this.currentTime=function(t){"undefined"!=typeof t&&(e.time=t);return e.time};this.guidanceClosed=function(i){e.dispatch({type:"guidanceClosed",success:i});
i?t.pGuidance.close(!1,!0):e.isFullScreen&&!e.iframeFullscreen&&e.minimise()};this.setData=function(i){if(i){var n=i.data;Utils.asyncDelay(function(){"SMP.markers"===i.name&&(t.markerData=n);if("SMP.webcastData"==i.name){e.webcastData={};if(n){e.webcastData.accurateStartTime=n.accurateStartTime;e.webcastData.accurateEndTime=n.accurateEndTime;e.webcastData.scheduledEndTime=n.scheduledEndTime;e.webcastData.scheduledStartTime=n.scheduledStartTime;e.webcastData.ignoreJoinTime=n.ignoreJoinTime}}"SMP.subtitlesHref"==i.name&&n&&e.Subtitles.updateSubs(n.url);"SMP.thumbManifestUrl"==i.name&&n&&e.thumbScrub.updateOverrideManifest(n.url);"SMP.protectionData"==i.name&&n&&e.setProtectionData(n);if("SMP.availableTime"==i.name&&n){e.timeHelper.setAvailableTime(n);e.ui.timeUpdate()}"SMP.mediaSessionAPI"!=i.name||e.dispatch({type:"setMediaSessionAPIdata",data:i})});e.dispatch({type:"setData",data:i},!0)}};this.pauseAt=function(t){t&&t.sort&&(e.pauseTimes=t.sort(Utils.sortSimple))};this.loadPlugin2=function(e){PluginManager.loadPlugin(e.url,e.data,e.waitOnPluginLoad)};this.setPoster=function(i){var n=i.url,a=i.effect;if(e.playlist){e.playlist.posterRecipe=n;if(t.config.poster.effects&&a&&a.type){switch(a.type){case"fade":t.fadeInNewPosterImage(a);break;case"slide":t.slideInNewPosterImage(a);break;case"zoom":t.zoomInPosterImage(a)}return}t.updatePoster();t.hideEffects()}};this.ccInfo=function(i){var n=e.Chromecast;i.id&&n.deviceId!==i.id&&(n.deviceId=i.id);if(n.isAvailable!==i.available||n.isCasting!==i.casting){n.isAvailable=i.available;n.isCasting&&!n.isAvailable&&n.stopCast();n.isCasting=i.casting;t.updateLayout()}n.activeSession!==i.activeSession&&(n.activeSession=i.activeSession);if(i.state){var a=i.state.toLowerCase();"connecting"===a&&n.connect();"error"===a&&n.stopCastAttempt();n.isCasting&&"playing"===a&&n.playing(i);n.isCasting&&"paused"===a&&n.paused();n.isCasting&&"buffering"===a&&n.buffering();("stopped"===a||"idle"===a)&&n.stopped();"finished"===a&&n.finished();n.isAvailable&&n.externalControlCheck(i)}};this.PINverified=function(e){t.pGuidance.verified(e)}}return e}(),PluginUtilities=function(){function e(e){if(0!==e.indexOf("http:")&&0!==e.indexOf("https:")){var t=this.url;-1!=t.indexOf("?")&&(t=t.substring(0,t.indexOf("?")));return t.substring(0,t.lastIndexOf("/"))+"/"+e}return e}function t(e,t){if(e){var i=this.playerInterface,n=this.relativeUrl(e),a=document.getElementsByTagName("head")[0],r=document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=n;r.addEventListener("load",function(){i.dispatchToPlugins({type:"cssLoaded",path:e,url:n,id:t})});r.addEventListener("error",function(){i.dispatchToPlugins({type:"cssLoadFailed",path:e,url:n,id:t})});a.appendChild(r)}}var i=function(e,t,i){this.url=t;this.playerInterface=e;this.getPluginList=function(){return i.getPluginList()};return this};i.prototype={loadCSS:t,relativeUrl:e,register:null};return i}(),DataStore=function(){var e=function(){};e.prototype={set:function(e){e&&"string"==typeof e.name&&""!==e.name&&"get"!=e.name&&"set"!=e.name&&(this[e.name]=e.data)},get:function(e){return this[e]}};return e}(),PlayerInterface=function(){function e(e,t,i){return{listenerObject:{get:function(){},set:function(t){e.listenerObjects.push(t)}},datastore:{get:function(){return i}},settings:{get:function(){return t.config},set:function(e){t.updateConfig(e)}},uiInfo:{get:function(){return t.ui.UIinfoObject}},currentTime:{get:function(){return t.time},set:function(e){t.time=e}},canPause:{get:function(){return t.timeHelper.canSeek()}},currentItem:{get:function(){return t.mediaItem}},currentChapter:{get:function(){return t.ui.markersUI.getCurrentChapter()}},playlist:{get:function(){return!t.playlist||t.playlist.loading?null:t.playlist}},muted:{get:function(){return t.muted},set:function(e){t.muted=e}},volume:{get:function(){return t.volume},set:function(e){t.volume=e}},paused:{get:function(){return t.paused}},duration:{get:function(){return t.duration}},hasGuidancePassed:{get:function(){return t.hasGuidancePassed}},canShowControls:{get:function(){return t.ui.active&&!t.ui.inPrePlayState}},inError:{get:function(){return t.ui.inError}},isFromIdent:{get:function(){return"ident"==t.mediaItem.kind}},pluginManagerFailedArray:{get:function(){return PluginManager.failedArray}}}}function t(e){r.volume=e.target.volume}function i(){if(l){l.removeEventListener("volumechange",t);r.mediaContainer.removeChild(l);l=null}}function n(){if(r.outOfControl){if(r.resetAfterOutOfControl)if(Device.supportsMultipleMediaElements){i();r.mediaPlayer.style.left="0px"}else if(r.isPlayingDash)r.dashEvents.reattachView();else if(s){r.mediaPlayer.src=s;r.mediaPlayer.load();s=null}r.swf.enableMouseUIBypass();r.dispatch({type:"regainingControl"});r.outOfControl=!1}}function a(e){return function(n){var a;if(n)return r.els[e];if(!r.outOfControl){if(Device.supportsMultipleMediaElements){r.hidePlayer(e,!0);i();l=a=document.createElement(e);l.style.width="100%";l.style.height="100%";l.addEventListener("volumechange",t);r.mediaContainer.insertBefore(l,r.els[e])}else{if(r.isPlayingDash)r.dashEvents.detachView();else{r.selectMediaPlayer(e);s=r.mediaPlayer.src}a=r.mediaPlayer}r.swf.disableMouseUIBypass();r.dispatch({type:"losingControl"});r.outOfControl=!0;r.tryingToPlay=!1;r.resetAfterOutOfControl=!0;r.Subtitles&&r.Subtitles.clearSubtitles()}return a}}var r,o,s,l,u=function(t,i){function n(e){var t={target:a};for(var i in e.properties)"type"!=i&&"target"!=i&&(t[i]=e.properties[i]);for(i in e)"_"!=i&&"target"!=i&&"properties"!=i&&(t[i]=e[i]);"setData"==e.type&&o.set(e.data);a.dispatchToPlugins(t);if("setData"==e.type){t.type="pluginData";a.dispatchToPlugins(t)}}r=t;o=i;var a=this;a.listenerObjects=[];var s=document.createElement("div");s.id="p_pluginContainer";s.className="notInteractiveContent";s.style.width=window.innerWidth+"px";s.style.height=window.innerHeight+"px";t.mediaContainer.appendChild(s);this.container=s;t.requestAllEvents(n);Utils.defineProperties(a,e(a,t,i));return a};u.prototype={callbacks:{},addEventListener:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]);this.callbacks[e].push(t)},removeEventListener:function(e,t){if(this.callbacks[e])for(var i=this.callbacks[e].length-1;i>=0;i--)this.callbacks[e][i]==t&&this.callbacks[e].splice(i,1)},dispatchEvent:function(e){r.dispatch(e)},dispatchToPlugins:function(e){for(var t=e.type,i=this.listenerObjects,n=0;i.length>n;n++){var a=i[n];if(a&&a[t])try{a[t](e)}catch(r){console.error("%cError in a plugin with event"+t+" "+r.message,"color:red;background-color:#ccc")}}var o=this.callbacks[t];if(o)for(n=o.length-1;n>=0;n--)try{o[n](e)}catch(r){console.error("%cError in a plugin with event"+t+" "+r.message,"color:red;background-color:#ccc")}},updateUiConfig:function(e,t){r.ui.updateConfig(e);t&&r.ui.resetIdleTimeout()},loadPlaylist:function(e,t,i){var n={};t===!0||t===!1?n={autoplay:t,overideHoldingImage:i}:"object"==typeof t&&(n=t);"string"!=typeof e?n.playlistObject=e:n.playlist=e;r.api.loadPlaylist2(n,!1)},queuePlaylist:function(e,t){r.api.queuePlaylist(e,t)},setPoster:function(e){r.api.setPoster(e)},setData:function(e){r.api.setData(e)},play:function(e){r.requestGuidanceAndPlay(e===!0)},pauseAt:function(e){r.api.pauseAt(e)},stop:function(){r.api.stop()},suspend:function(){r.api.suspend()},showSubtitles:function(e){r.api.showSubtitles(e)},trackAction:function(e,t,i){r.trackAction(e,t,i)},log:function(e){},pause:function(){r.pause()},previous:function(e){r.previous(e)},next:function(e){r.next(e)},toggleFullscreen:function(){r.toggleFullscreen()},addContextMenuItem:function(e,t,i){DebugConsole.addContextMenuItem(e,t,i)},updateContextMenuItem:function(e,t){DebugConsole.updateContextMenuItem(e,t)},requestVideoElement:a("video"),requestAudioElement:a("audio"),releaseVideoElement:n,releaseAudioElement:n};return u}(),PLUGIN_LOAD_TIMEOUT=4e3,REPORT_PLUGIN_LOAD_TIMEOUT=5e4,PluginManager={pluginArray:[],urls:{},playerInterface:null,mediaPlayer:null,loadPlugin:PluginManager_loadPlugin,init:PluginManager_init,resizeFix:PluginManager_resizeFix,resizeFixEnd:PluginManager_resizeFixEnd,resizeFixComplete:PluginManager_resizeFixComplete,isPluginLoading:PluginManager_isPluginLoading,getPluginList:PluginManager_getPluginList},PropertySplitter=function(e){return function(t){return t[e]||0===t[e]?t[e].toString():null}},PropertyCombiner=function(e,t){return function(i){for(var n=[],a=null,r=function(t){return t[e]===a},o=0;t.length>o;o++){a=t[o];n=n.concat(i.filter(r))}return n}},PropertySorter=function(e,t){return function(i){return Utils.stableSort(i,function(i,n){return t.indexOf(i[e])-t.indexOf(n[e])})}},ConnectionTree=function(){function e(t,i){for(var n=new PropertySplitter(i[0]),a=0;t._data.length>a;){var r=t._data[a],o=n(r);if(o){if(!t[o]){var s=Utils.clone(t._splitPath);s[i[0]]=o;t[o]={_data:[],_splitPath:s}}t[o]._data.push(r);t._data.splice(0,1)}else a++}if(i.length>1)for(var l in t)"_data"!=l&&"_splitPath"!=l&&t.hasOwnProperty(l)&&e(t[l],i.slice(1,i.length))}function t(e,i){var n=[];for(var a in e)if("_data"!=a&&"_splitPath"!=a&&e.hasOwnProperty(a)){var r=i.length>1?i.slice(1,i.length):[];n=n.concat(t(e[a],r))}e._data&&(n=n.concat(e._data));i[0]&&(n=i[0](n,e._splitPath));return n}var i=function(e,t){var i=this;i.splitProperties=e;i.combiners=t?t:[];i.root={_data:[],_splitPath:{}};return i};i.prototype.getCombinedConnections=function(){var e=this;return t(e.root,e.combiners)};i.prototype.addData=function(t){var i=this;i.root._data=t.slice();e(i.root,i.splitProperties)};return i}(),LoadBalancing=function(){function e(e,t){return"dash"==e&&"plain"==t?1:"dash"==t&&"plain"==e?-1:0}function t(e,t){for(var i=0;e.length>i;i++)if(!W||t){if("rtmp"==e[i].protocol||"hds"==e[i].format)return!0;if("video/x-flv"==e[i].mimetype)return!0}else if("hds"==e[i].format&&"https"==e[i].protocol)return!0;return!1}function i(e){return r(o(a(e),8*e.length))}function n(e){for(var t,i="0123456789abcdef",n="",a=0;e.length>a;a++){t=e.charCodeAt(a);n+=i.charAt(t>>>4&15)+i.charAt(15&t)}return n}function a(e){for(var t=Array(e.length>>2),i=0;t.length>i;i++)t[i]=0;for(i=0;8*e.length>i;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}function r(e){for(var t="",i=0;32*e.length>i;i+=8)t+=String.fromCharCode(e[i>>5]>>>24-i%32&255);return t}function o(e,t){e[t>>5]|=128<<24-t%32;e[(t+64>>9<<4)+15]=t;for(var i=Array(80),n=1732584193,a=-271733879,r=-1732584194,o=271733878,d=-1009589776,p=0;e.length>p;p+=16){for(var f=n,m=a,g=r,h=o,y=d,v=0;80>v;v++){i[v]=16>v?e[p+v]:c(i[v-3]^i[v-8]^i[v-14]^i[v-16],1);var b=u(u(c(n,5),s(v,a,r,o)),u(u(d,i[v]),l(v)));d=o;o=r;r=c(a,30);a=n;n=b}n=u(n,f);a=u(a,m);r=u(r,g);o=u(o,h);d=u(d,y)}return Array(n,a,r,o,d)}function s(e,t,i,n){return 20>e?t&i|~t&n:40>e?t^i^n:60>e?t&i|t&n|i&n:t^i^n}function l(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function u(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}function c(e,t){return e<<t|e>>>32-t}function d(e){return"/atk/"+n(i("7dff7671d0c697fedb1d905d9a121719938b92bf"+e))+"/asn/1"}function p(e,t){var i=e.supplier+"",n="https"===e.protocol?"_https":"";i.split("_").length<2?e.supplier=t.substring(0,1)+"_"+i+"_"+e.format+n:(2==i.split("_").length||"audio"==t&&3==i.split("_").length)&&(e.supplier=i+"_"+e.format+n)}function f(e){return!!e}function m(e){return W&&"https:"===(location.protocol+"").toLowerCase()?"https"===e.protocol:!0}function g(e,t){for(var i=0;t.length>i;i++)if(e.href===t[i].href)return!1;return!0}function h(e){if(D)return(e.supplier+"").indexOf(D)>-1;if(Device.noSupportForLocationHeader){var t=e.supplier+"";if(t.indexOf("bidi_")>-1&&t.indexOf("nonbidi_")<0)return!1}return!0}function y(e){var t=e.href+"";return 0===t.indexOf("http://")||0===t.indexOf("https://")||0===t.indexOf("blob:")||0===t.indexOf("file://")}function v(e){return-1===B.indexOf(e.format?e.format:"plain")}function b(e,t,i){if("360"!=i.kind&&"plain"===e.format){var n=M.plain,a=R.plain;return!(n&&n>e.bitrate||a&&e.bitrate>a)}return!0}function C(e){return!("dash"===e.format&&"https:"===(location.protocol+"").toLowerCase()&&0===(e.href+"").toLowerCase().indexOf("http:"))}function E(e,t){return e.dpw&&t.dpw?t.dpw-e.dpw:e.dpw?-1:t.dpw?1:e.priority-t.priority}function P(e,t){!e||!e.connections||2>e.connections.length||N(e,t)}function T(e){var t;t="https"==e.preferProtocol||"https"==q?["https","http"]:["http","https"];return t}function S(e){var t=0,i=0;if(2>e.length)return e;for(var n=0;e.length>n;n++){var a=e[n].dpw;if(a>0&&100>=a){i++;t+=a}else e[n].dpw=null}e.sort(E);if(0===t)return e;if(t>100){for(n=1;e.length>n;n++)e[n].dpw=null;e.sort(E);e[1].dpw=100-e[0].dpw;i=2}else if(100>t){for(n=0;e.length>n;n++)if(null==e[n].dpw){e[n].dpw=100-t;t=100;break}if(100>t){var r=(100-t)/2;e[0].dpw+=r;e[1].dpw+=r}}if(i>0){var o=Math.round(100*Math.random());t=0;for(n=0;e.length>n;n++){var s=e[n];t+=s.dpw;if(t>o){e.splice(n,1);e.unshift(s);break}}}return e}function _(t){if(t.backgroundVideo)return["plain"];var i=Utils.isItemAudio(t),n=Device.filterDash||"360"==t.kind&&(Device.ios||Device.macSafari),a=t.flashAvailable&&Device.preferVideoFallbackOverHLS&&!i||"360"==t.kind&&(Device.ios||Device.macSafari),r=["plain","hls","dash"],o=i?Device.supportsAudioDash:Device.supportsVideoDash;o&&Device.supportsHls&&!a?r=Device.preferHls?["hls","dash","plain"]:["dash","plain","hls"]:o?r=["dash","plain","hls"]:Device.supportsHls&&(r=["hls","plain","dash"]);a&&(r=r.filter(I));n&&(r=r.filter(k));G&&(r=Utils.stableSort(r,e));return r}function I(e){return"hls"!=e}function k(e){return"dash"!=e}function w(e,t){return e?e.toLowerCase():t}function A(e,t){var i=parseFloat(e);return isNaN(i)?t:i}function L(e){var t=function(t,i){return e&&i.format&&"plain"==i.format?Utils.stableSort(t,function(e,t){return e.bitrate-t.bitrate}):Utils.stableSort(t,function(e,t){return t.bitrate-e.bitrate})};return t}function N(e,t){var i=["format","protocol","bitrate"],n=[new PropertyCombiner("format",_(e)),new PropertySorter("protocol",T(e)),L(t),S],a=new ConnectionTree(i,n);a.addData(e.connections);e.connections=a.getCombinedConnections()}function O(e){if(e.subtitleConnections&&e.subtitleConnections.length>1){var t=["protocol"],i=[new PropertySorter("protocol",T(e)),S],n=new ConnectionTree(t,i);n.addData(e.subtitleConnections);e.subtitleConnections=n.getCombinedConnections()}}function x(e){if(e.thumbnailConnections&&e.thumbnailConnections.length>1){var t=["protocol"],i=[new PropertySorter("protocol",T(e)),S],n=new ConnectionTree(t,i);n.addData(e.thumbnailConnections);e.thumbnailConnections=n.getCombinedConnections()}}var D,M={},R={},B=[],U="http://open.live.bbc.co.uk/mediaselector/5/select/version/2.0/vpid/{id}/format/json/mediaset/journalism-http-mobile/jsfunc/{callback}",F=null,H=null,q="http",W=!1,G=!1,V={getFlashAvailable:t,setConfig:function(e){if(e){M=e.bitrateFloor;R=e.bitrateCeiling;B=e.suppressType;D=e.mediator&&e.mediator.fck;U=e.mediatorHref||U;F=e.cvidMediatorHref;H=e.samlMediatorHref||H;W=e.maintainTheLock;G=e.preferPlainOverDash&&Device&&Device.possiblyPreferPlainOverDash;q=e.preferProtocol||"http"}},sortThumbnailConnections:x,sortSubtitleConnections:O,validateConnections:P,mediate:function(e,i,n){if(!e.mediationRequested){e.mediationRequested=!0;var a=U.replace("{id}",e.identifier);if(e.identifier&&0===e.identifier.indexOf("CVID:")){if(!F){Utils.asyncDelay(function(){e.mediationAttempted=!0;e.mediationRequested=!1;e.result={reason:"nocvidmediator"};n(e)});return}a=F.replace("{id}",e.cvid)}e.samltoken&&H&&(a=H.replace("{id}",e.identifier)+"?saml_auth="+e.samltoken);isNaN(e.ceiling)||0===e.ceiling||(a=a.replace("/jsfunc","/ceiling/"+e.ceiling+"/jsfunc"));Device&&Device.supportPlayerFallback&&(a=a.replace("/jsfunc",d(e.identifier)+"/jsfunc"));a=a.replace("http://","https://");var r=Utils.now();Utils.getJSON(a,function(a){var o=[];a||(a={result:"error"});var s=a.result;e.mediationTime=Utils.now()-r;if(a.media&&a.media.length){for(var l="",u=0;a.media.length>u;u++){var c=a.media[u];parseInt(c.width,10)/parseInt(c.height,10)==2&&(e.type=e.kind="360");l=c.kind;for(var d=0;c.connection.length>d;d++){var f=c.connection[d];if("audio"==l||"video"==l){var m={href:f.href,protocol:w(f.protocol),mimetype:w(c.type),encoding:w(c.encoding),format:w(f.transferFormat,"plain"),supplier:w(f.supplier),bitrate:A(c.bitrate,0),priority:A(f.priority),dpw:A(f.dpw)};p(m,l);o.push(m);l===e.type||"video"==l&&"360"==e.type||(e.type=l)}else e.backgroundVideo||"captions"!=l?e.backgroundVideo||"thumbnails"!=l||e.thumbnailConnections.push({href:f.href,protocol:w(f.protocol),supplier:w(f.supplier),dpw:A(f.dpw),priority:A(f.priority)}):e.subtitleConnections.push(new SubtitlesItem(f.href,w(f.protocol),w(f.supplier),A(f.dpw)))}}if(o.length){e.connections=o;N(e,i);P(e,i);for(var g=1;o.length>g;g++)for(var h=o[g].supplier,y=0;g>y;y++)o[y].supplier==h&&(o[y].supplier=h+="_");e.originalConnections=Utils.clone(o)}else s="noMedia";if(!e.backgroundVideo){O(e);x(e)}}e.mediationAttempted=!0;e.mediationRequested=!1;e.result={reason:s};e.flashAvailableUnlocked=t(o,!0);e.flashAvailable=Device.flashLockMatters?t(o):e.flashAvailableUnlocked;n(e)})}},pickInitialMediaConnection:function(e,t){P(e,t);var i=e.connections?e.connections:[];return i.length>0?{index:0,connection:i[0]}:{}},filter:function(e){var t=[],i=e.connections.length,n=[f,v,y,b,h,C,g,m];if(1==i&&y(e.connections[0])&&m(e.connections[0]))return!0;for(var a=0;i>a;a++){for(var r=!0,o=e.connections[a],s=0;n.length>s;s++)if(!n[s](o,t,e)){r=!1;break}r&&t.push(o)}e.connections=t;e.originalConnections=Utils.clone(t);return t.length>0},getAlternateMediaConnections:function(e,t,i){if(e.mediaItem&&!e.mediaItem.failFast&&e.mediaItem.connections&&e.mediaItem.connections.length>1){var n=e.mediaItem.connections,a=[],r=n[0];"plain"==r.format&&(t=!1);for(var o=1;n.length>o;o++)t?n[o].format!=r.format&&a.push(n[o]):e.mediaItem.failedConnections.indexOf(n[o].supplier)<0&&n[o].supplier!=i&&a.push(n[o]);if(e.mediaItem.hasSeenPlaying){var s=e.mediaConnection;if(s){var l=a[0];if(s.format!=l.format||s.protocol!=l.protocol)return}}if(a.length)return a}},switchMediaConnection:function(e,t,i){var n;n=i?Utils.clone(e.mediaItem.originalConnections):V.getAlternateMediaConnections(e,t);if(n){e.failedOver=!t;var a=n[0];e.mediaItem.connections=n;t&&(e.mediaItem.originalConnections=Utils.clone(n));e.failingOver=!0;var r=a.href;if(e.mediaItem.live&&"hls"==a.format){e.timeHelper.setStartTimeAvailable(!1);e.waitingForStartTime=e.waitingForStartTime||e.time}else e.waitingForStartTime=e.waitingForStartTime||e.time-e.timeHelper.presentationTimeOffset;e.dispatch({type:"waiting"});e.mediaSrc(r);e.tryingToPlay&&"dash"!==a&&e.mediaPlayer.play();return!0}return!1},onAdsProcessed:function(e,t){e.mediationAttempted=!0;e.connections=[];t.error||(e.connections[0]={href:t.mediaFile.src,format:"plain"})}};return V}(),DashEvents=function(){function e(e,t){return e==t.els.video?"video":e==t.els.audio?"audio":e==t.els[360]?"360":"unknown"}function t(e){var t=e.Period_asArray;if(t)for(var i=0;t.length>i;i++){var n=t[i].AdaptationSet_asArray;if(n)for(var a=0;n.length>a;a++){var r=n[a].Representation_asArray;if(r)for(var o=0;r.length>o;o++){var s=r[o];"video/mp4"==s.mimeType&&(s.codecs=s.codecs.replace("avc3","avc1"))}}}return e}function i(e){var t=e.Period_asArray;if(t)for(var i=0;t.length>i;i++){var a=t[i].AdaptationSet_asArray;if(a)for(var r=0;a.length>r;r++)n(a[r])}}function n(e){var t=e.SegmentTemplate;t&&0===t.startNumber&&(t.startNumber=1)}function a(e){var t=e.Period_asArray;if(t)for(var i=0;t.length>i;i++){var n=t[i].AdaptationSet_asArray;if(n)for(var a=0;n.length>a;a++){var r=n[a].SegmentTemplate;if(r&&"presentationTimeOffset"in r){var o=r.timescale||1;return r.presentationTimeOffset/o}}}return 0}function r(e){var t=e.Period_asArray;if(t[0])for(var i=t[0].AdaptationSet_asArray,n=0;i.length>n;n++)if(i[n].InbandEventStream)return!0;return!1}function o(e,t){e.tryingToPlay&&e.mediaPlayer.paused&&(t>10||e.buffered>=e.duration)&&e.mediaPlayer.play()}function s(){z=!1;for(var e=0;V.length>e;e++)V[e].errorSettingUp()}function l(e){u(e);e.drmErrorTimeout=setTimeout(e.errorHandler,q,e.player,SMPError.DRM_ERROR_TIMEOUT)}function u(e){if(e.drmErrorTimeout){clearTimeout(e.drmErrorTimeout);e.drmErrorTimeout=null}}function c(e){if(!z){z=!0;var t=document.createElement("script");t.type="text/javascript";var i=setTimeout(s,Q);t.onload=function(){clearTimeout(i);z=!1;P();for(var e=0;V.length>e;e++)V[e].ready()};var n="/emp/dashjs/2.9.2-3";e&&(n="/emp/dashjs/2.9.2-3");t.src=n+"/dash.all.min.js";document.body.appendChild(t)}}function d(e){function t(t){e.slowDownloadCount[t]=0}var i=e.player;return{metricAdded:{HttpList:function(n){var a=n.mediaType,r="video"==n.mediaType?3:10,o=n.value;if(o.interval&&"MediaSegment"===o.type&&0===o.quality&&o._mediaduration>2&&o.interval/1e3/o._mediaduration>1.05){if(e.canDispatchFragmentWarning){e.errorHandler(i,SMPError.DOWNLOAD_WAS_SLOW);e.canDispatchFragmentWarning=!1}clearTimeout(e.timersClearedOnReset[a]);e.timersClearedOnReset[a]=setTimeout(t,W,a);e.slowDownloadCount[a]++;if(e.slowDownloadCount[a]>r&&0===i.mediaPlayer.playbackRate){i.mediaPlayer.pause();e.delayedErrorHandler(i,SMPError.DOWNLOADS_OFTEN_SLOW,o.url)}}},BufferLevel:function(t){var n=t.mediaType,a=t.value.level/1e3;if(a!=e.bufferLevel[n]){Device.requiresManualDashPlay&&o(i,a);e.bufferLevel[n]=a}},DVRInfo:function(t){e.dashPlayer.currentStart=Math.min(t.value.range.end,t.value.range.start+30);e.dashPlayer.currentEnd=t.value.range.end;e.player.timeHelper.startTimeAvailable||e.player.timeHelper.setStartTimeAvailable(!0)}}}}function p(e,t){if(e.dashPlayer){var i=e.player.consideredMobileConnection?0:.3;if(document.hidden&&t>i)return Math.min(i,t)}return t}function f(e){var t,i=function(){if(e.dashPlayer){var t=e.player.quality||new Quality,i=t.getVideoRatio();i=p(e,i);e.dashPlayer.setMaxAllowedRepresentationRatioFor("video",i)}};return function(){clearTimeout(t);var e=document.hidden?2500:100;t=setTimeout(i,e)}}function m(e){var t=e.player;return function(i){var n=e.initialBitrate.video||0,a=e.initialBitrate.audio||0;try{if(window.localStorage){!n&&localStorage.smphtml5_vbr&&(n=parseInt(localStorage.smphtml5_vbr,10));if(!a&&localStorage.smphtml5_abr){a=parseInt(localStorage.smphtml5_abr,10);t.consideredMobileConnection&&(a=Math.min(97,a))}}}catch(o){}if(a){e.dashPlayer.setInitialBitrateFor("video",n/1e3);e.dashPlayer.setInitialBitrateFor("audio",a/1e3)}else{var s=.6;if(t.config.hasOwnProperty("startingQuality"))s=t.config.startingQuality;else if(t.config.consideredMobileConnection)s=.1;else if(t.config.hasOwnProperty("quality"))switch(t.config.quality){case"hd":case"high":s=1;break;case"medium":t.mediaContainer.clientWidth>=832&&(s=1);break;case"low":s=0}e.dashPlayer.setInitialRepresentationRatioFor("video",s);e.dashPlayer.setInitialRepresentationRatioFor("audio",s)}if(t.mediaItem&&"video"==t.mediaItem.type){e.dashPlayer.setAutoSwitchQualityFor("audio",!1);t.consideredMobileConnection?e.dashPlayer.setInitialBitrateFor("audio",48):e.dashPlayer.setInitialBitrateFor("audio",97)}else e.dashPlayer.setAutoSwitchQualityFor("audio",!0);t.mediaItem&&t.mediaItem.live&&(e.isLiveWebcast=r(i.data));if(e.isLiveWebcast){var l=g(i.data);if(l.ended){e.isLiveWebcast=!1;y(e);e.player.timeHelper.setInbandEndTime(l.endTime)}else h(e)}if(e.manifestRefreshCallback){var u=e.manifestRefreshCallback;e.manifestRefreshCallback=null;u()}}}function g(e){return{ended:!isNaN(e.mediaPresentationDuration),endTime:e.mediaPresentationDuration}}function h(e){e.webcastRefreshId||(e.webcastRefreshId=setInterval(function(){var t=e.player.timeHelper;t.latestSeek-e.player.time>G/1e3&&e.refreshManifest()},G))}function y(e){if(e.webcastRefreshId){clearInterval(e.webcastRefreshId);e.webcastRefreshId=null}}function v(e,t,i,n){e.streamingBitrate[t]={rate:i,index:n}}function b(e,t,i,n){var a=e.player,r=a.mediaConnection;a.dispatch({type:"bitrateChanged",streamType:t,previousBitrate:e.bitrate[t]?e.bitrate[t].rate:0/0,newBitrate:i,newIndex:n});e.bitrate[t]={rate:i,index:n};for(var o={all:[]},s=a.dashEvents.dashPlayer.getActiveStream().getProcessors()||[],l=0;s.length>l;l++){var u=s[l];if(u){var c=u.getMediaInfo();if(c){var d=new RegExp('.*codecs="(.*)"',"gim"),p=d.test(c.codec);if(p){var f=c.type;o.all.push(RegExp.$1);"all"!=f&&(o[f]=RegExp.$1)}}}}a.dispatch({type:"loadedmetadata",bitrate:e.currentBitsPerSecond,codecs:o.all.join(","),audioCodec:o.audio,videoCodec:o.video,cdn:r?r.supplier:null});try{window.localStorage&&("audio"===t?localStorage.setItem("smphtml5_abr",i):"video"===t&&localStorage.setItem("smphtml5_vbr",i))}catch(m){}e.slowDownloadCount[t]=0}function C(e,t,i){for(var n=e.dashPlayer.getBitrateInfoListFor(t)||[],a=0;n.length>a;a++)if(n[a].qualityIndex===i)return n[a].bitrate;return-1}function E(e){return function(t){var i=t.metric;e[t.type]&&e[t.type][i]&&e[t.type][i](t)}}function P(){var e=window.dashjs.MediaPlayer.errors;K={};K[e.MANIFEST_ERROR_ID_PARSE_CODE]=SMPError.MPD_PARSE_ERROR;K[e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE]=SMPError.MPD_PARSE_ERROR;K[e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE]=SMPError.MPD_PARSE_ERROR;K[e.MANIFEST_ERROR_ID_NOSTREAMS_CODE]=SMPError.MPD_NO_STREAMS;K[e.MANIFEST_ERROR_ID_CODEC_CODE]=SMPError.NO_SUPPORTED_CODECS;K[e.DOWNLOAD_ERROR_ID_MANIFEST_CODE]=SMPError.MPD_LOAD_FAIL;K[e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE]=SMPError.INIT_FRAGMENT_LOAD_FAIL;K[e.DOWNLOAD_ERROR_ID_CONTENT_CODE]=SMPError.STREAM_FRAGMENT_LOAD_FAIL;K[e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE]=SMPError.DASH_MEDIASOURCE_ERROR;K[e.DOWNLOAD_CONTENT_LENGTH_MISMATCH]=SMPError.STREAM_FRAGMENT_CONTENT_LENGTH_MISMATCH}function T(e){return function(t){var i=window.dashjs.MediaPlayer.errors;if("key_session"!==t.error){var n;if(t.error&&t.error.code){switch(t.error.code){case i.CAPABILITY_MEDIASOURCE_ERROR_CODE:case i.CAPABILITY_MEDIAKEYS_ERROR_CODE:e.delayedErrorHandler(e.player,SMPError.DEVICE_NOT_SUPPORTED);break;case i.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case i.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case i.DOWNLOAD_ERROR_ID_CONTENT_CODE:case i.DOWNLOAD_CONTENT_LENGTH_MISMATCH:var a=t.error.data.request.url,r=t.error.data.response.status;n=a+"_"+r;break;case i.MANIFEST_ERROR_ID_CODEC_CODE:var o=t.error?t.error.message:"(unknown)";n=o.match(/\(.*\)/g)[0]||"unknown";break;case i.MANIFEST_ERROR_ID_PARSE_CODE:case i.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case i.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:case i.MANIFEST_ERROR_ID_NOSTREAMS_CODE:}var s=K[t.error.code];if(s){if(s==SMPError.NO_SUPPORTED_CODECS&&e.player.config.ignoreCodecErrors)return;(s===SMPError.INIT_FRAGMENT_LOAD_FAIL||s===SMPError.STREAM_FRAGMENT_LOAD_FAIL)&&(s=_(e,s,t));if(s==SMPError.NO_SUPPORTED_CODECS){Utils.asyncDelay(e.reset,[],e);if(e.player.supportFallback){s=SMPError.NO_SUPPORTED_CODECS_FAILOVER;Utils.asyncDelay(e.player.fallbackAsAppropriate,[],e.player)}}e.delayedErrorHandler(e.player,s,n)}}}else{e.delayedErrorHandler(e.player,SMPError.DRM_KEY,t.event);l(e)}}}function S(e,t){e.removedList=e.connections.filter(function(e){return e.supplier===t});e.connections=e.connections.filter(function(e){return e.supplier!==t});if(1===e.connections.length){e.removedList=e.connections;e.connections=[]}}function _(e,t,i){var n=t,a=i.error.data.request,r=a.mediaInfo.streamInfo.duration,o=a.startTime;if(1>r-o){e.player.endOnWaiting=!0;return SMPError.FRAGMENT_END_DOWNLOAD_INFORMATION}S(e,a.serviceLocation);if(0!==e.dashFailoversRemaining()||e.streamFragmentErrorSent)switch(t){case SMPError.INIT_FRAGMENT_LOAD_FAIL:n=SMPError.INIT_FRAGMENT_DOWNLOAD_INFORMATION;break;case SMPError.STREAM_FRAGMENT_LOAD_FAIL:n=SMPError.FRAGMENT_DOWNLOAD_INFORMATION}else e.streamFragmentErrorSent=!0;return n}function I(e){return function(t){var i=t.newQuality,n=t.mediaType;v(e,n,C(e,n,i),i)}}function k(e){return function(t){var i=t.newQuality,n=t.mediaType;b(e,n,C(e,n,i),i)}}function w(e){return function(t){for(var i,n=0;e.connections.length>n;n++){var a=e.connections[n];if(a.href.indexOf(t.baseUrl.url)>=0){i=a;break}}if(i&&e.connections[0]!==i){A(e.connections,i);A(e.player.mediaItem.connections,i);e.player.dispatch({type:"changingsrc",supplier:i.supplier,encoding:i.encoding,format:i.format})}}}function A(e,t){var i=e.indexOf(t);if(i>0){e.splice(i,1);e.unshift(t)}return i>=0}function L(e){return function(){e.player.mediaItem.dashAlternates&&(e.connections=[])}}function N(e){return function(t){e.player.dispatch(t)}}function O(e){return function(t){isNaN(t.newDuration)||e.player.timeHelper.setInbandEndTime(t.newDuration)}}function x(e){if(!e.eventsInitialised){e.errorHistory=[];var t=e.player,i=e.dashPlayer,n=dashjs.MediaPlayer.events;Utils.multiAddEventListener(i,[n.METRIC_ADDED,n.METRIC_UPDATED],E(d(e)));i.addEventListener(n.STREAM_INITIALIZED,function(){for(var e=i.getBitrateInfoListFor("video")||[],n=i.getBitrateInfoListFor("audio")||[],a=[],r=[],o=0;e.length>o;o++)a.push({bitrate:e[o].bitrate,qualityIndex:e[o].qualityIndex});for(o=0;n.length>o;o++)r.push({bitrate:n[o].bitrate,qualityIndex:n[o].qualityIndex});t.dispatch({type:"streamInitialized",bitrates:a||r,audioBitrates:r})});i.addEventListener(n.MANIFEST_LOADED,m(e));i.addEventListener(n.ERROR,T(e));i.addEventListener(n.QUALITY_CHANGE_REQUESTED,I(e));i.addEventListener(n.QUALITY_CHANGE_RENDERED,k(e));i.addEventListener(n.AST_IN_FUTURE,function(i){if(i.delay>2e4){clearTimeout(e.timersClearedOnReset.AST_IN_FUTURE);e.timersClearedOnReset.AST_IN_FUTURE=setTimeout(Utils.callErrorFunction,100,t,SMPError.CONTENT_NOT_AVAILABLE_PRE_START)}});if(n.BASEURL_SELECTED){i.addEventListener(n.BASEURL_SELECTED,w(e));i.addEventListener(n.URL_RESOLUTION_FAILED,L(e))}i.addEventListener("needkey",N(e));i.addEventListener(n.MANIFEST_VALIDITY_CHANGED,O(e));e._visibilityChangeHandler=f(e);document.addEventListener("visibilitychange",e._visibilityChangeHandler);e.eventsInitialised=!0}}function D(e){for(var t=dashjs.MediaPlayer.events,i=[t.METRIC_ADDED,t.METRIC_UPDATED,t.MANIFEST_LOADED,t.ERROR,t.QUALITY_CHANGE_REQUESTED,t.QUALITY_CHANGE_RENDERED,t.AST_IN_FUTURE,t.MEDIA_FRAGMENT_LOADED,t.BASEURL_SELECTED,t.SERVICE_LOCATION_BLACKLIST_CHANGED,t.URL_RESOLUTION_FAILED,t.STREAM_INITIALIZED,t.MANIFEST_VALIDITY_CHANGED,"needkey"],n=e.dashPlayer,a=0;i.length>a;a++)n.removeEventListener(i[a]);document.removeEventListener("visibilitychange",e._visibilityChangeHandler);e.eventsInitialised=!1}function M(e){return{currentBitsPerSecond:{get:function(){return e.bitrate?Math.round((e.bitrate.video.rate+e.bitrate.audio.rate)/1e3):0}},currentBitrateIndex:{get:function(){var t;e.bitrate&&(t=e.bitrate.video.index);isNaN(t)&&(t=e.bitrate.audio.index);return t}},dashJsDebug:{get:function(){return j},set:function(e){var t=this.dashPlayer;j=!!e;t&&t.getDebug().setLogToBrowserConsole(e)}}}}function R(e,t){if(!e.player.isLive){var i=[],n=e.connections.slice(1),a=e.connections[0];i.push({__text:t.baseUri,"dvb:priority":1,serviceLocation:a.supplier});n=n.filter(function(e){return-1==(e.supplier+"").indexOf("bidi")});for(var r=2,o=0;n.length>o;o++)i.push(B(n[o],r));r++;if(n.length>1)for(var s=0;n.length>s;s++)i.push(B(n[s],r++));if(i.length){t.BaseURL_asArray=i;delete t.baseUri;e.player.mediaItem&&(e.player.mediaItem.dashAlternates=!0)}}}function B(e,t){var i=e.href,n=i.split(".ism/");if(n&&-1!=i.indexOf(".ism/")){var a=n[0]+".ism/";return{__text:a,"dvb:priority":t,"dvb:weight":e.dpw,serviceLocation:e.supplier||a}}}function U(e,t){return e&&e.simulcast&&!Utils.isItemAudio(e)&&t}function F(e,t,i,n){var a=n.BaseURL&&n.BaseURL.__text;a||(a=n.originalUrl);if(a){var r=new LiveSubtitlesItem(a,!1);i.subtitleConnections.push(r);var o=function(e){"video"==e.chunk.mediaInfo.type&&r.onFragmentLoaded(e.chunk,e.request)};e.dashPlayer.addEventListener(t,o);e.player.Subtitles&&e.player.Subtitles.onNewConnection();return!0}return!1}function H(e,t){if(e.dashPlayer){u(e);e.dashPlayer.setProtectionData(t)}}var q=1e4,W=36e4,G=6e4,V=[],z=!1;try{var j=document.cookie.indexOf("dashJsDebug=true")>-1}catch(Y){}var K,Q=1e4,X=function(e,t,i){var n=this;V.push(n);n.player=e;n.experimentalDash=t;Utils.defineProperties(n,M(n));window.dashjs?n.ready(dashjs.MediaPlayer):c(t);
this.codecRefresh=-1;this.setup();n.errorHandler=i;return this};X.prototype={ready:function(){var e=dashjs.MediaPlayer,t=this;if(!t.dashPlayer){t.dashPlayer=e().create();t.dashPlayer.addEventListener=t.dashPlayer.on;t.dashPlayer.removeEventListener=t.dashPlayer.off;t.dashPlayer.getDebug().setLogToBrowserConsole(j);t.dashPlayer.initialize();x(t)}t.connections&&t.connections.length&&t.go()},resetSrc:function(){var e=this;e.connections=null},setSrc:function(e){var t=this;t.connections=e.filter(function(t){return t.protocol===e[0].protocol&&"dash"==t.format});(t.player.config.disableDashBaseUrlFailover||t.player.isLive)&&(t.connections=t.connections.slice(0,1));window.dashjs?t.ready(dashjs.MediaPlayer):c()},updatePortalSize:function(){var e=this;if(e.dashPlayer){clearTimeout(e.portalResizer);e.portalResizer=setTimeout(e.dashPlayer.updatePortalSize.bind(e.dashPlayer),300)}},applyQuality:function(){var e=this,t=e.player,i=t.quality||new Quality;if(e.dashPlayer){e.dashPlayer.setMaxAllowedRepresentationRatioFor("video",p(e,i.getVideoRatio()));e.dashPlayer.setMaxAllowedRepresentationRatioFor("audio",i.getAudioRatio());e.dashPlayer.setMaxAllowedBitrateFor("video",0/0);if(isNaN(parseInt(t.config._dashVideoIndex))){e.dashPlayer.setAutoSwitchQualityFor("video",!0);var n=t.mediaItem,a=!(n&&"360"===n.kind);e.dashPlayer.setLimitBitrateByPortal(a)}else{e.dashPlayer.setAutoSwitchQualityFor("video",!1);e.dashPlayer.setLimitBitrateByPortal(!1);e.dashPlayer.setQualityFor("video",t.config._dashVideoIndex)}if(isNaN(parseInt(t.config._dashAudioIndex)))t.isAudio&&e.dashPlayer.setAutoSwitchQualityFor("audio",!0);else{e.dashPlayer.setAutoSwitchQualityFor("audio",!1);e.dashPlayer.setQualityFor("audio",t.config._dashAudioIndex)}}},go:function(){var n=this,o=n.player;n.dashPlayer.reset();o.storedProtectionData&&H(n,o.storedProtectionData);n.dashPlayer.setSelectionModeForInitialTrack(o.config.lowBandwidth?"lowestBitrate":"highestBitrate");n.dashPlayer.setScheduleWhilePaused(!0);n.dashPlayer.clearDefaultUTCTimingSources();n.dashPlayer.setLimitBitrateByPortal(!0);n.dashPlayer.setPortalScale(1);n.dashPlayer.setPortalLimitMinimum(2e3);n.dashPlayer.enableLastBitrateCaching(!1);n.dashPlayer.enableLastMediaSettingsCaching(!1);n.dashPlayer.setBufferToKeep(90);if(o.config.lowLatencyMode)n.dashPlayer.setLowLatencyEnabled(!0);else{n.dashPlayer.useSuggestedPresentationDelay(!1);n.dashPlayer.setLiveDelay(10)}n.applyQuality();n.dashPlayer.setInitialMediaSettingsFor("audio",{audioChannelConfiguration:2});if(n.mediaElement){n.dashPlayer.attachView(n.mediaElement);n.dashPlayer.updatePortalSize()}var s=e(o.mediaPlayer,o),l=n.connections[0].href;if(o.waitingForStartTime>0){var u=o.mediaItem.live&&!o.mediaItem.simulcast?"#r=":"#t=",c=o.timeHelper.unixTimeToStreamTime(o.waitingForStartTime);l+=u+c+"s"}n.dashPlayer.retrieveManifest(l,function(e){if(e&&n.connections){n.connections.length>1&&!o.config.disableDashBaseUrlFailover&&!e.BaseURL&&R(n,e);Device.requiresDashAVC3CodecHack&&(e=t(e));e.UTCTiming&&"https://time.akamai.com/?iso"==e.UTCTiming.value&&(e.UTCTiming.value="https://time.akamai.com/?iso&ms");U(o.mediaItem,o.ui.config.subtitles&&o.ui.config.subtitles.supportLiveSubtitles)&&F(n,dashjs.MediaPlayer.events.MEDIA_FRAGMENT_LOADED,o.mediaItem,e);n.player.timeHelper.setPresentationTimeOffset(a(e)||0);o.mediaItem&&o.mediaItem.live&&(n.isLiveWebcast=r(e));n.isLiveWebcast?g(e).ended&&(n.isLiveWebcast=!1):o.mediaItem&&!o.isAudio&&o.mediaItem.live&&i(e);n.player.waitingForChange[s]=!1;if(n.mediaElement){n.dashPlayer.setAutoPlay(n.manuallyFailingOver||n.mediaElement.autoplay);n.manuallyFailingOver=!1}n.dashPlayer.attachSource(e);n.mediaElement||n.dashPlayer.preload()}})},reset:function(){var e=this;e.setup();e.resetSrc();if(e.codecRefresh){clearTimeout(e.codecRefresh);e.codecRefresh=-1}if(e.dashPlayer){D(e);e.dashPlayer.reset();e.dashPlayer=null}u(e);for(var t in e.timersClearedOnReset)e.timersClearedOnReset.hasOwnProperty[t]&&clearTimeout(e.timersClearedOnReset[t]);y(e);e.qualityLimits=null},setup:function(){var e=this;e.slowDownloadCount={video:0,audio:0};e.bitrate={video:{rate:0,index:0/0},audio:{rate:0,index:0/0}};e.bufferLevel={};e.streamingBitrate={video:{rate:0,index:0/0},audio:{rate:0,index:0/0}};e.streamFragmentErrorSent=!1;e.eventsInitialised=!1;e.canDispatchFragmentWarning=!0;e.isLiveWebcast=!1;e.initialBitrate={};e.timersClearedOnReset={};e.errorHandler=function(){}},errorSettingUp:function(){var e=this;if(e.connections&&e.connections.length){e.errorHandler(e.player,SMPError.DASH_INIT_TIMEOUT);e.mediaItem=null}},getHttpRequests:function(e){if(!this.player||!this.dashPlayer)return[];var t=this.dashPlayer,i=t.getDashMetrics(),n=t.getMetricsFor(e);return i.getHttpRequests(n)},create:function(){},refreshManifest:function(e){var t=this,i=t.dashPlayer;if(i&&"function"==typeof i.refreshManifest){i.refreshManifest();e&&!t.manifestRefreshCallback&&(t.manifestRefreshCallback=e)}},setMediaElement:function(e){var t=this;t.mediaElement=e;if(t.dashPlayer){t.dashPlayer.attachView(t.mediaElement);t.dashPlayer.updatePortalSize()}},setInitialBitrate:function(e){var t=this;isNaN(e.audio)||(t.initialBitrate.audio=e.audio);isNaN(e.video)||(t.initialBitrate.video=e.video)},setErrorHandler:function(e){var t=this;t.errorHandler=e},delayedErrorHandler:function(e,t,i,n,a){var r=this;r.errorHandler(e,t,i,n,a,!0)},getBitrateListFor:function(e){var t=this,i=t.dashPlayer.getActiveStream();return i.getBitrateListFor(e)},dashFailoversRemaining:function(){var e=this;if(!e.connections)return 0;var t=e.connections.filter(function(e){return(e.supplier+"").indexOf("bidi")>=0});return e.connections.length-t.length},detachView:function(){var e=this;e.dashPlayer.detachView()},reattachView:function(){var e=this;e.dashPlayer.reattachView(e.mediaElement)}};return X}(),RDotReporting=function(){function e(e){var t=(e.config.mediatorHref+"").match(/mediaset\/([^\/]+)\//);return t?t[1]:"-"}function t(t,i){l++;var n=[];n.push(t?r.replace(/e$/,t):r);n.push("av");n.push("0");n.push("-");n.push("smpj");n.push("1.2.1");n.push(d?"smphtml5":"smphtml5offline");n.push(o);n.push(c.ID);n.push(l);n.push(encodeURIComponent(a.config.counterName));var s=a.mediaConnection||{},u=s.supplier||"-",p=s.format||"-";n.push(u);n.push(p);n.push(a.elType);var f=a.mediaItem,m=f?a.mediaItem.live?"live":"ondemand":"-";n.push(m);n.push(e(a));var g=a.mediaItem?a.mediaItem.identifier:"-";n.push(g?g:"-");i||(n=n.concat(a.qos.getInfoData()));return n}function i(e){for(var i=t(),n=0;e.length>n;n++){var a=e[n];"object"==typeof a&&(a=JSON.stringify(a));i.push(encodeURIComponent(a))}return i.join("/")}function n(e){var t=new Image;t.src=e}var a,r="//r.bbci.co.uk/e",o="",s=/\W+/gim,l=0,u={_1061:97},c=function(){};c.params={};c.init=function(e,t){c.params={};a=e;c.ID=Utils.UUID();o=e.build;t&&""!==t&&(r=t.replace(/\/*$/g,""))};c.playlistLoading=function(){c.ID=Utils.UUID()};var d=0!==(location.href+"").indexOf("file:");c.trackQOSInfo=function(e,i){if(a.config.enableRdotReporting&&e){var r=t("i");r.push(i);r.push(e);n(r.join("/"))}};c.trackPlayIntent=function(){if(a.config.enableRdotReporting){var e=t("p",!0);n(e.join("/"))}};c.trackPlaySuccess=function(){if(a.config.enableRdotReporting){var e=t("ps",!0);e.push(a.mediaItem.mediationTime?a.qos.player.mediaItem.mediationTime.toFixed(0):"~");e.push(a.qos.startupTime?a.qos.startupTime.toFixed(0):"~");n(e.join("/"))}};c.trackError=function(e){if(a.config.enableRdotReporting){isNaN(u["_"+e.code])&&(u["_"+e.code]=0);if(u["_"+e.code]++>=100)return;var t=[e.code+""],r=(e.severity+"").substring(0,1);e.extra&&"string"==typeof e.extra&&(r+=0===e.extra.indexOf("file:")?"~"+e.extra.substring(e.extra.lastIndexOf("/")).replace(s,"~"):"~"+e.extra.replace(s,"~"));t.push(r);var o=i(t);n(o);return o}};return c}(),SWF=function(){function e(e){return{currentTime:{get:function(){return e._currentTime},set:function(t){e._currentTime=t;e.call("currentTime",t)}},volume:{get:function(){return e.player.volume},set:function(t){e.call("volume",t);e.player.dispatch({type:"volumechange",volume:e.player._volume,muted:e.player._muted})}},muted:{get:function(){return e.player.muted},set:function(t){e.call("muted",t);e.player.dispatch({type:"volumechange",volume:e.player._volume,muted:e.player._muted})}},mediaConnection:{get:function(){return e._mediaConnection?e._mediaConnection:{format:"swf"}}},failed:{get:function(){return e._failed},set:function(t){if(!e.killed){e._failed=t;e.needToPause=!1;e.playOnInitialised=!1;Utils.delayedErrorFunction(e.player,e._failed,e._extraFailed)}}}}}function t(e,t){return{holdingImageURL:t,simulcast:!0,items:[{kind:"audio"==e.type?"radioProgramme":"programme",live:e.live,vpid:e.identifier,samltoken:e.samltoken,ceiling:e.ceiling}]}}function i(e,i){var n={},a=e.player.config;n.noTracking=!0;n.forceConnectionSupplier=a.mediator.fck;n.quality=a.quality;n.autoPlay=!e.noAutoplayBlocked;n.loop=a.loop;n.maintainTheLock=a.maintainTheLock;n.mediationUrl=a.mediatorHref.replace("/format/json/jsfunc/{callback}","/format/xml");n.samlMediationUrl=a.samlMediatorHref.replace("/format/json/jsfunc/{callback}","/format/xml");n.startTime=a.startTime;n.counterName=a.counterName;n.rdotname="smphtmlflash";n.rdotsessionid=RDotReporting.ID;n.embedPageURL=a.embedPageURL;e.player.waitingForStartTime=0;e._currentTime=a.startTime;e._needToSendPlay=!0;if(i.fallbackPlaylist){n.playlistUrl=i.fallbackPlaylist;e.call("setPlaylistOptions",n)}else{var r=t(i,e.player.ui.getBackgroundImageUrl());e.call("setPlaylistObject",{playlist:r,options:n})}}function n(e){var t=0;return function(i,n){if(i==c){var r=!1;if(!e.seenEvent){e.seenEvent=!0;r=!0}if(e._swf){if(r){var o=0;try{var s=e._swf.GetVariable("$version");o=parseInt(s.split(" ")[1],10)}catch(l){}if(d>o){e._extraFailed="version_"+o;e.failed=SMPError.FLASH_NOT_INITIALISED}}var f=n.data||{};for(var m in f)if("type"!=m){n[m]=f[m];"currentDuration"==m&&(n.duration=f[m])}switch(n.type){case"initialised":e.initialised();return;case"mediaItemChanged":e.edgeOkay=!0;e.noAutoplayBlocked=!1;clearTimeout(e.edgeReplay);e.player.mediaItem.subtitleConnections=[];if(n.captions&&n.captions.length>0){for(var g=0;n.captions.length>g;g++){var h=n.captions[g];e.player.mediaItem.subtitleConnections.push(new SubtitlesItem(h.href,h.protocol,h.identifier))}LoadBalancing.sortSubtitleConnections(e.player.mediaItem);e.player.dispatch({type:"mediaItemInfoChanged"})}return;case"error":2009==n.code&&e.call("stop");"critical"==n.severity&&(1039==n.code?Utils.delayedErrorFunction(e.player,SMPError.CANNOT_MAINTAIN_LOCK,1039):Utils.delayedErrorFunction(e.player,SMPError.FLASH_CRITICAL_ERROR,n.code+""));return;case"playlistLoaded":if(Device.edge&&!e.edgeOkay&&!e.noAutoplayBlocked){clearTimeout(e.edgeReplay);e.edgeReplay=setTimeout(function(){e.noAutoplayBlocked=!0;e.ready=!1;e._swf=null;document.getElementById(u).innerHTML="";e.playItem(e.player.mediaItem)},p)}e.playlistLoaded=!0;e.applyQuality();return;case"playlistLoading":case"playlistEnded":case"uiinfo":case"showCta":case"tryingToPlay":case"screenReaderAlert":case"abort":case"uiactive":case"volumechange":return;case"pause":e.paused=!0;break;case"ended":e.paused=!0;e.ended=!0;break;case"playing":if(e._needToSendPlay){e._needToSendPlay=!1;e.player.dispatch({type:"play"})}if(e.ended){e._currentTime=0;e.ended=!1;e.player.dispatch({type:"timeupdate"})}e.paused=!1;break;case"timeupdate":e.timeupdateCount++;3==e.timeupdateCount&&e.disableMouseUIBypass();e._currentTime=n.currentTime;if(e.duration!=n.duration){e.duration=n.duration;e.player.dispatch({type:"durationchange",duration:e.duration})}e.currentTimeInfo=n;break;case"info":n.currentBitsPerSecond=e.mediaConnection.bitrate;break;case"loadedmetadata":e._mediaConnection={bitrate:n.bitrate,supplier:n.cdn,format:n.transferFormat};e.videoWidth=n.width;e.videoHeight=n.height;e.player.dispatch({type:"changingsrc",supplier:n.cdn,encoding:n.videoCodec||n.audioCodec||"unknown",format:n.transferFormat})}e.player.dispatch(n)}else if(t++<20)setTimeout(a(i,n),100);else{e._extraFailed="repeat";e.failed=SMPError.FLASH_NOT_INITIALISED}}}}function a(e,t){return function(){window.embeddedMedia.handle(e,t)}}function r(e,t){window.embeddedMedia={handle:n(e),swf:e};var i=e.player.config,a={domId:c,jsCallbackMethod:"window.embeddedMedia.handle",isBSTime:i.isBSTime,noTracking:!0,bumpVersion:"no-bump",customRdotBaseURL:i.customRdotBaseURL,enableRdotReporting:i.enableRdotReporting,maintainTheLock:i.maintainTheLock};e._swf=o(e,u,t,a,i.swfUrl);setTimeout(function(){if(!e.seenEvent){e._extraFailed="noeventtimeout";e.failed=SMPError.FLASH_NOT_INITIALISED}},1e4);e.enableMouseUIBypass()}function o(e,t,i,n,a){var r={quality:"high",bgcolor:"000000",allowFullScreen:!1,allowScriptAccess:"always",wmode:"opaque"};for(var o in n)if(n.hasOwnProperty(o)){var l=encodeURIComponent(o),u=encodeURIComponent(n[o]);r.flashvars?r.flashvars+="&"+l+"="+u:r.flashvars=l+"="+u}var c=document.createElement("object");for(var d in r)r.hasOwnProperty(d)&&"movie"!==d.toLowerCase()&&c.appendChild(s(d,r[d]));c.setAttribute("type","application/x-shockwave-flash");c.setAttribute("data",a);c.setAttribute("id",t);c.setAttribute("height","100%");c.setAttribute("width","100%");if(i.parentNode){var p=Utils.getOffset(e.player.mediaContainer,"height");264>p&&i.parentNode.setAttribute("style","position: relative; z-index: 999;");i.parentNode.replaceChild(c,i)}return c}function s(e,t){var i=document.createElement("param");i.setAttribute("name",e);i.setAttribute("value",t);return i}var l,u="p_swfcontainer",c="htmlSWFPlayer",d=22,p=1e4,f={controls:{enabled:!1},errorDialog:{enabled:!1},buffer:{enabled:!1},cta:{visiblyHidden:!0},fullscreen:{enabled:!1,dblclick:!1},poster:{enabled:!0},guidance:{pinRequired:!1},hideDefaultErrors:!0},m=function(t){var i=this;i.player=t;i.style={};i.timeupdateCount=0;Utils.defineProperties(i,e(i))};m.prototype={playItem:function(e){var t=this;t.killed=!1;t.needToPause=!1;t.playOnInitialised=!1;if(t.ready)i(t,e);else{t.playOnInitialised=!0;if(t._swf)t.failed&&Utils.delayedErrorFunction(t.player,t.failed);else{var n=document.createElement("div");n.id=u+"_player";document.getElementById(u).appendChild(n);r(t,n)}}t.show()},stop:function(){var e=this;e.playOnInitialised=!1;e.needToPause=!1},hide:function(){Utils.className(document.body,"flashHidden")},show:function(){Utils.className(document.body,"","flashHidden")},call:function(e,t){var i=this;i._swf&&i._swf.call&&i._swf.call(e,t)},initialised:function(){var e=this;e.call("setUIOptions",f);e.call("volume",e.player.volume);e.call("muted",e.player.muted);e.ready=!0;e.applyQuality();if(e.playOnInitialised){e.playOnInitialised=!1;i(e,e.player.mediaItem);if(e.needToPause){e.needToPause=!1;e.call("pause")}}},load:function(){},kill:function(){var e=this;e.stop();e.call("stop");e.hide();e.duration=void 0;e.killed=!0;e.playlistLoaded=!1},play:function(){var e=this;if(e.playOnInitialised)e.needToPause=!1;else{e.show();e.player.dispatch({type:"play"});e.call("play")}},pause:function(){var e=this;e.playOnInitialised?e.needToPause=!0:e.call("pause")},enableMouseUIBypass:function(){var e=this;e.timeupdateCount=0;if(Device.edge){l=function(){e._swf.removeEventListener("mouseup",l);e.play()};e._swf.addEventListener("mouseup",l)}if(Device.edge||window.chrome){e._swf.style.pointerEvents="auto";Utils.deleteCssRules(e.player.ui.stylesheet,["notInteractiveContent"]);e.player.ui.stylesheet.insertRule(".notInteractiveContent { pointer-events:none; }",0)}},disableMouseUIBypass:function(){var e=this;e._swf.style.pointerEvents="none";e._swf.parentNode.removeAttribute("style");Utils.deleteCssRules(e.player.ui.stylesheet,["notInteractiveContent"]);l&&e._swf.removeEventListener("mouseup",l)},applyQuality:function(){var e=this;if(e.playlistLoaded){var t=e.player.quality||new Quality;e.call("updateQuality",{quality:"hd",limitQuality:100*t.getVideoRatio()})}}};return m}(),MediaSessionApi=function(){function e(e){return{playing:function(){e.alreadySetFromPlayback||e.setMetadata(e.player.playlist)},mediaItemInfoChanged:function(){e.alreadySetFromPlayback=!1},setMediaSessionAPIdata:function(t){e.setMetadata(t.data)},mediaItemChanged:function(){if(e.player.ui.config.controls.includeNextButton){var t=navigator.mediaSession;e.player.hasNext?t.setActionHandler("nexttrack",function(){e.player.next();e.player.trackAction("nextTrack_mediaSessionApi","nextTrack")}):t.setActionHandler("nexttrack",null)}},timeupdate:function(){if(e.player.ui.config.controls.includePreviousButton){var t=navigator.mediaSession;e.player.time>=5?t.setActionHandler("previoustrack",function(){e.player.time=0;e.player.trackAction("previoustrack_mediaSessionApi","backToStart")}):5>e.player.time&&!e.player.hasPrevious?t.setActionHandler("previoustrack",null):t.setActionHandler("previoustrack",function(){e.player.previous();e.player.trackAction("previoustrack_mediaSessionApi","previousTrack")})}}}}var t=function(t){var i=this;i.player=t;i.alreadySetFromPlayback=!1;i.eventCallbacks=e(i);return i};t.prototype={isSupported:function(){var e=this,t=window.navigator&&navigator.mediaSession&&navigator.mediaSession.setActionHandler,i=e.player.ui.config.mediaSessionAPI.enabled;return t&&i},setMetadata:function(e){var t=this,i=window.MediaMetadata;if(t.isSupported()||!i){var n=navigator.mediaSession;t.alreadySetFromPlayback=!0;t.title=e.title||"";t.posterURL=e.posterImg||"";t.artist=e.artist||"";t.album=e.album||"";""!==t.posterURL&&(t.posterURL=Utils.doChef(t.posterURL,t.player.ui.container,t.player.ui.config.poster));n.metadata=new i({title:t.title,artist:t.artist,album:t.album,artwork:[{src:t.posterURL,sizes:"512x512",type:"image/jpg"}]});t.setControls()}},setControls:function(){var e=this,t=e.calculateSkipTime(),i=navigator.mediaSession;i.setActionHandler("seekforward",function(){e.player.time=e.player.time+t;e.player.trackAction("seekforward_mediaSessionApi","seekforward")});i.setActionHandler("seekbackward",function(){e.player.time=e.player.time-t;e.player.trackAction("seekbackward_mediaSessionApi","seekbackward")});i.setActionHandler("play",function(){e.player.mediaPlayer.play();e.player.trackAction("play_mediaSessionApi","play")});i.setActionHandler("pause",function(){e.player.mediaPlayer.pause();e.player.trackAction("pause_mediaSessionApi","pause")})},calculateSkipTime:function(){var e,t=this,i=t.player.duration;e=t.player.isLive?20:3*i/100;(0===e||isNaN(e))&&(e=10);return e}};t.isSupported=window.navigator&&navigator.mediaSession&&navigator.mediaSession.setActionHandler;return t}(),Player=function(){function e(){if(window.navigator&&navigator.plugins)for(var e=0;navigator.plugins.length>e;e++)if("Shockwave Flash"==navigator.plugins[e].name)return!0;return!1}function t(e){var t=new RegExp("^((http[s]{0,1}):)?//([^\\?\\&#:/]*)","gi");if(t.test(e)){var i=RegExp.$3;if(i){var n=document.createElement("link");n.rel="dns-prefetch";n.href="https://"+i;document.head.appendChild(n)}}}function i(e){var t=e.mediaPlayer.play();if(t&&t.then){e.discardPromise=!1;t.then(function(){e.playCalled=!1},function(){if(e.tryingToPlay&&!e.discardPromise)if(e.mediaItem.live){e.stop();e.mediaItem.subtitleConnections=[];e.Subtitles.clearSubtitles()}else{e.dispatch({type:"pause"});e.playCalled=!1;e._state="";e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.ui.resetGuidance();e.dispatch({type:"notPlayingState"});e.ui.showCta();e.ui.showPoster();e.ui.hideAllControls()}})}}function n(e,t,i){if(e.els[t]&&e.els[t].parentNode){i&&e.els[t].pause();e.els[t].style.left=HIDDEN_PLAYER}e.swf.hide();i&&e.swf.pause();e.threeSixty.hideCanvas();e.Subtitles&&e.Subtitles.clearSubtitles()}function a(e,t,i){if(i){if(G[e.uid])for(var n=0;G[e.uid].length>n;n++)G[e.uid][n](t)}else r(e).apply(e,[t])}function r(e){var t=e.uid;W[t]||(W[t]={});if(!W[t].func){var i=function(i){var n=I(i.target,e);i._=e;i._queuedActions=i._queuedActions||[];var a=i.type||"unknown";if("unknown"===n||!e.outOfControl||"webkitendfullscreen"==a||"volumechange"==a){var r=[];W[t].callbacks&&(r=W[t].callbacks);var o=e.waitingForChange[n]||"unknown"!=n&&(n!=e.elType||Utils.eventFieldData[a]&&y(e));o=o||e.failingOver&&"error"!=i.type&&"waiting"!=i.type&&"loadedmetadata"!=i.type&&"canplay"!=i.type&&"beforeErrorDisplay"!=i.type;o=o||"timeupdate"==a&&(!e.isPlaying360&&e.mediaPlayer.style.left==HIDDEN_PLAYER||e.isPlaying360&&!e.threeSixty.showingCanvas);("volumechange"==a||"SonarUserActionEvent"==a||"SonarErrorEvent"==a||"changingsrc"==a)&&(o=!1);i.unwanted=o;if(e.playbackMightRestartLater[n]&&"play"==a){e.willAutoplayWhenPlayCalled[n]=!0;e.autoplayTimeoutRetryAttempted=!1;e.mediaItemIndex=0;e.tryingToPlay=!0;o=!1;e.playbackMightRestartLater={};Utils.delayedErrorFunction(e,SMPError.PLAYING_STARTED_AFTER_NO_INTENT)}for(var s=r.length,l=0;s>l;l++){var u=r[l]||{};if(!("function"!=typeof u[a]||u.blockUnwanted&&o)){var c=u[a](i);c&&(i=c)}}var d=i._queuedActions;delete i._queuedActions;if(o);else{i=Utils.annotateEvent(i,e);if(G[e.uid])for(l=0;G[t].length>l;l++)G[t][l](i);e.jsapiFunc(i)}e.lastEventType=a;if(d)for(l=0;d.length>l;l++)d[l]()}};W[t].func=i}return W[t].func}function o(e,t,i){for(var n in t)t.hasOwnProperty(n)&&e.addEventListener(n,i)}function s(e,t){var i=function(t){e.ignoringFullscreenChanges||(Device.isBrowserFullscreen(t)?e.maximise(!0):e.minimise(!0))};e.addedFullscreenListener=!0;Device.bindToFullscreenChange(document,i);if(t&&!Device.fullscreenEnabled(document)){console.log("XXX can't take the iframe fullscreen so disabling button");e.config.ui.fullscreen={enabled:!1,dblclick:!1}}try{Device.bindToFullscreenChange(top.document,i);e.addedFullscreenListenerTop=!0}catch(n){}}function l(e){e.preventDefault()}function u(e,t){if(!e.willAutoplayWhenPlayCalled[t]){var i=e.els[t],n=i.src;if(!n){e.waitingForChange[t]=!0;i.src=F[t];i.load&&i.load()}Device.requiresFakePlayEvent&&i.play();e.willAutoplayWhenPlayCalled[t]=!0}}function c(e){e.pushMediaEventFunctions(V);var t=e.config.experimentalDashPercentage;D=!isNaN(t)&&t>0&&1>t?Math.random()<t:!1;e.config._demiIsUK===!0&&(M=".u");e.config._demiIsUK===!1&&(M=".r");Device.init(navigator.userAgent,e.config.supportHls);if(e.config.allowFakeFullscreenScroll&&Device.allowFakeFullscreenScroll){document.body.style.position="fixed";document.body.style.width="100%";document.body.style.height="100%"}var i=new IStats(e);RDotReporting.init(e,e.config.customRdotBaseURL);e.qos=new QOS(e);var n=new Subtitles(e);e.Subtitles=n;e.Chromecast=new Chromecast(e);if("audio"==e.config.ui.skin){e.ui=new AudioUI(e,e.config.ui);Utils.className(document.body,"audioUI")}else{e.ui=new UI(e,e.config.ui);Utils.className(document.body,"classicUI")}e.thumbScrub=new ThumbnailScrub(e);e.timeHelper=new TimeHelper(e);Language.init(e.ui.config.locale,function(){SMPError.init();e.dispatch({type:"languageUpdated"})});SMPError.init();e.ui.initialise();e.config.threeSixty&&e.threeSixty.create(function(){});PluginManager.init(e);e.api=new API(e);e.dashEvents={create:function(){e.dashEvents=new DashEvents(e,D,Utils.callErrorFunction)},updatePortalSize:function(){},reset:function(){},resetSrc:function(){},applyQuality:function(){}};var a=[e.qos.eventCallbacks].concat(e.ui.eventArray).concat([n.eventCallbacks,i.eventCallbacks,DebugConsole.eventCallbacks,e.Chromecast.eventCallbacks,e.threeSixtyEventCallbacks]);if(e.ui.config.subtitles.useNarrative){var s=new NarrSubtitles(e);a.push(s.eventCallbacks)}if(MediaSessionApi.isSupported){var l=new MediaSessionApi(e);a.push(l.eventCallbacks)}for(var u=0;a.length>u;u++)e.pushMediaEventFunctions(a[u]);var c=r(e);o(e.els.video,Utils.eventFieldData,c);o(e.els.audio,Utils.eventFieldData,c);o(e.els[360],Utils.eventFieldData,c);e.elType="unknown";var p=0===(location.href+"").indexOf("file:");e.willAutoplayWhenPlayCalled={video:p,audio:p,360:p};var f,m=window.innerHeight,g=window.innerWidth;Utils.multiAddEventListener(window,"resize orientationchange",function(){var t=function(){m=window.innerHeight;g=window.innerWidth;e.fixSize(!e.isFullScreen)};clearTimeout(f);Math.abs(m-window.innerHeight)<3&&Math.abs(g-window.innerWidth)<3?f=setTimeout(t,100):t()});Utils.multiAddEventListener(window,"online offline",function(){Utils.setOrUnsetClass(document.body,"offline",!navigator.onLine)});e.els.video.addEventListener("loadedmetadata",function(){e.ui.displayCover()});e.onlineDetected=function(){e.endOnlineDetection();(new Date).valueOf()-e.onlineDetectionStart>1e3*e.config.hibernationTime?e.stop():LoadBalancing.switchMediaConnection(e,!1,!0)};e.startOnlineDetection=function(){e.onlineDetectionStart=(new Date).valueOf();clearTimeout(e.offlineTimeout);window.addEventListener("online",e.onlineDetected);e.offlineTimeout=setTimeout(function(){e.endOnlineDetection();Utils.delayedErrorFunction(e,SMPError.NETWORK_UNAVAILABLE)},e.config.offlineAllowanceDelay)};e.endOnlineDetection=function(){clearTimeout(e.offlineTimeout);window.removeEventListener("online",e.onlineDetected)};xd.on("jsapi",d(e))}function d(e){return function(t){if("undefined"!=typeof t.call){var i=t.call;if("undefined"!=typeof t.params)var n=t.params;else n=[];n instanceof Array||(n=[n]);if("function"==typeof e.api[i]){n.push(!0);e.api[i].apply(e.api,n);return}if("function"==typeof e[i]){e[i].apply(e,n);return}}}}function p(e,t){Utils.asyncDelay(function(){t.mediationAttempted=!1;t.mediationRequested=!1;LoadBalancing.mediate(t,e.consideredMobileConnection,m(e))})}function f(e){e.swf.fake&&(e.swf=new SWF(e));e.els.video.style.left=HIDDEN_PLAYER_SWF;e.els.audio.style.left=HIDDEN_PLAYER_SWF;e.els[360].style.left=HIDDEN_PLAYER_SWF;e.mediaPlayer=e.swf;e.swf.playItem(e.mediaItem)}function m(e,t){var i=function(t){e.dispatch({type:"mediaItemInfoChanged"});if("360"==t.kind){if(!e.config.deviceSupports360){Utils.delayedErrorFunction(e,SMPError.DEVICE_NOT_SUPPORTED);return}if(e.threeSixty.fake&&!e.threeSixty.failed){e.elType="360";e.selectMediaPlayer("360");e.mediaPlayer.autoplay=!0;e.threeSixty.create(function(){T(e)});return}}T(e)};return t?function(t){e.mediaItem!==t?h(t,e.mediaItem)&&v(e,t):i(t)}:function(t){e.mediaItem==t&&i(t)}}function g(e,t){if(e.playlist.items.length>e.mediaItemIndex+1){var i=e.playlist.getNextItem(e.mediaItemIndex);i&&!i.mediationAttempted&&LoadBalancing.mediate(i,e.consideredMobileConnection,m(e,t))}else if(e.playlist.queuedPlaylist&&e.playlist.queuedPlaylist.items&&e.playlist.queuedPlaylist.items[0]&&"advert"!==e.playlist.queuedPlaylist.items[0].kind){var n=e.playlist.createMediaItem(e.playlist.queuedPlaylist,0,e.config);if(!n.mediationAttempted){e.playlist.queuedPlaylist.items[0].createdItem=n;LoadBalancing.mediate(n,e.consideredMobileConnection,m(e,t))}}}function h(e,t){if(e&&e.connections.length>0&&!e.noPreload){if(!t||t.type!=e.type)return!1;var i=LoadBalancing.filter(e);if(i&&"dash"===e.connections[0].format)return!0}return!1}function y(e){var t=I(e.mediaPlayer,e),i=e.mediaPlayer.src.split("//");return 2==i.length?"//"+i[1]===F[t]:!1}function v(e,t){if(e.duration>0&&!y(e)&&!e.preloadDashEvents)if(e.ended||H>=e.duration-e.time)P(e,t);else if(!e.preloadCallback){var i=Math.max(e.duration-H,.1);e.preloadCallback=e.timeHelper.setPlaybackTimeout(P.bind(null,e,t),i,!0)}}function b(e,t){var i=SMPError.getError(t);if(("critical"===i.severity||"error"===i.severity)&&e.preloadDashEvents){e.preloadDashEvents.reset();e.preloadDashEvents=null}e.preloadStoredErrors||(e.preloadStoredErrors=[]);e.preloadStoredErrors.push(i)}function C(e){return e?e.reduce(function(e,t){return e.bitrate>t.bitrate?e:t}):0/0}function E(e){var t=C(e.dashEvents.getBitrateListFor("video")),i=C(e.dashEvents.getBitrateListFor("audio")),n=e.dashEvents.streamingBitrate.video.rate,a=e.dashEvents.streamingBitrate.audio.rate;return{video:t.bitrate!==n&&0!==n?n:0/0,audio:i.bitrate!==a&&0!==a?a:0/0}}function P(e,t){e.preloadCallback=null;var i=new DashEvents(e,D,b);e.preloadDashEvents=i;i.setSrc(t.connections);e.isPlayingDash&&i.setInitialBitrate(E(e))}function T(t){var i=t.mediaItem;Device.filterDash=t.playlist&&t.playlist.hasAds&&PluginManager.pluginArray.length&&!Device.supportsMultipleMediaElements;t.quality||(t.quality=new Quality(t.config.quality,t.mediaItem));var n=LoadBalancing.filter(i);if(n){var a=i.connections[0];if(a)if(t.config.preferVideoInFlash&&("video"==i.type||!Device.supportsAudioDash&&!Device.supportsHls)&&t.supportFallbackPrefer&&e())t.fallbackAsAppropriate();else if("video"==i.type&&t.config.playVideoExternally){t.waitingForChange.video=!1;t.tryingToPlay&&t.requestGuidanceAndPlay()}else{k(t,i.type)&&(t.mediaPlayer.currentSrc!==a.href?t.mediaSrc(a.href):t.mediaPlayer.load());t.failedOver=!1;t.timeHelper.reset();t.clearFakeTimer();t.mediaPlayer.loop=t.config.loop;t.mediaPlayer.title=t.playlist.title;Utils.asyncDelay(g,[t,!t.config.disablePreload])}else Utils.checkNotAvailableReason(t,i)&&p(t,i)}else Utils.checkNotAvailableReason(t,i)&&p(t,i)}function S(e,t){if(e.playlist.queuedPlaylist){var i={autoplay:t};if(e.playlist.queuedOptions){i=e.playlist.queuedOptions;i.autoplay=t}e.resetStatsObject();e.updateConfig(i);e.loadPlaylist(e.playlist.queuedPlaylist,!0,!0);i.webcastData&&e.api.setData({name:"SMP.webcastData",data:i.webcastData})}}function _(e,t){if(e.playlist.previousPlaylist){var i={autoplay:t};if(e.playlist.previousOptions){i=e.playlist.previousOptions;i.autoplay=t}e.resetStatsObject();e.updateConfig(i);e.loadPlaylist(e.playlist.previousPlaylist,!0,!0)}}function I(e,t){return e==t.els.video?"video":e==t.els.audio?"audio":e==t.els[360]?"360":"unknown"}function k(e,t){"unknown"===e.elType&&(e.elType=e.mediaPlayer.localName||"unknown");if(t!=e.elType&&e.autoPlayNextItem&&!e.willAutoplayWhenPlayCalled[t]&&!Device.supportsAutoplay){e.autoPlayNextItem=!1;e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.mediaItemIndex=-1;e.dispatch({type:"resetUiToPlaylistLoaded"});return!1}e.elType=t;e.mediaPlayer.autoplay=!1;e.mediaPlayer.loop=!1;if("audio"===t||"video"===t||"360"===t){e.selectMediaPlayer(t);e.mediaPlayer.autoplay=!Device.supportsAutoplay;return!0}e.tryingToPlay=!1;e.autoPlayNextItem=!1;n(e,"audio");n(e,"video");Utils.delayedErrorFunction(e,SMPError.CONTENT_NOT_AV);return!1}function w(e,t,i,n){var r,o={type:"playlistLoaded",url:t,fromQueue:n},s=function(){!r.embedRight&&e.ui&&e.ui.config.embedded.enabled===!0?l(SMPError.getError(SMPError.EMBED_NOT_ALLOWED)):e.loadingPlaylistURL==t&&L(e,o)},l=function(t){r.noItemsReason="ErrorLoadingPlaylist";e.playlist.loading=!1;PluginManager.isPluginLoading(o)||a(e,o);a(e,t)};r=e.playlist=new Playlist(t,s,l,i,e.config);e.mediationIndex=0}function A(e,t){if(e.playlist){var i=e.playlist.items[e.playlist.firstProgramme];if(i&&"360"==i.kind&&e.config.deviceSupports360&&e.threeSixty.fake&&!e.threeSixty.failed){e.threeSixty.create(function(){A(e,t)});return}}e.state="";e.autoPlayNextItem=!1;e.mediaItemIndex=-1;e.config.autoplay&&e.guidanceOk&&(e.autoPlayNextItem=!0);try{a(e,t)}catch(n){console.error("%cplaylistLoadEvent errored","color:red;background-color:#ccc")}if(!Utils.checkForItemsErrors(e,e.playlist))if(e.autoPlayNextItem){if(!e.tryingToPlay){e.clearFakeTimer();e.tryingToPlay=!0;e.waitingForStartTime=e.config.startTime;e.cueNextMediaItem()}}else if(e.config.autoplay&&e.config.promptGuidanceWhenAutoplay){e.mediaPlayer.autoplay=!1;e.guidanceShow(!1)}}function L(e,t){if(PluginManager.isPluginLoading()){e.config.autoplay||e.ui.showPoster();PluginManager.playlistLoadedEvent=t}else{var i=e.playlist;i.loading=!1;t.playlist=i;Utils.asyncDelay(A,[e,t]);PluginManager.playlistLoadedEvent=null}}function N(e){function t(t,i){return Device.supportPlayerFallback&&!e.config.noFallback&&e.mediaItem&&e.mediaItem[t]&&!e.isPlaying360&&(i||!e.mediaItem.failSilent)}return{state:{get:function(){return e._state},set:function(t){var i=e._state;if(i!==t){e._state=t;if("busy"==i&&""===t&&e.actionFnObjAfterWaiting){var n=e.actionFnObjAfterWaiting;e.actionFnObjAfterWaiting=null;n.fn.apply(e,n.args||[])}}}},mediaItem:{get:function(){return e.playlist&&e.playlist.items?e.playlist.items[e.mediaItemIndex]:null}},isPlaying360:{get:function(){return e.mediaItem&&"360"==e.mediaItem.kind}},isNextItemPlayable:{get:function(){return e.playlist?null!=e.playlist.getNextItem(Math.max(e.mediaItemIndex,0)):!1
}},continueAfterError:{get:function(){if(e.playlist){if(null!=e.playlist.getNextItem(Math.max(e.mediaItemIndex,0)))return!0;if(e.playlist.queuedPlaylist&&e.mediaItem&&e.mediaItem.failSilent)return!0}return!1}},shouldReport:{get:function(){return e.mediaItem&&!e.mediaItem.isIdentOrWarning}},mediaConnection:{get:function(){var t=e.mediaItem;if(t&&t.useFlash)return e.swf.mediaConnection;var i=t&&t.connections?t.connections:[];return i[0]}},isPlayingDash:{get:function(){var t=e.mediaConnection;return t&&"dash"===t.format}},isPlayingHls:{get:function(){var t=e.mediaConnection;return t&&"hls"===t.format}},isPlayingFlash:{get:function(){var t=e.mediaConnection;return t&&("swf"===t.format||"HDS"===t.format)}},time:{get:function(){var t=e.Chromecast,i=parseFloat(e.mediaPlayer.currentTime+e.timeHelper.presentationTimeOffset);i=e.timeHelper.streamTimeToUnixTime(i);t.isCasting&&(i=t.fakeTime);return isNaN(i)?0:i},set:function(t){if(!e.outOfControl&&!e.inErrorState)if(e.mediaItem){if(!e.Chromecast.ccSeek(t)&&e.timeHelper.canSeek()){var i=function(){t=e.timeHelper.checkIfTimeIsAvailable(t);t=e.timeHelper.unixTimeToStreamTime(t);t==e.timeHelper.latestSeek&&(t-=.001);var i=e.mediaPlayer,n=parseFloat(i.currentTime)||0;t-=e.timeHelper.presentationTimeOffset;try{i.currentTime=t}catch(a){try{i.currentTime=n}catch(r){}}e.timeHelper.update(e.time,e.duration);e.timeHelper.forcedTime=null},n=e.timeHelper;if(e.isPlayingDash&&e.dashEvents.isLiveWebcast&&90>n.latestSeek-t&&t>e.mediaPlayer.currentTime){e.timeHelper.forcedTime=n.latestSeek;e.dashEvents.refreshManifest(i)}else i()}}else e.config.startTime=t}},duration:{get:function(){var t=e.mediaItem;if(!t)return 0;var i=e.Chromecast,n=0;n=i.isCasting?i.duration:e.isLive?1/0:parseFloat(e.mediaPlayer.duration);1>n&&(n=e._duration);return isNaN(n)?0:n}},isLive:{get:function(){var t=e.mediaItem;return t?t.live:!1}},isAudio:{get:function(){var t=e.mediaItem;return t?"audio"==t.type:!1}},isThreeSixty:{get:function(){var t=e.mediaItem;return t?"360"==t.type:!1}},playlistHasAudio:{get:function(){var t=[];e.playlist&&e.playlist.items&&(t=e.playlist.items);for(var i=0;t.length>i;i++)if("audio"==t[i].type)return!0;return!1}},buffered:{get:function(){var t=e.timeHelper.presentationTimeOffset,i=e.mediaPlayer,n=i.buffered;if(!n)return 0;for(var a=0;n.length>a;a++){var r=n.start(a)+t,o=n.end(a)+t;if(i.currentTime+t>=r&&o>i.currentTime+t)return o}return 0}},seekable:{get:function(){var t=e.mediaPlayer,i=t.seekable;if(!i)return{start:0,end:0};for(var n=1/0,a=0,r=0;i.length>r;r++){i.start(r)<n&&(n=i.start(r));i.end(r)>a&&(a=i.end(r))}return{start:n,end:a}}},paused:{get:function(){return e.mediaPlayer.paused}},ended:{get:function(){return e.mediaPlayer.ended}},volume:{get:function(){return e._volume},set:function(t){t>1&&(t=1);0>t&&(t=0);if(0===t)e.muted=!0;else if(e._volume!=t){e._volume=t;if(e.mediaPlayer){e.mediaPlayer.volume=e._volume;e.mediaPlayer.muted=!1;e._muted=!1}else{e._volume=t;e._muted=!1;e.dispatch({type:"volumechange",volume:e._volume,muted:e._muted})}}}},muted:{get:function(){return e._muted},set:function(t){if((t===!0||t===!1)&&t!=e._muted){e._muted=t;e.mediaPlayer&&e.willAutoplayWhenPlayCalled[I(e.mediaPlayer,e)]?e.mediaPlayer.muted=e._muted:e.dispatch({type:"volumechange",volume:e._volume,muted:e._muted})}}},guidanceOk:{get:function(){return e.hasGuidancePassed||!e.playlist||""===e.playlist.guidance||!e.ui.config.guidance.pinRequired}},supportFallback:{get:function(){return t("flashAvailable")}},supportFallbackPrefer:{get:function(){return t("flashAvailable",!0)}},supportFallbackLocked:{get:function(){return t("flashAvailableUnlocked")}},version:{get:function(){return"2.23.21.SMPHTML5"}},build:{get:function(){return"2.23.21.3ad43c0"+M+(D?".x":"")}},hasGuidancePassed:{get:function(){var t=e.config.guidance;return(t.guidanceSkipped||t.guidancePINPassed)&&!t.isGuidanceLocked&&(!e.config.under16||e.config.under16&&e.under16permissionConfirmed)}},under16permissionConfirmed:{get:function(){var t=e.config.guidance;return t.under16permissionConfirmed}},consideredMobileConnection:{get:function(){return e.config.mobileNetwork?navigator.connection&&"4g"==navigator.connection.effectiveType?!1:!0:!1}},ratio:{get:function(){var t=e.mediaPlayer.videoHeight/e.mediaPlayer.videoWidth;isNaN(t)&&(t=9/16);return t}},quality:{get:function(){return e._quality},set:function(t){e._quality=t;e.swf.applyQuality();e.dashEvents.applyQuality()}},hasNext:{get:function(){return e.isNextItemPlayable||e.playlist&&e.playlist.queuedPlaylist}},hasPrevious:{get:function(){return null!=e.playlist.getPreviousItemIndex(e.mediaItemIndex)||e.playlist&&e.playlist.previousPlaylist}}}}function O(e,t){var i;try{i=parent.embeddedMedia.playerInstances[e].getHandleJSAPI()}catch(n){i=function(e){xd.fire("jsapi",e)}}t.jsapiFunc=function(e){var t={};for(var n in e){var a=typeof e[n];("object"!=a&&"function"!=a||e.hasOwnProperty(n))&&"_"!=n&&"srcElement"!=n&&"target"!=n&&"currentTarget"!=n&&"path"!=n&&"unwanted"!=n&&(t[n]=e[n])}try{i(t)}catch(r){console.error("%cError calling out to page: "+r.message,"color:red;background-color:#ccc")}}}function x(e){e._state="";e.willAutoplayWhenPlayCalled.video=!1;e.willAutoplayWhenPlayCalled.audio=!1;e.willAutoplayWhenPlayCalled[360]=!1;e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.mediaItemIndex=-1;e.autoplayTimeoutRetryAttempted=!0;Device.requiresFakePlayEvent=!0;e.dispatch({type:"resetUiToPlaylistLoaded"})}var D,M="",R=0,B={video:"//emp.bbci.co.uk/emp/media/blankv2.mp4",360:"//emp.bbci.co.uk/emp/media/blankv2.mp4",audio:"//emp.bbci.co.uk/emp/media/blank.mp3"},U={video:"//emp.bbci.co.uk/emp/media/noise.mp4",360:"//emp.bbci.co.uk/emp/media/noise.mp4",audio:"//emp.bbci.co.uk/emp/media/noise.mp3"},F=B,H=15,q={autoplay:!1,bitrateFloor:{plain:0},bitrateCeiling:{plain:1200},isBSTime:!1,suppressItemKind:[],suppressType:[],embedPageURL:"",mediatorHref:"",samlMediatorHref:"",counterName:"smp.player.page",enableRdotReporting:!0,enableStatsReporting:!0,loop:!1,startTime:0,customRdotBaseURL:"",playVideoExternally:!1,supportLiveRewindOnMobile:!0,offlineAllowanceDelay:6e4,hibernationTime:360,guidance:{isGuidanceLocked:!1,hasGuidancePassword:!1,hasGuidancePIN:!1,guidanceSkipped:!1},ui:{}},W={},G={},V={tryingToPlay:function(e){var t=e._;t.playingState="playing";t.dispatch({type:"playingState"})},play:function(e){var t=e._,i=I(e.target,t);if(!t.waitingForChange[i]){t.playingState="playing";t.dispatch({type:"playingState"})}},notPlayingState:function(e){var t=e._;t.playingState="notplaying"},durationchange:function(e){var t=e._,i=I(e.target,t);if(!t.waitingForChange[i]){var n=t.duration;n>1&&(t._duration=n);t.timeHelper.update(0/0,n)}},canplay:function(e){var t=e._;clearTimeout(t.noCanplayEventTimeout);var n=I(e.target,t);if(t.failingOver){t.failingOver=!1;t.streamFailing=!1}t.needHlsStartTime=!1;if(t.mediaItem){if(!t.waitingForChange[n]&&t.mediaItem){if(t.mediaItem.live&&t.config.supportLiveRewindOnMobile&&t.mediaItem&&t.ui.config.controls.enableLiveRewind&&!t.isPlayingDash)if(Device.useStartDateInHls&&t.mediaPlayer.getStartDate&&t.mediaPlayer.getStartDate()){if(!t.mediaItem._startTime){t.isUsingGetStartDate=!0;t.mediaItem._startTime=new Date(t.mediaPlayer.getStartDate()).valueOf()/1e3;t.timeHelper.setStartTimeAvailable(!0);t.ui.checkIfCanDisplaySeekBar();t.mediaItem.simulcast&&!t.isAudio&&t.ui.config.subtitles&&t.ui.config.subtitles.supportLiveSubtitles&&t.mediaItem.startLiveHLSsubs(t)}}else{t.needHlsStartTime=!0;t.mediaItem.getRewindWindow(function(){t.timeHelper.setStartTimeAvailable(!0);t.ui.checkIfCanDisplaySeekBar()})}if(t.waitingForStartTime&&!t.needHlsStartTime&&(t.timeHelper.startTimeAvailable||!t.mediaItem.live)){t.isPlayingDash||(t.time=t.waitingForStartTime);t.waitingForStartTime=0;t.config.startTime=0}if(Device.supportsAutoplay&&t.mediaPlayer.paused&&!t.playCalled&&t.tryingToPlay){t.playCalled=!0;if(0===t.pauseTimes[0]){t.mediaPlayer.autoplay=!1;t.mediaPlayer.pause();t.pauseTimes.splice(0,1);t.delayedDispatch({type:"playing",fakePlaying:!0,pauseatzero:!0});return}i(t)}}if(!t.autoplayTimeoutRetryAttempted&&!t.config.lowLatencyMode){var a=1e4*(Device.consideredForMobileLiveRewind?2:1),r=function(){if(t.mediaItem)if(t.mediaItem.mediationRequested)t.playingTimer=setTimeout(r,a);else if(t.tryingToPlay&&t.mediaPlayer.paused){if(Device.iPhoneOutOfPagePlayback&&t.mediaPlayer.webkitIsFullscreen){t.playingTimer=setTimeout(r,a);return}Utils.delayedErrorFunction(t,SMPError.PLAYING_FAILED_NO_INTENT);t.playbackMightRestartLater[n]=!0;x(t)}};t.playingTimer=setTimeout(r,a)}}},pause:function(e){var t=e._;t.dispatch({type:"notPlayingState"});e.unwanted||(t.tryingToPlay=!1)},timeupdate:function(e){var t=e._,i=t.time,n=t.duration,a=t.webcastData;t.timeHelper.update(i,n);if(a&&a.accurateEndTime&&t.timeHelper.time>a.accurateEndTime)if(!t.timeHelper.restartedWebcast&&t.timeHelper.joinTime>a.accurateEndTime)t.timeHelper.restartedWebcast=!0;else if(!t.mediaPlayer.paused){t.pause();t.dispatch({type:t.config.ondemandWebcastData?"playlistEnded":"playlistStopped"});t.timeHelper.restartedWebcast=!0}Device.requiresFakeEnded&&n>1&&i>=n&&t.delayedDispatch({type:"ended",fakeEnded:!0});if(!t.paused)for(var r=0;t.pauseTimes.length>r;r++)if(i>=t.pauseTimes[r]&&t.pauseTimes[r]+.33>i){t.mediaPlayer.pause();t.pauseTimes.splice(r,1)}},seeking:function(e){var t=e._,i=t.timeHelper,n=t.mediaPlayer.currentTime+i.presentationTimeOffset;if(t.isPlayingDash&&t.mediaItem&&t.mediaItem.live&&4==t.mediaPlayer.readyState){var a=t.timeHelper.checkIfTimeIsAvailable(n,!0);n!=a&&(t.mediaPlayer.currentTime=a-i.presentationTimeOffset)}else t.timeHelper.update(t.time,t.duration)},seeked:function(e){var t=e._;Device.requiresFakePlayingEventAfterSeekedWhenDash&&t.isPlayingDash&&!t.mediaPlayer.paused&&t.delayedDispatch({type:"playing",fakePlaying:!0})},playing:function(e){var t=e._;t.playingState="playing";t.dispatch({type:"playingState"});t.waiting=!1;t.mediaEnded=!1;t.playCalled=!1;e.fakePlaying||t.isPlayingDash&&t.isAudio&&Device.macSafari&&(t.mediaPlayer.currentTime+=.1);var i=I(e.target,t);t.willAutoplayWhenPlayCalled[i]=!0;t.mediaPlayer.volume=t.volume;t.mediaPlayer.muted=t.muted;t.state="";clearTimeout(t.playingTimer);if(t.waitingForChange[i])e.target.pause();else{t.mediaItem.hasSeenPlaying=!0;t.mediaPlayer.autoplay=!1;if(0===t.pauseTimes[0]){t.mediaPlayer.pause();t.pauseTimes.splice(0,1)}e.pauseatzero&&t.delayedDispatch({type:"pause"});t.mediaItem.useFlash?t.swf.show():"360"==t.mediaItem.kind?t.threeSixty.showCanvas():t.mediaPlayer.style.left="audio"==t.ui.config.skin||"classic"==t.ui.config.skin&&t.ui.miniModeEnabled?HIDDEN_PLAYER_MINIMODE:"0px"}},ended:function(e){var t=e._;t.dispatch({type:"notPlayingState"});if("ended"!=t.lastEventType){t.tryingToPlay=!1;t.discardPromise=!0;if(t.mediaPlayer.ended||e.fakeEnded){var i=t.elType;t.cueNextMediaItem()?t.autoPlayNextItem=i===t.elType:e.fakeEnded&&(t.reloadToStart=!0);n(t,t.elType)}}},fullscreenEnter:function(e){var t=e._;t.config.allowFakeFullscreenScroll&&Device.allowFakeFullscreenScroll||document.documentElement.addEventListener("touchmove",l,{passive:!1});e._.isFullScreen=!0},fullscreenExit:function(e){var t=e._;t.config.allowFakeFullscreenScroll&&Device.allowFakeFullscreenScroll||document.documentElement.removeEventListener("touchmove",l,{passive:!1});e._.isFullScreen=!1},playlistLoading:function(e){var t=e._;t.mediaEnded=!1;t.dispatch({type:"notPlayingState"});t.webcastData=null;t.ui.markerData=[];t.inErrorState=!1;t.threeSixtyLoadingFn=null;RDotReporting.playlistLoading();t.resetAfterOutOfControl=!1;t.timeHelper.reset()},playlistLoaded:function(e){var t=e._;t.timeHelper.reset()},playlistEnded:function(e){var t=e._;t.mediaEnded=!0;if((t.config.noAutomaticNextQueued||!t.queueNextPlaylist(!0))&&t.playlist&&t.mediaItem){t.resettingIndexInPlaylistEnd=!0;Utils.asyncDelay(function(){if(t.resettingIndexInPlaylistEnd&&t.mediaItem.isIdent&&t.playlist.items.length>1){var e=t.playlist.firstProgramme;t.mediaItemIndex=e-1;t.cueNextMediaItem(!0);t.pauseTimes=[0]}})}},playlistStopped:function(e){var t=e._;t.tryingToPlay=!1},playerDisconnected:function(e){var t=e._;t.inErrorState=!1;t.dispatch({type:"notPlayingState"})},waiting:function(e){var t=e._;t.waiting=!0;if(t.endOnWaiting){t.endOnWaiting=!1;t.reloadToStart=!0;t.delayedDispatch({type:"ended",fakeEnded:!0})}if(t.streamFailing){t.streamFailing=!1;t.tryingToPlay=!1;t.autoPlayNextItem=!1;if(t.tryReconnect){t.tryReconnect=!1;navigator.onLine===!1?t.startOnlineDetection():t.onlineDetected()}else Utils.delayedErrorFunction(t,SMPError.LOAD_FAILED_BUFFERING)}},loadedmetadata:function(e){var t=e._,i=I(e.target,t);if(t.playlist&&!t.waitingForChange[i]){var n=t.playlist.items[t.mediaItemIndex+1];n&&!t.config.disablePreload&&h(n,t.mediaItem)&&v(t,n)}},error:function(e){var t,i=e._,n=e.target,a=!1;if(e.handled){if(e.nonPlayer)return;if(e.code!=SMPError.PLAYING_FAILED_NO_INTENT&&e.severity==CRITICAL&&i.continueAfterError){e.severity="error";e.morphed=!0;Utils.asyncDelay(i.cueNextMediaItem,[],i);return}var r=!1,o=!1,s=i.failedOver?SMPError.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER:SMPError.NO_ALTERNATIVE_MEDIA,l=i.mediaConnection?i.mediaConnection.supplier:"";switch(e.code){case SMPError.MPD_GENERIC:case SMPError.MPD_LOAD_FAIL:case SMPError.MPD_PARSE_ERROR:t=!1;a=!!LoadBalancing.getAlternateMediaConnections(i,t,l);r=!a;break;case SMPError.MPD_NO_STREAMS:case SMPError.PLAYING_DASH_WHEN_NOT_SUPPORTED:case SMPError.DASH_EXCEPTION:t=!0;a=!!LoadBalancing.getAlternateMediaConnections(i,t,l);r=!a;if(r&&i.supportFallback){Utils.asyncDelay(i.fallbackAsAppropriate,[],i);r=!1}break;case SMPError.INIT_FRAGMENT_LOAD_FAIL:case SMPError.STREAM_FRAGMENT_LOAD_FAIL:if(!i.streamFailing){var u=i.mediaItem.dashAlternates&&i.dashEvents&&!i.config.disableDashBaseUrlFailover&&i.dashEvents.dashFailoversRemaining()>0,c=i.mediaItem.originalConnections.length>i.dashEvents.connections.length;t=!1;var d=!!LoadBalancing.getAlternateMediaConnections(i,t,l);a=d&&!u;if(navigator.onLine===!1&&(d||c)){o=!0;i.tryReconnect=!0;i.streamFailing=!0;i.onlineDetectionStart=(new Date).valueOf()}else{i.tryReconnect=!1;i.streamFailing=!a}r=i.streamFailing&&(i.mediaPlayer.paused||0===i.mediaPlayer.playbackRate||0===i.buffered);if(r&&o){r=!1;o=!1;i.startOnlineDetection()}s=SMPError.LOAD_FAILED_BUFFERING;i.dashEvents&&(i.dashEvents.manuallyFailingOver=!0)}break;case SMPError.INIT_FRAGMENT_DOWNLOAD_INFORMATION:case SMPError.FRAGMENT_DOWNLOAD_INFORMATION:if(i.dashEvents.removedList){i.mediaItem.connections=i.mediaItem.connections.filter(function(e){return i.dashEvents.removedList.indexOf(e)<0});i.dashEvents.removedList=null}break;case SMPError.NO_ALTERNATIVE_MEDIA:case SMPError.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER:i.tryingToPlay=!1;i.dashEvents.reset();break;case SMPError.LOAD_FAILED_BUFFERING:case SMPError.CONTENT_NOT_AVAILABLE_PRE_START:case SMPError.PLAYING_FAILED_NO_INTENT:case SMPError.PLAYING_STARTED_AFTER_NO_INTENT:case SMPError.FRAGMENT_DOWNLOAD_INFORMATION:case SMPError.UNHANDLED_INTERNAL_ERROR:case SMPError.DOWNLOAD_WAS_SLOW:case SMPError.DASH_INIT_TIMEOUT:case SMPError.DOWNLOADS_OFTEN_SLOW:case SMPError.NO_SUPPORTED_CODECS:case SMPError.NO_SUPPORTED_CODECS_FAILOVER:case SMPError.DASH_MEDIASOURCE_ERROR:case SMPError.NETWORK_UNAVAILABLE:break;default:e.severity==CRITICAL||e.morphed||Utils.delayedErrorFunction(i,SMPError.UNHANDLED_INTERNAL_ERROR,e.code)}if(r){i.tryingToPlay=!1;i.autoPlayNextItem=!1;Utils.delayedErrorFunction(i,s)}if(a&&!o){var p=i.mediaConnection;p&&i.mediaItem.addFailedConnection(p.supplier);e._queuedActions.push(function(){LoadBalancing.switchMediaConnection(i,t)||Utils.delayedErrorFunction(i,SMPError.NO_ALTERNATIVE_MEDIA_AFTER_FAILOVER)})}else if(e.severity==CRITICAL){i.tryingToPlay=!1;i.autoPlayNextItem=!1}}else if(n==i.mediaPlayer){var f=I(n,i);if(e.handled||i.waitingForChange[f]){e.code||(e.code=i.mediaPlayer.error&&i.mediaPlayer.error.code);i.qos.reportError(e);return}var m=i.mediaPlayer.error;if("undefined"==typeof e.code&&!m)return;var g=!0,h="unknown";if(m&&"undefined"!=typeof m.code){e.code=m.code;e.connection=i.mediaConnection;if(m.code==m.MEDIA_ERR_ABORTED){h=SMPError.MEDIA_ERR_ABORTED;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;g=!1}}if(m.code==m.MEDIA_ERR_NETWORK){h=SMPError.MEDIA_ERR_NETWORK;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;g=!1}}if(m.code==m.MEDIA_ERR_DECODE){h=SMPError.FORMAT_NOT_DECODED;t=!1;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;g=!1}else if(Device.fallbackAfterDashDecodeError&&i.isPlayingDash&&i.supportFallback){Utils.asyncDelay(i.fallbackAsAppropriate,[],i);g=!1}}if(m.code==m.MEDIA_ERR_SRC_NOT_SUPPORTED){if(""===i.mediaPlayer.src||i.mediaPlayer.src===window.location.href)return;t=!0;Device.supportsHls&&i.mediaConnection&&"hls"==i.mediaConnection.format&&(t=!1);h=SMPError.FORMAT_NOT_SUITABLE;if(LoadBalancing.getAlternateMediaConnections(i,t)){a=!0;g=!1}}}else{h=SMPError.MEDIA_ERR_WEIRD;g=!1}if(g){if(!i.continueAfterError){i.tryingToPlay=!1;i.autoPlayNextItem=!1}Utils.delayedErrorFunction(i,SMPError.NO_ALTERNATIVE_MEDIA)}"unknown"==h?g&&(h="unknownCritical"):"video"!=f&&(h+=1);var y=new SMPError(h,{connection:e.connection,playerError:m,networkState:i.mediaPlayer.networkState,mediaItem:i.mediaItem});a&&(y._queuedActions=[function(){LoadBalancing.switchMediaConnection(i,t)}]);return y}}},z=0,j=function(){var e=this;e.jsapiFunc=function(){};e.threeSixty={fake:!0,failed:!1,showCompass:function(){},hideCompass:function(){},hideCanvas:function(){},showCanvas:function(){},create:function(t){e.threeSixtyLoadingFn=t;if(!e.threeSixty.loading){var i="/emp/html360Component/1.1.4/html360Component.min.js";e.threeSixty.loading=!0;e.dispatch({type:"loadingThreeSixty"});require([i],function(){clearTimeout(e.threeSixtyTimer);e.threeSixty=new ThreeSixty(e);for(var t in e.threeSixty.eventCallbacks)e.threeSixty.eventCallbacks.hasOwnProperty(t)&&(e.threeSixtyEventCallbacks[t]=e.threeSixty.eventCallbacks[t]);e.threeSixtyLoadingFn()});e.threeSixtyTimer=setTimeout(function(){e.threeSixty.failed=!0;e.threeSixty.loading=!1;Utils.delayedErrorFunction(e,SMPError.THREE_SIXTY_FAILED);e.threeSixtyLoadingFn&&e.threeSixtyLoadingFn()},3e4)}}};e.threeSixtyEventCallbacks={};e.swf={fake:!0,hide:function(){},pause:function(){},kill:function(){},enableMouseUIBypass:function(){},disableMouseUIBypass:function(){},applyQuality:function(){}};e.mediaItemIndex=-1;e._volume=1;e._muted=!1;e.isSeeking=!1;e._state="";e.config=q;e.playlist=null;e.els={};e.pauseTimes=[];e.tryingToPlay=!1;e.isFullScreen=!1;e.waitingForChange={video:!1,360:!1,audio:!1};e.uid="player_"+z++;e.mediaContainer=document.getElementById("mediaContainer");e.mediaPlayer=e.els.video=e.mediaContainer.firstChild;e.els.video.id="p_v_"+e.uid;e.els.video.setAttribute("aria-hidden",!0);e.els.audio=document.createElement("audio");e.els.audio.id="p_a_"+e.uid;e.els.audio.preload="metadata";e.els.audio.setAttribute("aria-hidden",!0);e.els[360]=document.createElement("video");e.els[360].id="p_360_"+e.uid;e.els[360].preload="metadata";e.els[360].setAttribute("crossorigin","anonymous");e.els[360].setAttribute("webkit-playsinline","webkit-playsinline");e.els[360].setAttribute("playsinline","playsinline");e.els[360].setAttribute("aria-hidden",!0);e.els[360].style.left=HIDDEN_PLAYER;e.mediaContainer.insertBefore(e.els[360],e.mediaContainer.firstChild);n(e,"video");e.els.video.addEventListener("click",l,!1);e.els[360].addEventListener("click",l,!1);Utils.defineProperties(e,N(e));return e};j.prototype={init:function(e){var i=e.player.vars,n=e.id,r=this;r.playbackMightRestartLater={};O(n,r);if(!i.bitrateCeiling&&(i.mediatorHref+"").indexOf("/mediaset/pc/")>0){q.bitrateCeiling.plain=1800;r.config.bitrateCeiling.plain=1800}r.updateConfig(i,!0);s(r,i.insideIframe);c(r);t(r.config.mediatorHref);t(r.config.samlMediatorHref);r.firstPlaylist=!0;a(r,{type:"initialised",version:r.version});return r},cueNextMediaItem:function(e){var t=this;t.playbackMightRestartLater={};0>t.mediaItemIndex?t.mediaItemIndex=0:t.mediaItemIndex++;var i=t.mediaItem;if(i){if("advert"==i.kind){t.autoPlayNextItem=!0;return t.cueNextMediaItem()}t.reset(!0);t.delayedDispatch(i.changeEvent);t.thumbScrub.newMediaItem(i);if(!e){t.tryingToPlay=!0;t.delayedDispatch({type:"tryingToPlay"})}t.config.alwaysUseFlashPlayer&&(i.useFlash=!0);if("360"!=i.kind||t.config.deviceSupports360)if(i.useFlash){t.autoPlayNextItem=!e;Utils.asyncDelay(f,[t])}else{if(!i.mediationAttempted){if("ad"==i.kind){t.dispatch({type:"requestAd"});return i}Utils.asyncDelay(LoadBalancing.mediate,[i,t.consideredMobileConnection,m(t)],LoadBalancing);return i}t.autoPlayNextItem=!e;Utils.asyncDelay(m(t),[i])}else Utils.delayedErrorFunction(t,SMPError.DEVICE_NOT_SUPPORTED)}else{t.mediaItemIndex-=1;t.mediaConnection&&t.mediaPlayer.currentSrc==t.mediaConnection.href&&(t.reloadToStart=!0);var n=!(!t.playlist||!t.playlist.queuedPlaylist||t.config.noAutomaticNextQueued);t.delayedDispatch({type:"playlistEnded",willAutomaticPlayQueuedItem:n})}},mediaSrc:function(e){var t=this,n=t.mediaItem.connections[0];a(t,{type:"changingsrc",supplier:n.supplier,encoding:n.encoding,format:n.format});t.streamFailing=!1;if(t.isPlayingDash){if(t.isAudio?Device.supportsAudioDash:Device.supportsVideoDash){if(t.preloadDashEvents){t.dashEvents.reset();t.dashEvents=t.preloadDashEvents;t.preloadDashEvents=null;t.dashEvents.setErrorHandler(Utils.callErrorFunction);t.dashEvents.setMediaElement(t.mediaPlayer)}else{t.dashEvents.create();t.dashEvents.reset();t.dashEvents.setErrorHandler(Utils.callErrorFunction);t.dashEvents.setMediaElement(t.mediaPlayer);t.dashEvents.setSrc(t.mediaItem.connections)}t.dashEvents.applyQuality()}else if(!LoadBalancing.getAlternateMediaConnections(t,!0)){t.tryingToPlay=!1;t.autoPlayNextItem=!1;Utils.callErrorFunction(t,SMPError.PLAYING_DASH_WHEN_NOT_SUPPORTED)}}else{t.dashEvents.resetSrc();var r=I(t.mediaPlayer,t);t.waitingForChange[r]=!1;t.mediaPlayer.src=e;t.mediaPlayer.load();if(Device.cannotDetectAutoplayFailure){var o=2e4;clearTimeout(t.noCanplayEventTimeout);t.noCanplayEventTimeout=setTimeout(function(){x(t)},o)}Device.requiresFakePlayEvent&&i(t);t._duration=0}if(t.preloadStoredErrors){for(var s=0;t.preloadStoredErrors.length>s;s++){var l=t.preloadStoredErrors[s];t.qos.reportError(l)}t.preloadStoredErrors=null}},startPlayback:function(e){var t=this;if(!t.outOfControl&&!t.inErrorState&&!t.tryingToPlay&&!t.Chromecast.setCastPlayState()&&t.playlist){t.clearFakeTimer();t.tryingToPlay=!0;t.playCalled=!1;t.state="busy";var n=t.playlist;!e&&n&&u(t,n.mediaType);t.waitingForStartTime=isNaN(t.config.startTime)?0:t.config.startTime;if(-1==t.mediaItemIndex&&n&&n.items.length>0)t.cueNextMediaItem()&&(t.autoPlayNextItem=!0);else{var a=t.mediaPlayer;if(!t.reloadToStart){Device.requiresRestartAdjustmentAtEnd&&a.currentTime==a.duration&&(a.currentTime=.1);if(t.mediaConnection)i(t);else{t.tryingToPlay=!0;t.autoPlayNextItem=!0;Utils.asyncDelay(T,[t])}return!0}t.reloadToStart=!1;a.load();t.mediaItem&&(t.mediaItem.gotWindow=!1);t.mediaItemIndex=t.mediaItemIndex-1;t.cueNextMediaItem()&&(t.autoPlayNextItem=!0)}}},previous:function(e){var t=this,i=e||!t.ui.inPrePlayState,n=t.playlist.getPreviousItemIndex(t.mediaItemIndex);if(null!=n){t.mediaItemIndex=n-1;t.cueNextMediaItem(!i)}else t.queuePreviousPlaylist(i)},next:function(e){var t=this,i=e||!t.ui.inPrePlayState;if(t.isNextItemPlayable){0>t.mediaItemIndex&&(t.mediaItemIndex=0);t.cueNextMediaItem(!i)}else t.queueNextPlaylist(i)},pause:function(){var e=this;if(!e.Chromecast.setCastPlayState())if("busy"!=e.state)if(e.timeHelper.canSeek()){e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.mediaPlayer.pause();if(e.timeHelper.hasRewindWindow()){e.clearFakeTimer();e.fakeTimeupdateTimer=setInterval(function(){a(e,{type:"timeupdate",fake:!0})},1e3)}}else e.stop();else e.actionFnObjAfterWaiting={fn:e.pause,args:null}},seekToPercent:function(e){var t=this,i=t.timeHelper.percentToTime(e);t.time=i},seekForward:function(e){var t=this;t.time+=e},seekBackward:function(e){var t=this;t.time-=e},suspend:function(){var e=this;if(e.mediaItem)if(e.mediaItem.useFlash&&e.swf.ready)e.swf.call("suspend");else{e.pause();Utils.asyncDelay(e.stop,[],e)}},stop:function(){var e=this;e.tryingToPlay=!1;e.autoPlayNextItem=!1;e.waitingForChange[e.elType]=!1;e.reloadToStart=!0;e.clearFakeTimer();e.timeHelper.reset();e.timeHelper.setStartTimeAvailable(!1);e.destroying?a(e,{type:"playerDestroying"}):a(e,{type:"playerDisconnected"});n(e,e.elType,!0);e.dashEvents.reset()},hidePlayer:function(e,t){var i=this;e||(e=i.elType);n(i,e,t)},toggleFullscreen:function(){var e=this;e.isFullScreen?e.minimise():e.maximise()},selectMediaPlayer:function(e){var t=this;t.mediaPlayer=t.els[e];t.mediaPlayer.volume=t.volume;t.mediaPlayer.muted=t.muted;t.els[e].parentNode||t.mediaContainer.insertBefore(t.els[e],t.mediaContainer.firstChild);"video"!==e&&n(t,"video");"audio"!==e&&n(t,"audio");"360"!==e&&n(t,"360")},maximise:function(e){var t=this;t.ui.enabled=!1;setTimeout(function(){t.ui.enabled=!0},2e3);t.ignoringFullscreenChanges=!0;setTimeout(function(){t.ignoringFullscreenChanges=!1},400);var i=function(){t.pageFullScreenStylesNeeded=!0;a(t,{type:"beforeFullscreenEnter",applyPageFullScreen:t.pageFullScreenStylesNeeded});if(Device.requiresFullscreenResizeDelay){t.mediaContainer.style.height="0px";t.mediaContainer.style.width="0px"}};if(!t.isFullScreen&&t.ui.config.fullscreen.enabled){if(e)a(t,{type:"beforeFullscreenEnter"});else if(Device.fullscreenEnabled(document)){t.pageFullScreenStylesNeeded=Device.requiresPageFullScreenStyles;a(t,{type:"beforeFullscreenEnter",applyPageFullScreen:t.pageFullScreenStylesNeeded});Device.requestFullscreen(document.documentElement);t.iframeFullscreen=!0}else{i();t.addedFullscreenListenerTop&&Device.fullscreenEnabled(top.document)&&Device.requestFullscreen(top.document.documentElement)}a(t,{type:"fullscreenEnter"})}},minimise:function(e){var t=this;if(t.isFullScreen){t.ui.enabled=!1;t.ignoringFullscreenChanges=!0;setTimeout(function(){t.ignoringFullscreenChanges=!1},400);var i=function(){a(t,{type:"beforeFullscreenExit",applyPageFullScreen:t.pageFullScreenStylesNeeded});t.pageFullScreenStylesNeeded=!1;t.els.video.style.height="";t.els.video.style.top="";if(Device.requiresFullscreenResizeDelay){t.mediaContainer.style.height="0px";t.mediaContainer.style.width="0px";clearTimeout(t.fsTimeout);t.fsTimeout=setTimeout(function(){t.mediaContainer.style.height="";t.mediaContainer.style.width=""},500)}else{t.mediaContainer.style.height="";t.mediaContainer.style.width=""}};if(e)i();else if(Device.fullscreenEnabled(document)){i();Device.exitFullscreen(document);t.iframeFullscreen=!1}else{i();t.addedFullscreenListenerTop&&Device.fullscreenEnabled(top.document)&&Device.exitFullscreen(top.document)}a(t,{type:"fullscreenExit"});setTimeout(function(){t.ui.enabled=!0;if(t.ui.pGuidance.nowShowing&&(400>t.mediaContainer.clientWidth||400>t.mediaContainer.clientHeight)){t.ui.pGuidance.close();t.guidanceShow(!1)}},500)}},requestGuidanceAndPlay:function(e){var t=this;if(t.guidanceOk){!e&&t.ui.inPrePlayState&&t.dispatch({type:"userPlay"});t.dispatch({type:"playRequested"},!0);if(t.config.playVideoExternally&&!t.playlistHasAudio){t.playInBump();return}t.startPlayback(e)}else{t.mediaPlayer.autoplay=!1;t.guidanceShow(!1)}},guidanceShow:function(e){var t=this;a(t,{type:"guidanceShown"});var i={type:"guidanceShow",guidance:t.playlist.guidance,title:t.playlist.title,lockClicked:e};if(400>t.mediaContainer.clientWidth||400>t.mediaContainer.clientHeight||!t.ui.config.useInPlayerGuidance){t.iframeFullscreen&&t.minimise();a(t,i)}else t.ui.pGuidance.showInPlayerGuidance(i,t.mediaContainer)},loadPlaylistUrl:function(e,t){var i=this;Utils.isValidUrl(e)?i.loadingPlaylistURL==e&&i.playlist.loading||i.loadPlaylist(e,t):Utils.callErrorFunction(i,SMPError.NON_BBC_PLAYLIST)},loadPlaylistObject:function(e,t){var i=this;i.loadPlaylist(e,t)},loadPlaylist:function(e,t,i){var n=this,r=e,o=null,s=!1;if("object"==typeof e){r="playlist_"+R++;o=e;s=!0}else(e+"").match(/(^[a-zA-Z]+\:)?\/\//)&&(s=!0);n.loadingPlaylistURL=r;a(n,{type:"playlistLoading",url:r,statsObject:n.config.statsObject});n.reset(i);n.actionFnObjAfterWaiting=null;n.state="busy";if(s){w(n,r,o,i);if(t)n.willAutoplayWhenPlayCalled[n.playlist.mediaType]||n.firstPlaylist&&Device.notWorthTryingAutoplay&&(n.config.autoplay=!1);else if(n.config.autoplay){u(n,n.playlist.mediaType);n.dispatch({type:"playRequested"},!0)}}else{n.delayedDispatch(SMPError.getError(SMPError.NO_ITEMS));Utils.asyncDelay(function(){n.loadingPlaylistURL===r&&a(n,{type:"playlistLoaded",url:r,fromQueue:i,playlist:e})})}i||n.unsetGuidanceSkippedIfUnder16();n.firstPlaylist=!1},reset:function(e){var t=this;t.swf.kill();t.resettingIndexInPlaylistEnd=!1;t.streamFailing=!1;t.autoplayTimeoutRetryAttempted=!1;t.failingOver=!1;t.failedOver=!1;t.inErrorState=!1;t.reloadToStart=!1;t.endOnWaiting=!1;t.clearFakeTimer();clearTimeout(t.playingTimer);n(t,t.elType,!0);t.mediaPlayer.playbackRate=1;t.dashEvents.reset();t.elType="unknown";t.tryingToPlay=!1;t.timeHelper.reset();Utils.clearPendingReqs();if(!e){if(t.preloadDashEvents){t.preloadDashEvents.reset();t.preloadDashEvents=null}t.preloadStoredErrors&&(t.preloadStoredErrors=null)}if(t.preloadCallback){t.timeHelper.clearPlaybackTimeout(t.preloadCallback);t.preloadCallback=null}clearTimeout(t.noCanplayEventTimeout)},playWithUserCheck:function(e){var t=this;e&&t.playlist&&!t.willAutoplayWhenPlayCalled[t.playlist.mediaType]&&Device.notWorthTryingAutoplay||t.requestGuidanceAndPlay(e)},queueNextPlaylist:function(e){var t=this;if(t.playlist&&t.playlist.queuedPlaylist){Utils.asyncDelay(S,[t,e]);return!0}return!1},queuePreviousPlaylist:function(e){var t=this;if(t.playlist&&t.playlist.previousPlaylist){Utils.asyncDelay(_,[t,e]);return!0}return!1},resetStatsObject:function(){var e=this,t=e.config.statsObject;if(t){t.parentPID=void 0;t.parentPIDType=void 0;t.episodePID=void 0;t.clipPID=void 0;t.playlistLabels=void 0}},fallbackAsAppropriate:function(){var t=this;if(Device.android||Device.kindle)Utils.callErrorFunction(t,SMPError.CANT_PLAY_IN_ANDROID_BROWSER);else if(e()){if(t.mediaItem){t.mediaItem.useFlash=!0;Utils.asyncDelay(f,[t])}}else Utils.callErrorFunction(t,SMPError.FLASH_NOT_INSTALLED)},requestAllEvents:function(e){G[this.uid]||(G[this.uid]=[]);G[this.uid].push(e)},pushMediaEventFunctions:function(e){W[this.uid]||(W[this.uid]={});W[this.uid].callbacks||(W[this.uid].callbacks=[]);W[this.uid].callbacks.push(e)},trackAction:function(e,t,i){this.dispatch({type:"SonarUserActionEvent",controlId:e,actionType:t,labels:i})},dispatch:function(e,t){a(this,e,t)},delayedDispatch:function(e,t){var i=this;Utils.asyncDelay(a,[i,e,t])},clearFakeTimer:function(){var e=this;if(e.fakeTimeupdateTimer){clearInterval(e.fakeTimeupdateTimer);e.fakeTimeupdateTimer=null}},onAdsProcessed:function(e){LoadBalancing.onAdsProcessed(this.mediaItem,e);T(this)},captureIntent:function(e){"audio"!==e&&(e="video");u(this,e)},updateConfig:function(e,t,i){var n=this,r=n.config.uiClass,o={};e.counterName!==n.config.counterName&&(t||a(n,{type:"statsConfigChanged",counterName:e.counterName}));if(void 0!==e.continuousPlay&&e.continuousPlay!==n.config.continuousPlay&&!t){this.dispatch({type:"continuousPlayChange",status:e.continuousPlay});o.continuousPlay=e.continuousPlay}n.config=Utils.merge(n.config,e);n.pauseTimes=[];n.config.suppressItemKind&&n.config.suppressItemKind.length&&"string"==typeof n.config.suppressItemKind&&(n.config.suppressItemKind=n.config.suppressItemKind.replace(/\s+/gim,"").split(","));if(n.config.noTracking){n.config.enableStatsReporting=!1;n.config.enableRdotReporting=!1}"false"==n.config.autoplay&&(n.config.autoplay=!1);n.config.forceAutoplayAttempt&&(n.willAutoplayWhenPlayCalled={video:!0,audio:!0});n.config.uiClass&&n.config.uiClass!=r&&Utils.className(document.body,n.config.uiClass,r);n.config.preferPlainOverDash&&Device.possiblyPreferPlainOverDash||Device.preferHls||!Device.supportsAudioDash&&!Device.supportsVideoDash||n.config.delayEmbed||n.dashEvents.create();n.config.startTime=n.config.startTime||0;
if(!n.config.preferProtocol){var s=n.config.preferHttpsPercentage;(isNaN(s)||0>s||s>1)&&(s=0);n.config.preferProtocol=Math.random()<=s?"https":"https:"===(location.protocol+"").toLowerCase()?"https":"http"}LoadBalancing.setConfig(n.config);F=n.config.liveEnvironment?B:U;t||a(n,{type:"configUpdated"});t||i||Utils.isObjectEmpty(o)||a(n,{type:"distributeConfig",configToDistribute:o})},playInBump:function(){var e=this;e.elType="video";e.waitingForChange.video=!1;e.dispatch({type:"playInBump"});setTimeout(function(){e.dispatch({type:"playlistStopped",target:e.mediaPlayer})},1e3)},fixSize:function(e){var t=this,i=document.getElementsByTagName("html")[0];i.style.backgroundColor="black";clearTimeout(t.resizeTimer);if(!e&&Device.requiresFullscreenResizeDelay){t.ui.enabled=!1;PluginManager.resizeFix();t.Subtitles.resizeFix();t.mediaContainer.style.width="0px";t.mediaContainer.style.height="0px";t.resizeTimer=setTimeout(function(){var e=window.innerHeight,n=window.innerWidth;t.ui.enabled=!0;t.mediaContainer.style.height=e+"px";t.mediaContainer.style.width=n+"px";PluginManager.resizeFixEnd();Utils.deleteCssRules(t.ui.stylesheet,[".fullscreen #p_playerControls"]);var a=Math.round(t.ratio*n);a>e&&(a=e);if(n>e&&t.ui.controls){var r=.015625*n,o=Math.round((e-a)/2+a-r),s=t.ui.stylesheet.cssRules.length;t.ui.stylesheet.insertRule(".fullscreen #p_playerControls { top: "+(o-t.ui.controls.clientHeight)+"px; }",s)}t.els.video.style.height=a+"px";t.els.video.style.top=Math.round((window.innerHeight-a)/2)+"px";t.ui.resizeFixEnd(window.innerWidth);PluginManager.resizeFixComplete();t.dashEvents.updatePortalSize();i.style.backgroundColor="transparent"},Device.requiresShortFullscreenResizeDelay?200:1e3)}else{t.ui.enabled=!0;PluginManager.resizeFixEnd();t.ui.resizeFixEnd(window.innerWidth);t.ui.displayCover();PluginManager.resizeFixComplete();t.dashEvents.updatePortalSize();i.style.backgroundColor="transparent"}t.dispatch({type:"fixSize"})},loadPluginCompleted:function(e){L(this,e)},setProtectionData:function(e){var t=this;t.storedProtectionData=e;t.dashEvents&&t.dashEvents.src&&t.dashEvents.dashPlayer&&t.dashEvents.go()},setQueuedItem:function(e){var t=this;t.playlist.queuedPlaylist=e.playlist;t.playlist.queuedOptions=e.options;(t.ended||t.playing)&&Utils.asyncDelay(g,[t,!t.config.disablePreload])},setPreviousItem:function(e){var t=this;t.playlist.previousPlaylist=e.playlist;t.playlist.previousOptions=e.options},unsetGuidanceSkippedIfUnder16:function(){var e=this;if(e.config.under16){e.config.guidance.hasGuidancePIN||e.dispatch({type:"setGuidanceSkipped",skipped:!1});e.dispatch({type:"setUnder16Permission",hasPermission:!1})}},updateQuality:function(e){var t=this;t.updateConfig(e);e.lowBandwidth&&(e.quality="low");t.quality=new Quality(e.quality)}};return j}();Sonic.prototype={draw:function(){var e=this.canvas.getContext("2d");this.padding=2*(Math.ceil(this.thickness/2)+1);var t=this.canvas.width=this.canvas.height=this.width+this.padding;e.clearRect(0,0,t,t);e.lineWidth=this.thickness;var i=t/2,n=Math.floor((t-this.thickness)/2)-1,a=Math.PI/22.5,r=this.colourArray;if(r&&r.length>0)for(var o=0;40>o;o++){e.beginPath();e.globalAlpha=o/40;e.arc(i,i,n,(o+1)*a,o*a,!0);e.strokeStyle=r[o%r.length];e.stroke()}else{e.strokeStyle=this.colour;for(o=0;25>o;o++){e.beginPath();e.globalAlpha=o/250;e.arc(i,i,n,0,o*a,!0);e.stroke()}}}};try{for(var hosts=["bbc.co.uk","bbc.com","britbox.com","bbcrewind.co.uk","bbcconnectedstudio.co.uk"],i=0;hosts.length>i;i++){var host=hosts[i];-1!==location.host.indexOf(host)&&(document.domain=host)}}catch(e){}document.addEventListener("dragover",function(e){e.preventDefault();e.stopPropagation()});document.addEventListener("drop",function(e){e.preventDefault();e.stopPropagation()});xd=new XD;window.bootstrap=function(e){xd.detach("bootstrap");if(e.requireMap)try{require({paths:e.requireMap})}catch(t){}else e.requireMap={};window.publicApi=new Player;DebugConsole.player(window.publicApi);window.publicApi.init(e)};xd.on("bootstrap",window.bootstrap);define("iframe.js",function(){});
</script>
<style></style><link rel="dns-prefetch" href="https://open.live.bbc.co.uk/"></head><body class="news nonPointerFocus font-family-sans classicUI svg displayCover video cta" style="cursor: default;">
<div id="p_background"></div>
<div id="p_alert" role="alert"></div>
<!-- be sure that DOM elements are positioned after the flash container -->
<div id="mediaContainer" class="mediaContainer noSeekingBar controlsFadedOut" style="background-image: url(&quot;https://ichef.bbci.co.uk/news/490/cpsprodpb/0317/production/_106119700_hi053027118_crop.jpg&quot;);"><video id="p_360_player_0" preload="metadata" crossorigin="anonymous" webkit-playsinline="webkit-playsinline" playsinline="playsinline" aria-hidden="true" style="left: -9999px;"></video><video webkit-playsinline="" playsinline="" preload="metadata" id="p_v_player_0" aria-hidden="true" style="left: -9999px;"></video><div class="p_gradientLayer" style="display: block;"></div><div class="p_gradientBottomfiller" style="display: block;"></div><div id="p_swfcontainer"></div><ul class="p_contextMenu" style="display: none;"><li><a class="p_contextMenuItem" title="2.23.21.3ad43c0">2.23.21.3ad43c0</a></li><li><a class="p_contextMenuItem"> <br> </a></li><li><a class="p_contextMenuItem"></a></li><li><a class="p_contextMenuItem"></a></li><li><a class="p_contextMenuItem"></a></li></ul><div aria-live="polite" role="region" class="p_subtitlesContainer" style="width: 0px; height: 0px; margin-left: 0px; margin-top: 0px; opacity: 0.8;"></div><div class="p_spinner" style="display: none; height: 62px; width: 62px; margin-left: -31px; margin-top: -31px; top: 50%; left: 50%;"><canvas height="62" width="62"></canvas></div><button class="p_button p_cta p_hasDuration font-family-sans" style="display: block; visibility: visible;" title="Play New Zealand to ban military style weapons" aria-label="Play New Zealand to ban military style weapons"><span class="p_hiddenElement">Play</span><span class="p_ctaDuration">01:14</span><div class="p_iconHolder" style="display: block;"><svg focusable="false" viewBox="0 0 44 44" class="p_svg p_ctaIcon p_playIcon"><use xlink:href="#play"></use></svg></div></button><div class="p_accessibleHitArea notInteractiveContent" role="img" aria-hidden="false" aria-label="New Zealand to ban military style weapons Media"></div><div class="p_playerControls" style="display: none; clip: rect(1px, 1px, 1px, 1px);"><div class="p_playerControlBarHolder" style="display: block;"><button class="p_button p_controlBarButton p_playButton" role="button" aria-live="polite" aria-label="Play" title="Play"><span class="p_hiddenElement" aria-hidden="true">Play</span><div class="p_iconHolder" style="display: block;"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_playIcon"><use xlink:href="#play"></use></svg></div></button><div class="p_closed p_volumeControls" aria-hidden="false"><div class="p_sliderContainer" tabindex="-1"><div class="p_sliderControls"><div class="p_volumeBarHolder" style="left: 11px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 20px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 29px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 38px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 47px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 56px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 65px;"><div class="p_volumeBar p_beforeVolume"></div></div><div class="p_volumeBarHolder" style="left: 74px;"><div class="p_volumeBar p_selectedVolume"></div></div><div class="p_volumeBarHolder" style="left: 83px;"><div class="p_volumeBar p_afterVolume"></div></div><div class="p_volumeBarHolder" style="left: 92px;"><div class="p_volumeBar p_afterVolume"></div></div><div class="p_volumeBarHolder" style="left: 101px;"><div class="p_volumeBar p_afterVolume"></div></div><div class="p_volumeLevel" aria-hidden="true">8</div></div><div id="p_volumeHelpText" style="display: none;">Use the arrow keys to increase and decrease the volume</div></div><button class="p_button p_controlBarButton p_volumeButton audio" role="slider" aria-live="polite" aria-label="Mute" title="Mute" aria-describedby="p_volumeHelpText" aria-valuemin="0" aria-valuemax="11" aria-valuetext="Volume level 8" aria-valuenow="8"><span class="p_hiddenElement" aria-hidden="true">Mute</span><div class="p_iconHolder" style="display: block;"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_audioIcon"><use xlink:href="#audio"></use></svg></div></button></div><div class="p_controlBarFiller" style="width: 284px;"><div class="p_timeDisplay" aria-hidden="true" aria-live="off" aria-role="timer" style="display: block;"><span class="p_time"></span><span class="p_timeSeparator" style="display: none;">/</span><span class="p_time p_duration"></span></div></div><button class="p_button p_controlBarButton p_fullscreenButton" role="button" aria-live="polite" aria-label="Enter full screen" title="Enter full screen"><span class="p_hiddenElement" aria-hidden="true">Enter full screen</span><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_fullscreen-enterIcon"><use xlink:href="#fullscreen-enter"></use></svg></div></button><button class="p_button p_controlBarButton p_subtitleButton p_dontCloseSettingsPanel" role="button" aria-live="polite" aria-label="Turn subtitles on and open subtitles settings menu" title="Turn subtitles on and open subtitles settings menu"><span class="p_hiddenElement" aria-hidden="true">Turn subtitles on and open subtitles settings menu</span><div class="p_selected_background"><div class="p_selected_indicator"></div></div><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_accessibilityIcon"><use xlink:href="#accessibility"></use></svg></div></button><div id="p_subtitleSettingsContainer" class="p_dontCloseSettingsPanel"><div class="p_subtitleSettingsMask"></div><div class="p_subtitleSettingsBox"><div class="p_subsToggleLabel">Subtitles</div><div class="p_toggle p_subsToggle" role="checkbox" aria-checked="false" aria-label="Subtitles" tabindex="0"><div class="p_toggleText">OFF</div><div class="p_toggleSlot"><div class="p_toggleSlider"><div class="p_tick"></div></div></div></div><div class="p_sizingButtonsContainer"><button id="p_subtitleSizeButton_useSmallestFontSize" class="p_subtitleSizeButton p_button font-family-sans" disabled="" aria-pressed="false" data-sizename="useSmallestFontSize" aria-label="Use font size: Smallest" data-size="0.5"><div>Aa</div></button><button id="p_subtitleSizeButton_useSmallFontSize" class="p_subtitleSizeButton p_button font-family-sans" disabled="" aria-pressed="false" data-sizename="useSmallFontSize" aria-label="Use font size: Small" data-size="0.6"><div>Aa</div></button><button id="p_subtitleSizeButton_useMediumFontSize" class="p_subtitleSizeButton p_button font-family-sans" disabled="" aria-pressed="false" data-sizename="useMediumFontSize" aria-label="Use font size: Medium" data-size="0.67"><div>Aa</div></button><button id="p_subtitleSizeButton_useLargeFontSize" class="p_subtitleSizeButton p_button font-family-sans" disabled="" aria-pressed="false" data-sizename="useLargeFontSize" aria-label="Use font size: Large" data-size="0.82"><div>Aa</div></button><button id="p_subtitleSizeButton_useLargestFontSize" class="p_subtitleSizeButton p_button font-family-sans" disabled="" aria-pressed="true" data-sizename="useLargestFontSize" aria-label="Use font size: Largest" data-size="1"><div>Aa</div></button></div><div id="p_subtitleSizeIndicator" style="left: 185px; display: block;"></div></div><div class="p_downArrow"></div></div><button class="p_button p_controlBarButton p_playbackSettingsButton p_dontCloseSettingsPanel" role="button" aria-live="polite" aria-label="Open playback settings menu for autoplay and video quality settings" title="Open playback settings menu for autoplay and video quality settings"><span class="p_hiddenElement" aria-hidden="true">Open playback settings menu for autoplay and video quality settings</span><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_playback-settingsIcon"><use xlink:href="#playback-settings"></use></svg></div></button><div id="p_playbackSettingsContainer" class="p_dontCloseSettingsPanel"><div id="p_playbackSettingsMask"></div><div id="p_playbackSettingsBox"><div id="p_playbackSettingsHeading">Playback settings</div><div id="p_panel1"><div id="p_autoplayRow" class="p_settingsRow" style="display: none;"><div id="p_autoplayText" class="p_settingsTextBox"><div id="p_autoplayTitle" class="p_settingsTitle">Autoplay</div><div id="p_autoplaySubtitle" class="p_settingsSubtitle">Play next item automatically</div></div><div id="p_autoplayToggle" class="p_toggle" role="checkbox" aria-checked="false" aria-label="Autoplay. Play next item automatically" tabindex="0"><div class="p_toggleText">OFF</div><div class="p_toggleSlot"><div class="p_toggleSlider"><div class="p_tick"></div></div></div></div></div><div id="p_qualityRow" class="p_settingsRow" aria-label="Video quality. Highest available is currently selected. Open video quality settings" tabindex="0"><div id="p_qualityText" class="p_settingsTextBox"><div id="p_qualityTitle" class="p_settingsTitle"><span>Video quality</span><div id="p_chevronPlaceholder" tabindex="-1"><div class="p_chevronBorder"><div class="p_chevronInside"></div></div></div></div><div id="p_qualitySubtitle" class="p_settingsSubtitle">Highest available</div><div id="p_qualitySubtitleUnavailable" class="p_settingsSubtitleUnavailable">Currently unavailable</div></div></div><ul id="p_qualityListWrap" aria-label="Video quality options"><li id="p_qualityPanelFirstRow" class="p_qualityPanelRow" aria-label="Low quality" tabindex="0"><div id="p_qualityPanelLowRowHeading" class="p_qualityPanelRowHeading"><span>Low</span><div class="p_qualityTick"></div></div></li><li id="p_qualityPanelMediumRow" class="p_qualityPanelRow" aria-label="Medium quality" tabindex="0"><div id="p_qualityPanelMediumRowHeading" class="p_qualityPanelRowHeading"><span>Medium</span><div class="p_qualityTick"></div></div></li><li id="p_qualityPanelHighRow" class="p_qualityPanelRow p_qualitySettingOn" aria-label="Highest quality available selected" tabindex="0"><div id="p_qualityPanelHighRowHeading" class="p_qualityPanelRowHeading"><span>Highest available</span><div class="p_qualityTick"></div></div><div aria-hidden="true" id="p_qualityPanelHighRowSubtitle" class="p_qualityPanelRowSubtitle"><span>Automatically selects the best quality available</span></div></li></ul></div></div><div class="p_downArrow"></div></div><button class="p_button p_controlBarButton p_chromecastButton" role="button" aria-live="polite" aria-label="Cast this programme" title="Cast this programme"><span class="p_hiddenElement" aria-hidden="true">Cast this programme</span><div class="p_selected_background"><div class="p_selected_indicator"></div></div><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_chromecastIcon"><use xlink:href="#chromecast"></use></svg></div></button><button class="p_button p_controlBarButton p_picInPicButton" role="button" aria-live="polite" aria-label="Open Picture in Picture mode" title="Open Picture in Picture mode"><span class="p_hiddenElement" aria-hidden="true">Open Picture in Picture mode</span><div class="p_selected_background"><div class="p_selected_indicator"></div></div><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_picInPicIcon"><use xlink:href="#picInPic"></use></svg></div></button><button class="p_button p_controlBarButton p_embedButton" role="button" aria-live="polite" aria-label="Get embed code" title="Get embed code"><span class="p_hiddenElement" aria-hidden="true">Get embed code</span><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_embedIcon"><use xlink:href="#embed"></use></svg></div></button></div><div class="p_chapterMarkersHolder"><div class="p_chapterTip"><span></span><div class="p_timeTipTriangle"></div></div></div><div class="p_playerSeekBarHolder" aria-hidden="false"><div class="p_bar p_seekBar"><div class="p_seekBarPositionLine"></div><div id="p_seekHelpText" style="display: none;">Use the arrow keys to forward and rewind</div></div><div class="p_bar p_progressBar p_progressBarAvailable"></div><div class="p_bar p_progressBar"></div><button class="p_button p_seekThumb" title="Seek bar" aria-label="Seek bar" role="slider" aria-control="video" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Playback time is 00:00 of 00:00" aria-describedby="p_seekHelpText" style="display: none;"><div class="p_seekThumbLine"></div><div class="p_seekThumbHalo"></div></button></div><div class="p_thumbnail"></div><div class="p_timeTip" aria-hidden="true"><span class="p_timeTipText"></span><div class="p_timeTipTriangle"></div></div></div><div id="p_pluginContainer" class="notInteractiveContent" style="width: 419px; height: 236px;"></div></div>


<div class="p_ctaGuidance p_guidance" style="display: none; visibility: visible;"><div class="p_guidanceContainer"><div class="p_guidanceHolder"><span class="p_guidanceFallback"><span class="p_guidanceFallbackText">G</span></span><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_guidanceIcon"><use xlink:href="#guidance"></use></svg></div><span class="p_guidanceText" style="margin-left: 25px;"></span></div></div><button style="display: none;"></button><span class="guidanceClose" style="display: none;"><div class="p_iconHolder"><svg focusable="false" viewBox="0 0 44 44" class="p_svg  p_crossIcon"><use xlink:href="#cross"></use></svg></div></span></div><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="176" height="32" viewBox="0 0 176 32" focusable="false">
    <defs>
        <g id="play">
            <polygon points="14.4,33 32.3,22 14.4,11"></polygon>
        </g>
        <g id="play-iplayer">
            <polygon points="19.2,11 13.8,11 13.8,16.5 19.2,16.5 19.2,14.2 28.2,22 19.2,29.8 19.2,19.2 13.8,19.2 13.8,33 19.2,33 31.6,22"></polygon>
        </g>
		<g id="mute">
			<polygon points="22,13.8 17.9,17.9 11,17.9 11,26.1 17.9,26.1 22,30.2"></polygon>
			<rect x="23.7" y="21.3" transform="matrix(0.7072 0.7071 -0.7071 0.7072 23.9848 -13.908)" width="10.2" height="1.4"></rect>
			<rect x="28.1" y="16.9" transform="matrix(0.7072 0.707 -0.707 0.7072 23.9802 -13.9074)" width="1.4" height="10.2"></rect>
		</g>
        <g id="audio">
            <path d="M25.7,14.3l-1,1c1.7,1.7,2.8,4.1,2.8,6.7c0,2.6-1.1,5-2.8,6.7l1,1c2-2,3.2-4.7,3.2-7.7C28.9,19,27.7,16.3,25.7,14.3z"></path>
            <path d="M28.6,11.4l-1,1c2.5,2.5,4,5.9,4,9.7s-1.5,7.2-4,9.7l1,1C31.3,29.9,33,26.1,33,22C33,17.9,31.3,14.1,28.6,11.4z"></path>
            <polygon points="22,13.8 17.9,17.9 11,17.9 11,26.1 17.9,26.1 22,30.2"></polygon>
        </g>
        <g id="play-iplayer-audio">
            <path d="M26,14.5l-1,1c1.7,1.7,2.7,4,2.7,6.6c0,2.6-1,4.9-2.7,6.6l1,1c1.9-1.9,3.1-4.6,3.1-7.5C29.1,19.1,27.9,16.5,26,14.5z"></path>
            <path d="M28.8,11.7l-1,1c2.4,2.4,3.9,5.8,3.9,9.4c0,3.7-1.5,7-3.9,9.4l1,1c2.6-2.7,4.3-6.3,4.3-10.4C33.1,18,31.5,14.3,28.8,11.7z"></path>
            <polygon points="15.4,13.2 11,13.2 11,17.6 15.4,17.6 15.4,15.8 22.5,22 15.4,28.2 15.4,19.8 11,19.8 11,30.8 15.4,30.8 25.3,22"></polygon>
        </g>
        <g id="volume">
            <path d="M25.7,14.3l-1,1c1.7,1.7,2.8,4.1,2.8,6.7s-1.1,5-2.8,6.7l1,1c2-2,3.2-4.7,3.2-7.7C28.9,19,27.7,16.3,25.7,14.3z"></path>
            <path d="M28.6,11.4l-1,1c2.5,2.5,4,5.9,4,9.7c0,3.8-1.5,7.2-4,9.7l1,1C31.3,29.9,33,26.1,33,22C33,17.9,31.3,14.1,28.6,11.4z"></path>
            <polygon points="22,13.8 17.9,17.9 11,17.9 11,26.1 17.9,26.1 22,30.2"></polygon>
        </g>
        <g id="pause">
            <rect x="13.1" y="11" width="6.2" height="22"></rect>
            <rect x="24.8" y="11" width="6.2" height="22"></rect>
        </g>
        <g id="fullscreen-enter">
            <path d="M26.1,19.2v6.9h-8.2v-8.2h8.2 M27.5,16.5h-11v11h11V16.5L27.5,16.5z"></path>
            <polygon points="25.4,11 33,11 33,18.6"></polygon>
            <polygon points="18.6,11 11,11 11,18.6"></polygon>
            <polygon points="25.4,33 33,33 33,25.4"></polygon>
            <polygon points="18.6,33 11,33 11,25.4"></polygon>
        </g>
        <g id="fullscreen-return">
            <polygon points="28,12 20,12 20,4"></polygon>
            <polygon points="4,12 12,12 12,4"></polygon>
            <polygon points="28,20 20,20 20,28"></polygon>
            <polygon points="4,20 12,20 12,28"></polygon>
            <rect x="1" width="30" height="2"></rect>
            <rect x="1" y="30.5" width="30" height="2"></rect>
            <rect width="2" height="32"></rect>
            <rect x="30" width="2" height="32"></rect>
        </g>
        <g id="embed">
            <polygon points="17.9,19.4 17.9,15.1 11,21.9 17.9,28.9 17.9,24.5 15.3,21.9 "></polygon>
            <polygon points="26.1,24.5 26.1,28.9 33,21.9 26.1,15.1 26.1,19.4 28.7,21.9 "></polygon>
            <rect x="18.3" y="21.4" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -9.1427 22.0532)" width="7.5" height="1.4"></rect>
        </g>
        <g id="guidance">
            <circle fill="inherit" cx="22" cy="22" r="11"></circle>
            <path fill="currentColor" d="M27.1,27.5h-1.8L25,26.3c-0.8,1.1-2,1.4-3.1,1.4c-3.3,0-5.5-2.5-5.5-5.7c0-3.2,2.2-5.7,5.5-5.7c2.3,0,4.7,1.2,5,4h-2.9c-0.1-0.9-1-1.5-2.2-1.5c-1.8,0-2.6,1.6-2.6,3.3c0,1.6,0.7,3.3,2.6,3.3c1.4,0,2.4-0.7,2.5-1.7h-2v-2.1h4.6V27.5z"></path>
        </g>
        <g id="padlock-locked">
            <rect x="13.1" y="20.6" width="17.9" height="12.4"></rect>
            <path d="M22,14.4c1.5,0,2.8,1.2,2.8,2.8v8.2c0,1.5-1.2,2.8-2.8,2.8c-1.5,0-2.8-1.2-2.8-2.8v-8.2C19.2,15.7,20.5,14.4,22,14.4M22,11c-3.4,0-6.2,2.8-6.2,6.2v8.2c0,3.4,2.8,6.2,6.2,6.2c3.4,0,6.2-2.8,6.2-6.2v-8.2C28.2,13.8,25.4,11,22,11L22,11z"></path>
        </g>
        <g id="padlock-unlocked">
            <path d="M26.8,11c-3.4,0-6.2,2.8-6.2,6.2v3.4h-4.8h-3.4H11V33h15.8V20.6h-2.1h-0.7v-3.4c0-1.5,1.2-2.8,2.8-2.8c1.5,0,2.8,1.2,2.8,2.8v3.4H33v-3.4C33,13.8,30.2,11,26.8,11z"></path>
        </g>
        <g id="cross">
            <rect x="20.3" y="8.2" transform="matrix(0.7071 0.7071 -0.7071 0.7071 22 -9.1127)" width="3.4" height="27.7"></rect>
            <rect x="20.3" y="8.2" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -9.1127 21.9994)" width="3.4" height="27.7"></rect>
        </g>
        <g id="chromecast">
            <path d="M19.9,30.4H18c-0.5-3.6-3.4-6.5-7-7v-1.9           C15.7,22.1,19.4,25.7,19.9,30.4z M16.6,30.4h-1.9c-0.4-1.8-1.8-3.2-3.7-3.7v-1.9C13.8,25.3,16.1,27.6,16.6,30.4z M13.2,30.4H11           v-2.2C12,28.6,12.8,29.4,13.2,30.4z"></path>
            <path d="M21.5,29.1c-0.1-0.6-0.3-1.2-0.5-1.7h10.3V15.3l-17.3,0v5.1           c-0.6-0.2-1.1-0.4-1.7-0.5v-6.3H33v15.5H21.5z"></path>
        </g>
        <g id="closed-captions">
            <path d="M11,14v16h22V14H11z M21.5,20.9h-1.8v-0.1c0-0.1-0.1-0.2-0.1-0.3c-0.1-0.1-0.2-0.2-0.3-0.3                 c-0.1-0.1-0.2-0.2-0.4-0.2c-0.1,0-0.3,0-0.4,0c-0.3,0-0.5,0.1-0.7,0.2c-0.2,0.1-0.4,0.3-0.5,0.4c-0.1,0.2-0.2,0.4-0.3,0.7                 c-0.1,0.3-0.1,0.5-0.1,0.8c0,0.3,0,0.5,0.1,0.8c0.1,0.2,0.2,0.4,0.3,0.6s0.3,0.3,0.5,0.4c0.2,0.1,0.4,0.2,0.7,0.2                 c0.4,0,0.7-0.1,0.9-0.3c0.2-0.2,0.4-0.3,0.4-0.7h1.7v0.1c0,0.4-0.1,0.7-0.3,1c-0.1,0.2-0.3,0.4-0.6,0.7c-0.3,0.2-0.6,0.4-0.9,0.5                 c-0.4,0.1-0.7,0.2-1.2,0.2s-1-0.1-1.4-0.3c-0.4-0.2-0.8-0.4-1.1-0.8c-0.3-0.3-0.5-0.7-0.7-1.1c-0.2-0.4-0.2-0.9-0.2-1.4                 s0.1-1,0.2-1.4c0.2-0.4,0.4-0.8,0.7-1.2c0.3-0.3,0.7-0.6,1.1-0.8c0.4-0.2,0.9-0.3,1.4-0.3c0.4,0,0.7,0.1,1.1,0.2                 c0.3,0.1,0.6,0.3,0.9,0.5s0.5,0.5,0.7,0.8c0.2,0.3,0.3,0.6,0.3,1V20.9z M28.9,20.9h-1.8v-0.1c0-0.1-0.1-0.2-0.1-0.3                 c-0.1-0.1-0.2-0.2-0.3-0.3c-0.1-0.1-0.2-0.2-0.4-0.2c-0.1,0-0.3,0-0.4,0c-0.3,0-0.5,0.1-0.7,0.2c-0.2,0.1-0.4,0.3-0.5,0.4                 c-0.1,0.2-0.2,0.4-0.3,0.7c-0.1,0.3-0.1,0.5-0.1,0.8c0,0.3,0,0.5,0.1,0.8c0.1,0.2,0.2,0.4,0.3,0.6c0.1,0.2,0.3,0.3,0.5,0.4                 c0.2,0.1,0.4,0.2,0.7,0.2c0.4,0,0.7-0.1,0.9-0.3s0.4-0.3,0.4-0.7h1.7v0.1c0,0.4-0.1,0.7-0.3,1c-0.1,0.2-0.3,0.4-0.6,0.7                 c-0.3,0.2-0.6,0.4-0.9,0.5c-0.4,0.1-0.7,0.2-1.2,0.2s-1-0.1-1.4-0.3s-0.8-0.4-1.1-0.8c-0.3-0.3-0.5-0.7-0.7-1.1                 c-0.2-0.4-0.2-0.9-0.2-1.4s0.1-1,0.2-1.4c0.2-0.4,0.4-0.8,0.7-1.2c0.3-0.3,0.7-0.6,1.1-0.8c0.4-0.2,0.9-0.3,1.4-0.3                 c0.4,0,0.7,0.1,1.1,0.2c0.3,0.1,0.6,0.3,0.9,0.5c0.3,0.2,0.5,0.5,0.7,0.8c0.2,0.3,0.3,0.6,0.3,1V20.9z"></path>
        </g>
        <g id="catcast">
            <path d="M10.4,30.7C10.4,30.8,10.4,30.8,10.4,30.7l1.3,0c0,0,0,0,0,0c0-2.1-1.7-3.7-3.7-3.7v1.3                 C9.3,28.3,10.4,29.4,10.4,30.7z"></path>
            <path d="M9.2,30.8C9.2,30.8,9.2,30.8,9.2,30.8c0-0.7-0.6-1.3-1.2-1.3v1.3H9.2z"></path>
            <path d="M12.9,30.7C12.9,30.8,12.9,30.8,12.9,30.7l1.3,0c0,0,0,0,0,0c0-3.4-2.8-6.2-6.2-6.2v1.3                 C10.7,25.8,12.9,28,12.9,30.7z"></path>
            <path d="M32,26.7l5.8-4.1l-6.4,2.4c-0.1-2.6-1-5.2-2.7-7.2l0.6-4.7l-3.5,2.2c-1.9-1.2-4-1.8-6.2-1.8                 c-2.2,0-4.3,0.6-6.2,1.8L10,13.2l0.6,4.7c-1.1,1.3-1.9,2.8-2.3,4.4l0,0.6l0.5,0c0.2,0,0.4,0,0.7,0c3.5,0,6.3,2.8,6.3,6.3                 c0,0,0,0,0,0c0,0,0,0,0,0l0,0.5h18.8l-2.8-1.5l3.7-0.9L32,26.7z M13.6,20.4c-0.7,0-1.3-0.6-1.3-1.3s0.6-1.3,1.3-1.3                 s1.3,0.6,1.3,1.3S14.3,20.4,13.6,20.4z M21.5,21.7c-0.3,0.2-0.7,0.5-1,0.7c-0.3,0.2-0.6,0.2-0.9,0c-0.3-0.3-0.6-0.5-1-0.7                 c-0.5-0.3-0.4-1.1,0.2-1.3c0.4-0.1,0.8-0.1,1.2-0.1s0.8,0,1.2,0.1C21.9,20.6,22.1,21.4,21.5,21.7z M25.9,20.4                 c-0.7,0-1.3-0.6-1.3-1.3s0.6-1.3,1.3-1.3s1.3,0.6,1.3,1.3S26.6,20.4,25.9,20.4z"></path>
        </g>
        <g id="subtitles">
            <path d="M11,12v22h22V12H11z M22,28.8c-2.5,0-4.8-0.8-4.8-3.8h2.9c0.1,1,0.9,1.6,2.1,1.6c0.9,0,1.8-0.4,1.8-1.2                 c0-1-1.6-1.2-3.2-1.6c-1.6-0.4-3.2-1.2-3.2-3.2c0-2.4,2.4-3.3,4.5-3.3c2.2,0,4.4,0.6,4.4,3.6h-2.9c0-1-0.9-1.4-1.8-1.4                 c-0.6,0-1.4,0.2-1.4,0.9c0,0.8,1.6,1,3.2,1.4c1.6,0.4,3.2,1.2,3.2,3.2C26.8,27.9,24.4,28.8,22,28.8z"></path>
        </g>
        <g id="alert">
            <path d="M0,44h50.3L25.1,0L0,44z M22,14.1h6.3v15.7H22V14.1z M22,33h6.3v6.3H22V33z"></path>
        </g>
        <g id="refresh">
            <path d="M33,1.5h-8h-4v0V5v0.7v7.8h4V8.1c2.4,2.2,4,5.4,4,8.9c0,6.6-5.4,12-12,12v4c8.8,0,16-6.9,16-15.8                 c0-4.8-2.1-9.8-5.4-11.8H33V1.5z"></path>
            <path d="M9,25.9c-2.4-2.2-4-5.4-4-8.9c0-6.6,5.4-12,12-12V1C8.2,1,1,8.4,1,17.2c0,4.8,2.1,9.3,5.4,12.3H1v4h8h4v-1V29              v-0.7v-6.8H9V25.9z"></path>
        </g>
        <g id="picInPic">
            <path d="M29,0v13h-2V2H2v15h11v2H0V0H29z M32,15H15v9h17V15z"></path>
            <polygon points="5.8,4.4 4.4,5.8 9.6,11 6.7,11 6.7,13 13,13 13,6.7 11,6.7 11,9.6"></polygon>
        </g>
        <g id="picInPic-stop">
            <path d="M29,0v13h-2V2H2v15h11v2H0V0H29z M32,15H15v9h17V15z M12.2,13.6l1.4-1.4L8.4,7H11V5H5v6h2V8.4L12.2,13.6z"></path>
        </g>

        <g id="gel-exitLink">
            <path d="M9.8,8l6.2,6.2L14.2,16L8,9.8L1.8,16L0,14.2L6.2,8L0,1.8L1.8,0L8,6.2L14.2,0L16,1.8L9.8,8z"></path>
        </g>

        <g id="guidance-alert">
            <path d="M8,0L0,14h16L8,0z M9,12.5H7v-2h2V12.5z M7,9.5v-5h2v5H7z"></path>
        </g>

        <g id="accessibility">
            <path d="M15.76,23.91h7.5V22.66h-7.5v1.25Zm-2.5-9V26.05h8.13v3.09l3.44-3.09h5.94V14.92ZM32,27.58H25.26L20.14,32V27.58H12V13.75H32V27.58Zm-5-7.5H17v1.25H27Zm-2.5,2.61h3.75v1.14H24.51V22.69Z"></path>
        </g>

        <g id="playback-settings">
            <path d="M22.76522,23.847576 C21.7467559,24.2695688 20.5757973,23.785077 20.1528122,22.7645945 C19.7303271,21.744612 20.21531,20.575132 21.234774,20.1521393 C22.254238,19.7306465 23.4246967,20.2146382 23.8476818,21.2341207 C24.2706668,22.2546033 23.784184,23.4260832 22.76522,23.847576 M29.8439701,23.8605758 L28.0525333,23.1185885 C28.1885285,22.3896009 28.1955283,21.6326139 28.0560332,20.8801268 L29.8439701,20.1396395 C29.9724655,20.0861404 30.0339634,19.9376429 29.9809652,19.8096451 L29.1919931,17.9051777 C29.139495,17.7776799 28.9910002,17.715681 28.8630047,17.7691801 L27.0735679,18.5101674 C26.6400832,17.8791782 26.0996023,17.3481873 25.4891238,16.9286945 L26.2310976,15.1377251 C26.2840957,15.0092273 26.2225979,14.8607299 26.0941025,14.8077308 L24.1906696,14.0192443 C24.0626742,13.9657452 23.9146794,14.0277441 23.8611813,14.1562419 L23.1192075,15.9472113 C22.3902332,15.8122136 21.6327599,15.8047137 20.8807865,15.9442113 L20.1393127,14.1562419 C20.0863145,14.0277441 19.9378198,13.9657452 19.8093243,14.0192443 L17.9058915,14.8077308 C17.777396,14.8617299 17.7153982,15.0102273 17.7693963,15.1377251 L18.5098702,16.9271945 C17.8798924,17.3596871 17.3489112,17.9001778 16.929926,18.5106674 L15.1384892,17.7686801 C15.0104937,17.715681 14.861499,17.7776799 14.8090008,17.9051777 L14.0200287,19.8096451 C13.9670305,19.9376429 14.0280284,20.0861404 14.1570238,20.1396395 L15.9479606,20.8816268 C15.8129654,21.6091143 15.8049657,22.3666013 15.9444607,23.1190885 L14.1560239,23.8605758 C14.0275284,23.9135748 13.9655306,24.0620723 14.0195287,24.1905701 L14.8090008,26.0945375 C14.8619989,26.2225353 15.0104937,26.2845342 15.1384892,26.2315352 L16.927426,25.4900479 C17.3609107,26.121037 17.9008917,26.651528 18.5113701,27.0700208 L17.7698963,28.8619901 C17.7163982,28.9899879 17.777896,29.1384854 17.9063915,29.1919845 L19.8103243,29.980471 C19.9388197,30.03447 20.0868145,29.9724711 20.1398126,29.8439733 L20.8817865,28.052504 C21.6102607,28.1875017 22.367234,28.1955015 23.1207074,28.0555039 L23.8616813,29.8439733 C23.9151794,29.9724711 24.0636741,30.03347 24.1916696,29.980471 L26.0951024,29.1914845 C26.2235979,29.1384854 26.2850957,28.9899879 26.2320976,28.8619901 L25.4901238,27.0730207 C26.1216015,26.6395282 26.6515828,26.0995374 27.071068,25.4890479 L28.8625047,26.2310352 C28.9900002,26.2845342 29.139495,26.2225353 29.1919931,26.0945375 L29.9809652,24.1905701 C30.0339634,24.0620723 29.9724655,23.9130749 29.8439701,23.8605758"></path>
        </g>

        <symbol id="live-pulse" viewBox="0 0 12 12">
            <path id="liveIconRing" d="M5.96681502,10.3410568 C8.38342771,10.3410568 10.3424794,8.38388329 10.3424794,5.96958745 C10.3424794,3.5552916 8.38342771,1.59811812 5.96681502,1.59811812 C3.55020233,1.59811812 1.59115067,3.5552916 1.59115067,5.96958745 C1.59115067,8.38388329 3.55020233,10.3410568 5.96681502,10.3410568 Z M5.96681502,11.930682 C2.67143408,11.930682 0,9.26180906 0,5.96958745 C0,2.67736584 2.67143408,0.00849290887 5.96681502,0.00849290887 C9.26219596,0.00849290887 11.93363,2.67736584 11.93363,5.96958745 C11.93363,9.26180906 9.26219596,11.930682 5.96681502,11.930682 Z"></path>
            <circle id="liveIconCentre" cx="6" cy="6" r="3"></circle>
        </symbol>

    </defs>
</svg></body></html>